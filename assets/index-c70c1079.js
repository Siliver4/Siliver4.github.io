var BS=Object.defineProperty;var jS=(i,t,e)=>t in i?BS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var ht=(i,t,e)=>(jS(i,typeof t!="symbol"?t+"":t,e),e),am=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var l=(i,t,e)=>(am(i,t,"read from private field"),e?e.call(i):t.get(i)),g=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},_=(i,t,e,s)=>(am(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e);var We=(i,t,e,s)=>({set _(n){_(i,t,n,e)},get _(){return l(i,t,s)}}),b=(i,t,e)=>(am(i,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();function Sb(i,t){const e=Object.create(null),s=i.split(",");for(let n=0;n<s.length;n++)e[s[n]]=!0;return t?n=>!!e[n.toLowerCase()]:n=>!!e[n]}const $t={},ca=[],Ns=()=>{},VS=()=>!1,US=/^on[^a-z]/,Sg=i=>US.test(i),Cb=i=>i.startsWith("onUpdate:"),ve=Object.assign,Tb=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},WS=Object.prototype.hasOwnProperty,wt=(i,t)=>WS.call(i,t),ot=Array.isArray,ha=i=>Tg(i)==="[object Map]",TA=i=>Tg(i)==="[object Set]",ut=i=>typeof i=="function",ie=i=>typeof i=="string",Cg=i=>typeof i=="symbol",Ht=i=>i!==null&&typeof i=="object",xA=i=>(Ht(i)||ut(i))&&ut(i.then)&&ut(i.catch),RA=Object.prototype.toString,Tg=i=>RA.call(i),zS=i=>Tg(i).slice(8,-1),kA=i=>Tg(i)==="[object Object]",xb=i=>ie(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,jd=Sb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xg=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},KS=/-(\w)/g,di=xg(i=>i.replace(KS,(t,e)=>e?e.toUpperCase():"")),GS=/\B([A-Z])/g,zl=xg(i=>i.replace(GS,"-$1").toLowerCase()),Rg=xg(i=>i.charAt(0).toUpperCase()+i.slice(1)),lm=xg(i=>i?`on${Rg(i)}`:""),Po=(i,t)=>!Object.is(i,t),cm=(i,t)=>{for(let e=0;e<i.length;e++)i[e](t)},Ef=(i,t,e)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value:e})},qS=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let Rv;const $m=()=>Rv||(Rv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rb(i){if(ot(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=ie(s)?JS(s):Rb(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(ie(i)||Ht(i))return i}const YS=/;(?![^(]*\))/g,XS=/:([^]+)/,QS=/\/\*[^]*?\*\//g;function JS(i){const t={};return i.replace(QS,"").split(YS).forEach(e=>{if(e){const s=e.split(XS);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function kg(i){let t="";if(ie(i))t=i;else if(ot(i))for(let e=0;e<i.length;e++){const s=kg(i[e]);s&&(t+=s+" ")}else if(Ht(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const ZS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tC=Sb(ZS);function PA(i){return!!i||i===""}const Ji=i=>ie(i)?i:i==null?"":ot(i)||Ht(i)&&(i.toString===RA||!ut(i.toString))?JSON.stringify(i,LA,2):String(i),LA=(i,t)=>t&&t.__v_isRef?LA(i,t.value):ha(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n])=>(e[`${s} =>`]=n,e),{})}:TA(t)?{[`Set(${t.size})`]:[...t.values()]}:Ht(t)&&!ot(t)&&!kA(t)?String(t):t;let es;class IA{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=es,!t&&es&&(this.index=(es.scopes||(es.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=es;try{return es=this,t()}finally{es=e}}}on(){es=this}off(){es=this.parent}stop(t){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function MA(i){return new IA(i)}function eC(i,t=es){t&&t.active&&t.effects.push(i)}function DA(){return es}function sC(i){es&&es.cleanups.push(i)}const kb=i=>{const t=new Set(i);return t.w=0,t.n=0,t},OA=i=>(i.w&Yn)>0,NA=i=>(i.n&Yn)>0,iC=({deps:i})=>{if(i.length)for(let t=0;t<i.length;t++)i[t].w|=Yn},nC=i=>{const{deps:t}=i;if(t.length){let e=0;for(let s=0;s<t.length;s++){const n=t[s];OA(n)&&!NA(n)?n.delete(i):t[e++]=n,n.w&=~Yn,n.n&=~Yn}t.length=e}},wf=new WeakMap;let oc=0,Yn=1;const Hm=30;let Ds;const To=Symbol(""),Bm=Symbol("");class Pb{constructor(t,e=null,s){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,eC(this,s)}run(){if(!this.active)return this.fn();let t=Ds,e=Kn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ds,Ds=this,Kn=!0,Yn=1<<++oc,oc<=Hm?iC(this):kv(this),this.fn()}finally{oc<=Hm&&nC(this),Yn=1<<--oc,Ds=this.parent,Kn=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ds===this?this.deferStop=!0:this.active&&(kv(this),this.onStop&&this.onStop(),this.active=!1)}}function kv(i){const{deps:t}=i;if(t.length){for(let e=0;e<t.length;e++)t[e].delete(i);t.length=0}}let Kn=!0;const FA=[];function Kl(){FA.push(Kn),Kn=!1}function Gl(){const i=FA.pop();Kn=i===void 0?!0:i}function Ve(i,t,e){if(Kn&&Ds){let s=wf.get(i);s||wf.set(i,s=new Map);let n=s.get(e);n||s.set(e,n=kb()),$A(n)}}function $A(i,t){let e=!1;oc<=Hm?NA(i)||(i.n|=Yn,e=!OA(i)):e=!i.has(Ds),e&&(i.add(Ds),Ds.deps.push(i))}function Zi(i,t,e,s,n,r){const o=wf.get(i);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(e==="length"&&ot(i)){const c=Number(s);o.forEach((h,u)=>{(u==="length"||!Cg(u)&&u>=c)&&a.push(h)})}else switch(e!==void 0&&a.push(o.get(e)),t){case"add":ot(i)?xb(e)&&a.push(o.get("length")):(a.push(o.get(To)),ha(i)&&a.push(o.get(Bm)));break;case"delete":ot(i)||(a.push(o.get(To)),ha(i)&&a.push(o.get(Bm)));break;case"set":ha(i)&&a.push(o.get(To));break}if(a.length===1)a[0]&&jm(a[0]);else{const c=[];for(const h of a)h&&c.push(...h);jm(kb(c))}}function jm(i,t){const e=ot(i)?i:[...i];for(const s of e)s.computed&&Pv(s);for(const s of e)s.computed||Pv(s)}function Pv(i,t){(i!==Ds||i.allowRecurse)&&(i.scheduler?i.scheduler():i.run())}function rC(i,t){var e;return(e=wf.get(i))==null?void 0:e.get(t)}const oC=Sb("__proto__,__v_isRef,__isVue"),HA=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Cg)),Lv=aC();function aC(){const i={};return["includes","indexOf","lastIndexOf"].forEach(t=>{i[t]=function(...e){const s=St(this);for(let r=0,o=this.length;r<o;r++)Ve(s,"get",r+"");const n=s[t](...e);return n===-1||n===!1?s[t](...e.map(St)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{i[t]=function(...e){Kl();const s=St(this)[t].apply(this,e);return Gl(),s}}),i}function lC(i){const t=St(this);return Ve(t,"has",i),t.hasOwnProperty(i)}class BA{constructor(t=!1,e=!1){this._isReadonly=t,this._shallow=e}get(t,e,s){const n=this._isReadonly,r=this._shallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw"&&s===(n?r?AC:WA:r?UA:VA).get(t))return t;const o=ot(t);if(!n){if(o&&wt(Lv,e))return Reflect.get(Lv,e,s);if(e==="hasOwnProperty")return lC}const a=Reflect.get(t,e,s);return(Cg(e)?HA.has(e):oC(e))||(n||Ve(t,"get",e),r)?a:Kt(a)?o&&xb(e)?a:a.value:Ht(a)?n?KA(a):fd(a):a}}class jA extends BA{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(Il(r)&&Kt(r)&&!Kt(s))return!1;if(!this._shallow&&(!Sf(s)&&!Il(s)&&(r=St(r),s=St(s)),!ot(t)&&Kt(r)&&!Kt(s)))return r.value=s,!0;const o=ot(t)&&xb(e)?Number(e)<t.length:wt(t,e),a=Reflect.set(t,e,s,n);return t===St(n)&&(o?Po(s,r)&&Zi(t,"set",e,s):Zi(t,"add",e,s)),a}deleteProperty(t,e){const s=wt(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&Zi(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!Cg(e)||!HA.has(e))&&Ve(t,"has",e),s}ownKeys(t){return Ve(t,"iterate",ot(t)?"length":To),Reflect.ownKeys(t)}}class cC extends BA{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const hC=new jA,uC=new cC,dC=new jA(!0),Lb=i=>i,Pg=i=>Reflect.getPrototypeOf(i);function wd(i,t,e=!1,s=!1){i=i.__v_raw;const n=St(i),r=St(t);e||(Po(t,r)&&Ve(n,"get",t),Ve(n,"get",r));const{has:o}=Pg(n),a=s?Lb:e?Db:Oc;if(o.call(n,t))return a(i.get(t));if(o.call(n,r))return a(i.get(r));i!==n&&i.get(t)}function Sd(i,t=!1){const e=this.__v_raw,s=St(e),n=St(i);return t||(Po(i,n)&&Ve(s,"has",i),Ve(s,"has",n)),i===n?e.has(i):e.has(i)||e.has(n)}function Cd(i,t=!1){return i=i.__v_raw,!t&&Ve(St(i),"iterate",To),Reflect.get(i,"size",i)}function Iv(i){i=St(i);const t=St(this);return Pg(t).has.call(t,i)||(t.add(i),Zi(t,"add",i,i)),this}function Mv(i,t){t=St(t);const e=St(this),{has:s,get:n}=Pg(e);let r=s.call(e,i);r||(i=St(i),r=s.call(e,i));const o=n.call(e,i);return e.set(i,t),r?Po(t,o)&&Zi(e,"set",i,t):Zi(e,"add",i,t),this}function Dv(i){const t=St(this),{has:e,get:s}=Pg(t);let n=e.call(t,i);n||(i=St(i),n=e.call(t,i)),s&&s.call(t,i);const r=t.delete(i);return n&&Zi(t,"delete",i,void 0),r}function Ov(){const i=St(this),t=i.size!==0,e=i.clear();return t&&Zi(i,"clear",void 0,void 0),e}function Td(i,t){return function(s,n){const r=this,o=r.__v_raw,a=St(o),c=t?Lb:i?Db:Oc;return!i&&Ve(a,"iterate",To),o.forEach((h,u)=>s.call(n,c(h),c(u),r))}}function xd(i,t,e){return function(...s){const n=this.__v_raw,r=St(n),o=ha(r),a=i==="entries"||i===Symbol.iterator&&o,c=i==="keys"&&o,h=n[i](...s),u=e?Lb:t?Db:Oc;return!t&&Ve(r,"iterate",c?Bm:To),{next(){const{value:d,done:f}=h.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function ln(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function fC(){const i={get(r){return wd(this,r)},get size(){return Cd(this)},has:Sd,add:Iv,set:Mv,delete:Dv,clear:Ov,forEach:Td(!1,!1)},t={get(r){return wd(this,r,!1,!0)},get size(){return Cd(this)},has:Sd,add:Iv,set:Mv,delete:Dv,clear:Ov,forEach:Td(!1,!0)},e={get(r){return wd(this,r,!0)},get size(){return Cd(this,!0)},has(r){return Sd.call(this,r,!0)},add:ln("add"),set:ln("set"),delete:ln("delete"),clear:ln("clear"),forEach:Td(!0,!1)},s={get(r){return wd(this,r,!0,!0)},get size(){return Cd(this,!0)},has(r){return Sd.call(this,r,!0)},add:ln("add"),set:ln("set"),delete:ln("delete"),clear:ln("clear"),forEach:Td(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{i[r]=xd(r,!1,!1),e[r]=xd(r,!0,!1),t[r]=xd(r,!1,!0),s[r]=xd(r,!0,!0)}),[i,e,t,s]}const[pC,gC,mC,_C]=fC();function Ib(i,t){const e=t?i?_C:mC:i?gC:pC;return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(wt(e,n)&&n in s?e:s,n,r)}const bC={get:Ib(!1,!1)},vC={get:Ib(!1,!0)},yC={get:Ib(!0,!1)},VA=new WeakMap,UA=new WeakMap,WA=new WeakMap,AC=new WeakMap;function EC(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wC(i){return i.__v_skip||!Object.isExtensible(i)?0:EC(zS(i))}function fd(i){return Il(i)?i:Mb(i,!1,hC,bC,VA)}function zA(i){return Mb(i,!1,dC,vC,UA)}function KA(i){return Mb(i,!0,uC,yC,WA)}function Mb(i,t,e,s,n){if(!Ht(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=n.get(i);if(r)return r;const o=wC(i);if(o===0)return i;const a=new Proxy(i,o===2?s:e);return n.set(i,a),a}function Gn(i){return Il(i)?Gn(i.__v_raw):!!(i&&i.__v_isReactive)}function Il(i){return!!(i&&i.__v_isReadonly)}function Sf(i){return!!(i&&i.__v_isShallow)}function GA(i){return Gn(i)||Il(i)}function St(i){const t=i&&i.__v_raw;return t?St(t):i}function Lg(i){return Ef(i,"__v_skip",!0),i}const Oc=i=>Ht(i)?fd(i):i,Db=i=>Ht(i)?KA(i):i;function qA(i){Kn&&Ds&&(i=St(i),$A(i.dep||(i.dep=kb())))}function YA(i,t){i=St(i);const e=i.dep;e&&jm(e)}function Kt(i){return!!(i&&i.__v_isRef===!0)}function Ob(i){return XA(i,!1)}function SC(i){return XA(i,!0)}function XA(i,t){return Kt(i)?i:new CC(i,t)}class CC{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:St(t),this._value=e?t:Oc(t)}get value(){return qA(this),this._value}set value(t){const e=this.__v_isShallow||Sf(t)||Il(t);t=e?t:St(t),Po(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Oc(t),YA(this))}}function ua(i){return Kt(i)?i.value:i}const TC={get:(i,t,e)=>ua(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return Kt(n)&&!Kt(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function QA(i){return Gn(i)?i:new Proxy(i,TC)}function xC(i){const t=ot(i)?new Array(i.length):{};for(const e in i)t[e]=kC(i,e);return t}class RC{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return rC(St(this._object),this._key)}}function kC(i,t,e){const s=i[t];return Kt(s)?s:new RC(i,t,e)}class PC{constructor(t,e,s,n){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Pb(t,()=>{this._dirty||(this._dirty=!0,YA(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=St(this);return qA(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function LC(i,t,e=!1){let s,n;const r=ut(i);return r?(s=i,n=Ns):(s=i.get,n=i.set),new PC(s,n,r||!n,e)}function qn(i,t,e,s){let n;try{n=s?i(...s):i()}catch(r){Ig(r,t,e)}return n}function Fs(i,t,e,s){if(ut(i)){const r=qn(i,t,e,s);return r&&xA(r)&&r.catch(o=>{Ig(o,t,e)}),r}const n=[];for(let r=0;r<i.length;r++)n.push(Fs(i[r],t,e,s));return n}function Ig(i,t,e,s=!0){const n=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=e;for(;r;){const h=r.ec;if(h){for(let u=0;u<h.length;u++)if(h[u](i,o,a)===!1)return}r=r.parent}const c=t.appContext.config.errorHandler;if(c){qn(c,null,10,[i,o,a]);return}}IC(i,e,n,s)}function IC(i,t,e,s=!0){console.error(i)}let Nc=!1,Vm=!1;const xe=[];let li=0;const da=[];let vi=null,cr=0;const JA=Promise.resolve();let Nb=null;function Mg(i){const t=Nb||JA;return i?t.then(this?i.bind(this):i):t}function MC(i){let t=li+1,e=xe.length;for(;t<e;){const s=t+e>>>1,n=xe[s],r=Fc(n);r<i||r===i&&n.pre?t=s+1:e=s}return t}function Fb(i){(!xe.length||!xe.includes(i,Nc&&i.allowRecurse?li+1:li))&&(i.id==null?xe.push(i):xe.splice(MC(i.id),0,i),ZA())}function ZA(){!Nc&&!Vm&&(Vm=!0,Nb=JA.then(eE))}function DC(i){const t=xe.indexOf(i);t>li&&xe.splice(t,1)}function OC(i){ot(i)?da.push(...i):(!vi||!vi.includes(i,i.allowRecurse?cr+1:cr))&&da.push(i),ZA()}function Nv(i,t=Nc?li+1:0){for(;t<xe.length;t++){const e=xe[t];e&&e.pre&&(xe.splice(t,1),t--,e())}}function tE(i){if(da.length){const t=[...new Set(da)];if(da.length=0,vi){vi.push(...t);return}for(vi=t,vi.sort((e,s)=>Fc(e)-Fc(s)),cr=0;cr<vi.length;cr++)vi[cr]();vi=null,cr=0}}const Fc=i=>i.id==null?1/0:i.id,NC=(i,t)=>{const e=Fc(i)-Fc(t);if(e===0){if(i.pre&&!t.pre)return-1;if(t.pre&&!i.pre)return 1}return e};function eE(i){Vm=!1,Nc=!0,xe.sort(NC);const t=Ns;try{for(li=0;li<xe.length;li++){const e=xe[li];e&&e.active!==!1&&qn(e,null,14)}}finally{li=0,xe.length=0,tE(),Nc=!1,Nb=null,(xe.length||da.length)&&eE()}}function FC(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||$t;let n=e;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=s[u]||$t;f&&(n=e.map(p=>ie(p)?p.trim():p)),d&&(n=e.map(qS))}let a,c=s[a=lm(t)]||s[a=lm(di(t))];!c&&r&&(c=s[a=lm(zl(t))]),c&&Fs(c,i,6,n);const h=s[a+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,Fs(h,i,6,n)}}function sE(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!ut(i)){const c=h=>{const u=sE(h,t,!0);u&&(a=!0,ve(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}return!r&&!a?(Ht(i)&&s.set(i,null),null):(ot(r)?r.forEach(c=>o[c]=null):ve(o,r),Ht(i)&&s.set(i,o),o)}function Dg(i,t){return!i||!Sg(t)?!1:(t=t.slice(2).replace(/Once$/,""),wt(i,t[0].toLowerCase()+t.slice(1))||wt(i,zl(t))||wt(i,t))}let fs=null,Og=null;function Cf(i){const t=fs;return fs=i,Og=i&&i.type.__scopeId||null,t}function Fo(i){Og=i}function $o(){Og=null}function $C(i,t=fs,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&Gv(-1);const r=Cf(t);let o;try{o=i(...n)}finally{Cf(r),s._d&&Gv(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function hm(i){const{type:t,vnode:e,proxy:s,withProxy:n,props:r,propsOptions:[o],slots:a,attrs:c,emit:h,render:u,renderCache:d,data:f,setupState:p,ctx:m,inheritAttrs:v}=i;let A,y;const w=Cf(i);try{if(e.shapeFlag&4){const C=n||s,R=C;A=ai(u.call(R,C,d,r,p,f,m)),y=c}else{const C=t;A=ai(C.length>1?C(r,{attrs:c,slots:a,emit:h}):C(r,null)),y=t.props?c:HC(c)}}catch(C){Tc.length=0,Ig(C,i,1),A=Nt(Lo)}let T=A;if(y&&v!==!1){const C=Object.keys(y),{shapeFlag:R}=T;C.length&&R&7&&(o&&C.some(Cb)&&(y=BC(y,o)),T=Ml(T,y))}return e.dirs&&(T=Ml(T),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&(T.transition=e.transition),A=T,Cf(w),A}const HC=i=>{let t;for(const e in i)(e==="class"||e==="style"||Sg(e))&&((t||(t={}))[e]=i[e]);return t},BC=(i,t)=>{const e={};for(const s in i)(!Cb(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function jC(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Fv(s,o,h):!!o;if(c&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==s[f]&&!Dg(h,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Fv(s,o,h):!0:!!o;return!1}function Fv(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!Dg(e,r))return!0}return!1}function VC({vnode:i,parent:t},e){for(;t&&t.subTree===i;)(i=t.vnode).el=e,t=t.parent}const iE="components";function is(i,t){return WC(iE,i,!0,t)||i}const UC=Symbol.for("v-ndc");function WC(i,t,e=!0,s=!1){const n=fs||de;if(n){const r=n.type;if(i===iE){const a=HT(r,!1);if(a&&(a===t||a===di(t)||a===Rg(di(t))))return r}const o=$v(n[i]||r[i],t)||$v(n.appContext[i],t);return!o&&s?r:o}}function $v(i,t){return i&&(i[t]||i[di(t)]||i[Rg(di(t))])}const zC=i=>i.__isSuspense;function KC(i,t){t&&t.pendingBranch?ot(i)?t.effects.push(...i):t.effects.push(i):OC(i)}const Rd={};function Sc(i,t,e){return nE(i,t,e)}function nE(i,t,{immediate:e,deep:s,flush:n,onTrack:r,onTrigger:o}=$t){var a;const c=DA()===((a=de)==null?void 0:a.scope)?de:null;let h,u=!1,d=!1;if(Kt(i)?(h=()=>i.value,u=Sf(i)):Gn(i)?(h=()=>i,s=!0):ot(i)?(d=!0,u=i.some(C=>Gn(C)||Sf(C)),h=()=>i.map(C=>{if(Kt(C))return C.value;if(Gn(C))return oa(C);if(ut(C))return qn(C,c,2)})):ut(i)?t?h=()=>qn(i,c,2):h=()=>{if(!(c&&c.isUnmounted))return f&&f(),Fs(i,c,3,[p])}:h=Ns,t&&s){const C=h;h=()=>oa(C())}let f,p=C=>{f=w.onStop=()=>{qn(C,c,4),f=w.onStop=void 0}},m;if(Bc)if(p=Ns,t?e&&Fs(t,c,3,[h(),d?[]:void 0,p]):h(),n==="sync"){const C=VT();m=C.__watcherHandles||(C.__watcherHandles=[])}else return Ns;let v=d?new Array(i.length).fill(Rd):Rd;const A=()=>{if(w.active)if(t){const C=w.run();(s||u||(d?C.some((R,k)=>Po(R,v[k])):Po(C,v)))&&(f&&f(),Fs(t,c,3,[C,v===Rd?void 0:d&&v[0]===Rd?[]:v,p]),v=C)}else w.run()};A.allowRecurse=!!t;let y;n==="sync"?y=A:n==="post"?y=()=>Ne(A,c&&c.suspense):(A.pre=!0,c&&(A.id=c.uid),y=()=>Fb(A));const w=new Pb(h,y);t?e?A():v=w.run():n==="post"?Ne(w.run.bind(w),c&&c.suspense):w.run();const T=()=>{w.stop(),c&&c.scope&&Tb(c.scope.effects,w)};return m&&m.push(T),T}function GC(i,t,e){const s=this.proxy,n=ie(i)?i.includes(".")?rE(s,i):()=>s[i]:i.bind(s,s);let r;ut(t)?r=t:(r=t.handler,e=t);const o=de;Ol(this);const a=nE(n,r.bind(s),e);return o?Ol(o):Ro(),a}function rE(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}function oa(i,t){if(!Ht(i)||i.__v_skip||(t=t||new Set,t.has(i)))return i;if(t.add(i),Kt(i))oa(i.value,t);else if(ot(i))for(let e=0;e<i.length;e++)oa(i[e],t);else if(TA(i)||ha(i))i.forEach(e=>{oa(e,t)});else if(kA(i))for(const e in i)oa(i[e],t);return i}function nr(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(Kl(),Fs(c,e,8,[i.el,a,i,t]),Gl())}}/*! #__NO_SIDE_EFFECTS__ */function oE(i,t){return ut(i)?(()=>ve({name:i.name},t,{setup:i}))():i}const Vd=i=>!!i.type.__asyncLoader,aE=i=>i.type.__isKeepAlive;function qC(i,t){lE(i,"a",t)}function YC(i,t){lE(i,"da",t)}function lE(i,t,e=de){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(Ng(t,s,e),e){let n=e.parent;for(;n&&n.parent;)aE(n.parent.vnode)&&XC(s,t,e,n),n=n.parent}}function XC(i,t,e,s){const n=Ng(t,i,s,!0);cE(()=>{Tb(s[t],n)},e)}function Ng(i,t,e=de,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{if(e.isUnmounted)return;Kl(),Ol(e);const a=Fs(t,e,i,o);return Ro(),Gl(),a});return s?n.unshift(r):n.push(r),r}}const on=i=>(t,e=de)=>(!Bc||i==="sp")&&Ng(i,(...s)=>t(...s),e),QC=on("bm"),JC=on("m"),ZC=on("bu"),tT=on("u"),eT=on("bum"),cE=on("um"),sT=on("sp"),iT=on("rtg"),nT=on("rtc");function rT(i,t=de){Ng("ec",i,t)}function xo(i,t,e,s){let n;const r=e&&e[s];if(ot(i)||ie(i)){n=new Array(i.length);for(let o=0,a=i.length;o<a;o++)n[o]=t(i[o],o,void 0,r&&r[o])}else if(typeof i=="number"){n=new Array(i);for(let o=0;o<i;o++)n[o]=t(o+1,o,void 0,r&&r[o])}else if(Ht(i))if(i[Symbol.iterator])n=Array.from(i,(o,a)=>t(o,a,void 0,r&&r[a]));else{const o=Object.keys(i);n=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const h=o[a];n[a]=t(i[h],h,a,r&&r[a])}}else n=[];return e&&(e[s]=n),n}const Um=i=>i?yE(i)?Vb(i)||i.proxy:Um(i.parent):null,Cc=ve(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Um(i.parent),$root:i=>Um(i.root),$emit:i=>i.emit,$options:i=>$b(i),$forceUpdate:i=>i.f||(i.f=()=>Fb(i.update)),$nextTick:i=>i.n||(i.n=Mg.bind(i.proxy)),$watch:i=>GC.bind(i)}),um=(i,t)=>i!==$t&&!i.__isScriptSetup&&wt(i,t),oT={get({_:i},t){const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:c}=i;let h;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(um(s,t))return o[t]=1,s[t];if(n!==$t&&wt(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&wt(h,t))return o[t]=3,r[t];if(e!==$t&&wt(e,t))return o[t]=4,e[t];Wm&&(o[t]=0)}}const u=Cc[t];let d,f;if(u)return t==="$attrs"&&Ve(i,"get",t),u(i);if((d=a.__cssModules)&&(d=d[t]))return d;if(e!==$t&&wt(e,t))return o[t]=4,e[t];if(f=c.config.globalProperties,wt(f,t))return f[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return um(n,t)?(n[t]=e,!0):s!==$t&&wt(s,t)?(s[t]=e,!0):wt(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==$t&&wt(i,o)||um(t,o)||(a=r[0])&&wt(a,o)||wt(s,o)||wt(Cc,o)||wt(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:wt(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function Hv(i){return ot(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Wm=!0;function aT(i){const t=$b(i),e=i.proxy,s=i.ctx;Wm=!1,t.beforeCreate&&Bv(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:c,inject:h,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:m,activated:v,deactivated:A,beforeDestroy:y,beforeUnmount:w,destroyed:T,unmounted:C,render:R,renderTracked:k,renderTriggered:I,errorCaptured:M,serverPrefetch:$,expose:K,inheritAttrs:z,components:nt,directives:et,filters:dt}=t;if(h&&lT(h,s,null),o)for(const V in o){const G=o[V];ut(G)&&(s[V]=G.bind(e))}if(n){const V=n.call(e,e);Ht(V)&&(i.data=fd(V))}if(Wm=!0,r)for(const V in r){const G=r[V],jt=ut(G)?G.bind(e,e):ut(G.get)?G.get.bind(e,e):Ns,ne=!ut(G)&&ut(G.set)?G.set.bind(e):Ns,Xt=ds({get:jt,set:ne});Object.defineProperty(s,V,{enumerable:!0,configurable:!0,get:()=>Xt.value,set:gt=>Xt.value=gt})}if(a)for(const V in a)hE(a[V],s,e,V);if(c){const V=ut(c)?c.call(e):c;Reflect.ownKeys(V).forEach(G=>{Ud(G,V[G])})}u&&Bv(u,i,"c");function X(V,G){ot(G)?G.forEach(jt=>V(jt.bind(e))):G&&V(G.bind(e))}if(X(QC,d),X(JC,f),X(ZC,p),X(tT,m),X(qC,v),X(YC,A),X(rT,M),X(nT,k),X(iT,I),X(eT,w),X(cE,C),X(sT,$),ot(K))if(K.length){const V=i.exposed||(i.exposed={});K.forEach(G=>{Object.defineProperty(V,G,{get:()=>e[G],set:jt=>e[G]=jt})})}else i.exposed||(i.exposed={});R&&i.render===Ns&&(i.render=R),z!=null&&(i.inheritAttrs=z),nt&&(i.components=nt),et&&(i.directives=et)}function lT(i,t,e=Ns){ot(i)&&(i=zm(i));for(const s in i){const n=i[s];let r;Ht(n)?"default"in n?r=ci(n.from||s,n.default,!0):r=ci(n.from||s):r=ci(n),Kt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Bv(i,t,e){Fs(ot(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function hE(i,t,e,s){const n=s.includes(".")?rE(e,s):()=>e[s];if(ie(i)){const r=t[i];ut(r)&&Sc(n,r)}else if(ut(i))Sc(n,i.bind(e));else if(Ht(i))if(ot(i))i.forEach(r=>hE(r,t,e,s));else{const r=ut(i.handler)?i.handler.bind(e):t[i.handler];ut(r)&&Sc(n,r,i)}}function $b(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let c;return a?c=a:!n.length&&!e&&!s?c=t:(c={},n.length&&n.forEach(h=>Tf(c,h,o,!0)),Tf(c,t,o)),Ht(t)&&r.set(t,c),c}function Tf(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&Tf(i,r,e,!0),n&&n.forEach(o=>Tf(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=cT[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const cT={data:jv,props:Vv,emits:Vv,methods:ac,computed:ac,beforeCreate:ke,created:ke,beforeMount:ke,mounted:ke,beforeUpdate:ke,updated:ke,beforeDestroy:ke,beforeUnmount:ke,destroyed:ke,unmounted:ke,activated:ke,deactivated:ke,errorCaptured:ke,serverPrefetch:ke,components:ac,directives:ac,watch:uT,provide:jv,inject:hT};function jv(i,t){return t?i?function(){return ve(ut(i)?i.call(this,this):i,ut(t)?t.call(this,this):t)}:t:i}function hT(i,t){return ac(zm(i),zm(t))}function zm(i){if(ot(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function ke(i,t){return i?[...new Set([].concat(i,t))]:t}function ac(i,t){return i?ve(Object.create(null),i,t):t}function Vv(i,t){return i?ot(i)&&ot(t)?[...new Set([...i,...t])]:ve(Object.create(null),Hv(i),Hv(t??{})):t}function uT(i,t){if(!i)return t;if(!t)return i;const e=ve(Object.create(null),i);for(const s in t)e[s]=ke(i[s],t[s]);return e}function uE(){return{app:null,config:{isNativeTag:VS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dT=0;function fT(i,t){return function(s,n=null){ut(s)||(s=ve({},s)),n!=null&&!Ht(n)&&(n=null);const r=uE(),o=new WeakSet;let a=!1;const c=r.app={_uid:dT++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:UT,get config(){return r.config},set config(h){},use(h,...u){return o.has(h)||(h&&ut(h.install)?(o.add(h),h.install(c,...u)):ut(h)&&(o.add(h),h(c,...u))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,u){return u?(r.components[h]=u,c):r.components[h]},directive(h,u){return u?(r.directives[h]=u,c):r.directives[h]},mount(h,u,d){if(!a){const f=Nt(s,n);return f.appContext=r,u&&t?t(f,h):i(f,h,d),a=!0,c._container=h,h.__vue_app__=c,Vb(f.component)||f.component.proxy}},unmount(){a&&(i(null,c._container),delete c._container.__vue_app__)},provide(h,u){return r.provides[h]=u,c},runWithContext(h){$c=c;try{return h()}finally{$c=null}}};return c}}let $c=null;function Ud(i,t){if(de){let e=de.provides;const s=de.parent&&de.parent.provides;s===e&&(e=de.provides=Object.create(s)),e[i]=t}}function ci(i,t,e=!1){const s=de||fs;if(s||$c){const n=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:$c._context.provides;if(n&&i in n)return n[i];if(arguments.length>1)return e&&ut(t)?t.call(s&&s.proxy):t}}function pT(){return!!(de||fs||$c)}function gT(i,t,e,s=!1){const n={},r={};Ef(r,$g,1),i.propsDefaults=Object.create(null),dE(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:zA(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function mT(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=St(n),[c]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Dg(i.emitsOptions,f))continue;const p=t[f];if(c)if(wt(r,f))p!==r[f]&&(r[f]=p,h=!0);else{const m=di(f);n[m]=Km(c,a,m,p,i,!1)}else p!==r[f]&&(r[f]=p,h=!0)}}}else{dE(i,t,n,r)&&(h=!0);let u;for(const d in a)(!t||!wt(t,d)&&((u=zl(d))===d||!wt(t,u)))&&(c?e&&(e[d]!==void 0||e[u]!==void 0)&&(n[d]=Km(c,a,d,void 0,i,!0)):delete n[d]);if(r!==a)for(const d in r)(!t||!wt(t,d))&&(delete r[d],h=!0)}h&&Zi(i,"set","$attrs")}function dE(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let c in t){if(jd(c))continue;const h=t[c];let u;n&&wt(n,u=di(c))?!r||!r.includes(u)?e[u]=h:(a||(a={}))[u]=h:Dg(i.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=St(e),h=a||$t;for(let u=0;u<r.length;u++){const d=r[u];e[d]=Km(n,c,d,h[d],i,!wt(h,d))}}return o}function Km(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=wt(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ut(c)){const{propsDefaults:h}=n;e in h?s=h[e]:(Ol(n),s=h[e]=c.call(null,t),Ro())}else s=c}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===zl(e))&&(s=!0))}return s}function fE(i,t,e=!1){const s=t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let c=!1;if(!ut(i)){const u=d=>{c=!0;const[f,p]=fE(d,t,!0);ve(o,f),p&&a.push(...p)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!c)return Ht(i)&&s.set(i,ca),ca;if(ot(r))for(let u=0;u<r.length;u++){const d=di(r[u]);Uv(d)&&(o[d]=$t)}else if(r)for(const u in r){const d=di(u);if(Uv(d)){const f=r[u],p=o[d]=ot(f)||ut(f)?{type:f}:ve({},f);if(p){const m=Kv(Boolean,p.type),v=Kv(String,p.type);p[0]=m>-1,p[1]=v<0||m<v,(m>-1||wt(p,"default"))&&a.push(d)}}}const h=[o,a];return Ht(i)&&s.set(i,h),h}function Uv(i){return i[0]!=="$"}function Wv(i){const t=i&&i.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:i===null?"null":""}function zv(i,t){return Wv(i)===Wv(t)}function Kv(i,t){return ot(t)?t.findIndex(e=>zv(e,i)):ut(t)&&zv(t,i)?0:-1}const pE=i=>i[0]==="_"||i==="$stable",Hb=i=>ot(i)?i.map(ai):[ai(i)],_T=(i,t,e)=>{if(t._n)return t;const s=$C((...n)=>Hb(t(...n)),e);return s._c=!1,s},gE=(i,t,e)=>{const s=i._ctx;for(const n in i){if(pE(n))continue;const r=i[n];if(ut(r))t[n]=_T(n,r,s);else if(r!=null){const o=Hb(r);t[n]=()=>o}}},mE=(i,t)=>{const e=Hb(t);i.slots.default=()=>e},bT=(i,t)=>{if(i.vnode.shapeFlag&32){const e=t._;e?(i.slots=St(t),Ef(t,"_",e)):gE(t,i.slots={})}else i.slots={},t&&mE(i,t);Ef(i.slots,$g,1)},vT=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=$t;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:(ve(n,t),!e&&a===1&&delete n._):(r=!t.$stable,gE(t,n)),o=t}else t&&(mE(i,t),o={default:1});if(r)for(const a in n)!pE(a)&&o[a]==null&&delete n[a]};function Gm(i,t,e,s,n=!1){if(ot(i)){i.forEach((f,p)=>Gm(f,t&&(ot(t)?t[p]:t),e,s,n));return}if(Vd(s)&&!n)return;const r=s.shapeFlag&4?Vb(s.component)||s.component.proxy:s.el,o=n?null:r,{i:a,r:c}=i,h=t&&t.r,u=a.refs===$t?a.refs={}:a.refs,d=a.setupState;if(h!=null&&h!==c&&(ie(h)?(u[h]=null,wt(d,h)&&(d[h]=null)):Kt(h)&&(h.value=null)),ut(c))qn(c,a,12,[o,u]);else{const f=ie(c),p=Kt(c);if(f||p){const m=()=>{if(i.f){const v=f?wt(d,c)?d[c]:u[c]:c.value;n?ot(v)&&Tb(v,r):ot(v)?v.includes(r)||v.push(r):f?(u[c]=[r],wt(d,c)&&(d[c]=u[c])):(c.value=[r],i.k&&(u[i.k]=c.value))}else f?(u[c]=o,wt(d,c)&&(d[c]=o)):p&&(c.value=o,i.k&&(u[i.k]=o))};o?(m.id=-1,Ne(m,e)):m()}}}const Ne=KC;function yT(i){return AT(i)}function AT(i,t){const e=$m();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=Ns,insertStaticContent:m}=i,v=(E,S,x,L=null,D=null,O=null,q=!1,B=null,j=!!S.dynamicChildren)=>{if(E===S)return;E&&!Zl(E,S)&&(L=P(E),gt(E,D,O,!0),E=null),S.patchFlag===-2&&(j=!1,S.dynamicChildren=null);const{type:F,ref:tt,shapeFlag:Y}=S;switch(F){case Fg:A(E,S,x,L);break;case Lo:y(E,S,x,L);break;case Wd:E==null&&w(S,x,L,q);break;case zt:nt(E,S,x,L,D,O,q,B,j);break;default:Y&1?R(E,S,x,L,D,O,q,B,j):Y&6?et(E,S,x,L,D,O,q,B,j):(Y&64||Y&128)&&F.process(E,S,x,L,D,O,q,B,j,W)}tt!=null&&D&&Gm(tt,E&&E.ref,O,S||E,!S)},A=(E,S,x,L)=>{if(E==null)s(S.el=a(S.children),x,L);else{const D=S.el=E.el;S.children!==E.children&&h(D,S.children)}},y=(E,S,x,L)=>{E==null?s(S.el=c(S.children||""),x,L):S.el=E.el},w=(E,S,x,L)=>{[E.el,E.anchor]=m(E.children,S,x,L,E.el,E.anchor)},T=({el:E,anchor:S},x,L)=>{let D;for(;E&&E!==S;)D=f(E),s(E,x,L),E=D;s(S,x,L)},C=({el:E,anchor:S})=>{let x;for(;E&&E!==S;)x=f(E),n(E),E=x;n(S)},R=(E,S,x,L,D,O,q,B,j)=>{q=q||S.type==="svg",E==null?k(S,x,L,D,O,q,B,j):$(E,S,D,O,q,B,j)},k=(E,S,x,L,D,O,q,B)=>{let j,F;const{type:tt,props:Y,shapeFlag:Z,transition:rt,dirs:ft}=E;if(j=E.el=o(E.type,O,Y&&Y.is,Y),Z&8?u(j,E.children):Z&16&&M(E.children,j,null,L,D,O&&tt!=="foreignObject",q,B),ft&&nr(E,null,L,"created"),I(j,E,E.scopeId,q,L),Y){for(const Tt in Y)Tt!=="value"&&!jd(Tt)&&r(j,Tt,null,Y[Tt],O,E.children,L,D,Ct);"value"in Y&&r(j,"value",null,Y.value),(F=Y.onVnodeBeforeMount)&&js(F,L,E)}ft&&nr(E,null,L,"beforeMount");const kt=ET(D,rt);kt&&rt.beforeEnter(j),s(j,S,x),((F=Y&&Y.onVnodeMounted)||kt||ft)&&Ne(()=>{F&&js(F,L,E),kt&&rt.enter(j),ft&&nr(E,null,L,"mounted")},D)},I=(E,S,x,L,D)=>{if(x&&p(E,x),L)for(let O=0;O<L.length;O++)p(E,L[O]);if(D){let O=D.subTree;if(S===O){const q=D.vnode;I(E,q,q.scopeId,q.slotScopeIds,D.parent)}}},M=(E,S,x,L,D,O,q,B,j=0)=>{for(let F=j;F<E.length;F++){const tt=E[F]=B?gn(E[F]):ai(E[F]);v(null,tt,S,x,L,D,O,q,B)}},$=(E,S,x,L,D,O,q)=>{const B=S.el=E.el;let{patchFlag:j,dynamicChildren:F,dirs:tt}=S;j|=E.patchFlag&16;const Y=E.props||$t,Z=S.props||$t;let rt;x&&rr(x,!1),(rt=Z.onVnodeBeforeUpdate)&&js(rt,x,S,E),tt&&nr(S,E,x,"beforeUpdate"),x&&rr(x,!0);const ft=D&&S.type!=="foreignObject";if(F?K(E.dynamicChildren,F,B,x,L,ft,O):q||G(E,S,B,null,x,L,ft,O,!1),j>0){if(j&16)z(B,S,Y,Z,x,L,D);else if(j&2&&Y.class!==Z.class&&r(B,"class",null,Z.class,D),j&4&&r(B,"style",Y.style,Z.style,D),j&8){const kt=S.dynamicProps;for(let Tt=0;Tt<kt.length;Tt++){const qt=kt[Tt],bs=Y[qt],Wo=Z[qt];(Wo!==bs||qt==="value")&&r(B,qt,bs,Wo,D,E.children,x,L,Ct)}}j&1&&E.children!==S.children&&u(B,S.children)}else!q&&F==null&&z(B,S,Y,Z,x,L,D);((rt=Z.onVnodeUpdated)||tt)&&Ne(()=>{rt&&js(rt,x,S,E),tt&&nr(S,E,x,"updated")},L)},K=(E,S,x,L,D,O,q)=>{for(let B=0;B<S.length;B++){const j=E[B],F=S[B],tt=j.el&&(j.type===zt||!Zl(j,F)||j.shapeFlag&70)?d(j.el):x;v(j,F,tt,null,L,D,O,q,!0)}},z=(E,S,x,L,D,O,q)=>{if(x!==L){if(x!==$t)for(const B in x)!jd(B)&&!(B in L)&&r(E,B,x[B],null,q,S.children,D,O,Ct);for(const B in L){if(jd(B))continue;const j=L[B],F=x[B];j!==F&&B!=="value"&&r(E,B,F,j,q,S.children,D,O,Ct)}"value"in L&&r(E,"value",x.value,L.value)}},nt=(E,S,x,L,D,O,q,B,j)=>{const F=S.el=E?E.el:a(""),tt=S.anchor=E?E.anchor:a("");let{patchFlag:Y,dynamicChildren:Z,slotScopeIds:rt}=S;rt&&(B=B?B.concat(rt):rt),E==null?(s(F,x,L),s(tt,x,L),M(S.children,x,tt,D,O,q,B,j)):Y>0&&Y&64&&Z&&E.dynamicChildren?(K(E.dynamicChildren,Z,x,D,O,q,B),(S.key!=null||D&&S===D.subTree)&&_E(E,S,!0)):G(E,S,x,tt,D,O,q,B,j)},et=(E,S,x,L,D,O,q,B,j)=>{S.slotScopeIds=B,E==null?S.shapeFlag&512?D.ctx.activate(S,x,L,q,j):dt(S,x,L,D,O,q,j):lt(E,S,j)},dt=(E,S,x,L,D,O,q)=>{const B=E.component=DT(E,L,D);if(aE(E)&&(B.ctx.renderer=W),OT(B),B.asyncDep){if(D&&D.registerDep(B,X),!E.el){const j=B.subTree=Nt(Lo);y(null,j,S,x)}return}X(B,E,S,x,D,O,q)},lt=(E,S,x)=>{const L=S.component=E.component;if(jC(E,S,x))if(L.asyncDep&&!L.asyncResolved){V(L,S,x);return}else L.next=S,DC(L.update),L.update();else S.el=E.el,L.vnode=S},X=(E,S,x,L,D,O,q)=>{const B=()=>{if(E.isMounted){let{next:tt,bu:Y,u:Z,parent:rt,vnode:ft}=E,kt=tt,Tt;rr(E,!1),tt?(tt.el=ft.el,V(E,tt,q)):tt=ft,Y&&cm(Y),(Tt=tt.props&&tt.props.onVnodeBeforeUpdate)&&js(Tt,rt,tt,ft),rr(E,!0);const qt=hm(E),bs=E.subTree;E.subTree=qt,v(bs,qt,d(bs.el),P(bs),E,D,O),tt.el=qt.el,kt===null&&VC(E,qt.el),Z&&Ne(Z,D),(Tt=tt.props&&tt.props.onVnodeUpdated)&&Ne(()=>js(Tt,rt,tt,ft),D)}else{let tt;const{el:Y,props:Z}=S,{bm:rt,m:ft,parent:kt}=E,Tt=Vd(S);if(rr(E,!1),rt&&cm(rt),!Tt&&(tt=Z&&Z.onVnodeBeforeMount)&&js(tt,kt,S),rr(E,!0),Y&&yt){const qt=()=>{E.subTree=hm(E),yt(Y,E.subTree,E,D,null)};Tt?S.type.__asyncLoader().then(()=>!E.isUnmounted&&qt()):qt()}else{const qt=E.subTree=hm(E);v(null,qt,x,L,E,D,O),S.el=qt.el}if(ft&&Ne(ft,D),!Tt&&(tt=Z&&Z.onVnodeMounted)){const qt=S;Ne(()=>js(tt,kt,qt),D)}(S.shapeFlag&256||kt&&Vd(kt.vnode)&&kt.vnode.shapeFlag&256)&&E.a&&Ne(E.a,D),E.isMounted=!0,S=x=L=null}},j=E.effect=new Pb(B,()=>Fb(F),E.scope),F=E.update=()=>j.run();F.id=E.uid,rr(E,!0),F()},V=(E,S,x)=>{S.component=E;const L=E.vnode.props;E.vnode=S,E.next=null,mT(E,S.props,L,x),vT(E,S.children,x),Kl(),Nv(),Gl()},G=(E,S,x,L,D,O,q,B,j=!1)=>{const F=E&&E.children,tt=E?E.shapeFlag:0,Y=S.children,{patchFlag:Z,shapeFlag:rt}=S;if(Z>0){if(Z&128){ne(F,Y,x,L,D,O,q,B,j);return}else if(Z&256){jt(F,Y,x,L,D,O,q,B,j);return}}rt&8?(tt&16&&Ct(F,D,O),Y!==F&&u(x,Y)):tt&16?rt&16?ne(F,Y,x,L,D,O,q,B,j):Ct(F,D,O,!0):(tt&8&&u(x,""),rt&16&&M(Y,x,L,D,O,q,B,j))},jt=(E,S,x,L,D,O,q,B,j)=>{E=E||ca,S=S||ca;const F=E.length,tt=S.length,Y=Math.min(F,tt);let Z;for(Z=0;Z<Y;Z++){const rt=S[Z]=j?gn(S[Z]):ai(S[Z]);v(E[Z],rt,x,null,D,O,q,B,j)}F>tt?Ct(E,D,O,!0,!1,Y):M(S,x,L,D,O,q,B,j,Y)},ne=(E,S,x,L,D,O,q,B,j)=>{let F=0;const tt=S.length;let Y=E.length-1,Z=tt-1;for(;F<=Y&&F<=Z;){const rt=E[F],ft=S[F]=j?gn(S[F]):ai(S[F]);if(Zl(rt,ft))v(rt,ft,x,null,D,O,q,B,j);else break;F++}for(;F<=Y&&F<=Z;){const rt=E[Y],ft=S[Z]=j?gn(S[Z]):ai(S[Z]);if(Zl(rt,ft))v(rt,ft,x,null,D,O,q,B,j);else break;Y--,Z--}if(F>Y){if(F<=Z){const rt=Z+1,ft=rt<tt?S[rt].el:L;for(;F<=Z;)v(null,S[F]=j?gn(S[F]):ai(S[F]),x,ft,D,O,q,B,j),F++}}else if(F>Z)for(;F<=Y;)gt(E[F],D,O,!0),F++;else{const rt=F,ft=F,kt=new Map;for(F=ft;F<=Z;F++){const Ue=S[F]=j?gn(S[F]):ai(S[F]);Ue.key!=null&&kt.set(Ue.key,F)}let Tt,qt=0;const bs=Z-ft+1;let Wo=!1,Cv=0;const Jl=new Array(bs);for(F=0;F<bs;F++)Jl[F]=0;for(F=rt;F<=Y;F++){const Ue=E[F];if(qt>=bs){gt(Ue,D,O,!0);continue}let Bs;if(Ue.key!=null)Bs=kt.get(Ue.key);else for(Tt=ft;Tt<=Z;Tt++)if(Jl[Tt-ft]===0&&Zl(Ue,S[Tt])){Bs=Tt;break}Bs===void 0?gt(Ue,D,O,!0):(Jl[Bs-ft]=F+1,Bs>=Cv?Cv=Bs:Wo=!0,v(Ue,S[Bs],x,null,D,O,q,B,j),qt++)}const Tv=Wo?wT(Jl):ca;for(Tt=Tv.length-1,F=bs-1;F>=0;F--){const Ue=ft+F,Bs=S[Ue],xv=Ue+1<tt?S[Ue+1].el:L;Jl[F]===0?v(null,Bs,x,xv,D,O,q,B,j):Wo&&(Tt<0||F!==Tv[Tt]?Xt(Bs,x,xv,2):Tt--)}}},Xt=(E,S,x,L,D=null)=>{const{el:O,type:q,transition:B,children:j,shapeFlag:F}=E;if(F&6){Xt(E.component.subTree,S,x,L);return}if(F&128){E.suspense.move(S,x,L);return}if(F&64){q.move(E,S,x,W);return}if(q===zt){s(O,S,x);for(let Y=0;Y<j.length;Y++)Xt(j[Y],S,x,L);s(E.anchor,S,x);return}if(q===Wd){T(E,S,x);return}if(L!==2&&F&1&&B)if(L===0)B.beforeEnter(O),s(O,S,x),Ne(()=>B.enter(O),D);else{const{leave:Y,delayLeave:Z,afterLeave:rt}=B,ft=()=>s(O,S,x),kt=()=>{Y(O,()=>{ft(),rt&&rt()})};Z?Z(O,ft,kt):kt()}else s(O,S,x)},gt=(E,S,x,L=!1,D=!1)=>{const{type:O,props:q,ref:B,children:j,dynamicChildren:F,shapeFlag:tt,patchFlag:Y,dirs:Z}=E;if(B!=null&&Gm(B,null,x,E,!0),tt&256){S.ctx.deactivate(E);return}const rt=tt&1&&Z,ft=!Vd(E);let kt;if(ft&&(kt=q&&q.onVnodeBeforeUnmount)&&js(kt,S,E),tt&6)Ut(E.component,x,L);else{if(tt&128){E.suspense.unmount(x,L);return}rt&&nr(E,null,S,"beforeUnmount"),tt&64?E.type.remove(E,S,x,D,W,L):F&&(O!==zt||Y>0&&Y&64)?Ct(F,S,x,!1,!0):(O===zt&&Y&384||!D&&tt&16)&&Ct(j,S,x),L&&Rt(E)}(ft&&(kt=q&&q.onVnodeUnmounted)||rt)&&Ne(()=>{kt&&js(kt,S,E),rt&&nr(E,null,S,"unmounted")},x)},Rt=E=>{const{type:S,el:x,anchor:L,transition:D}=E;if(S===zt){re(x,L);return}if(S===Wd){C(E);return}const O=()=>{n(x),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(E.shapeFlag&1&&D&&!D.persisted){const{leave:q,delayLeave:B}=D,j=()=>q(x,O);B?B(E.el,O,j):j()}else O()},re=(E,S)=>{let x;for(;E!==S;)x=f(E),n(E),E=x;n(S)},Ut=(E,S,x)=>{const{bum:L,scope:D,update:O,subTree:q,um:B}=E;L&&cm(L),D.stop(),O&&(O.active=!1,gt(q,E,S,x)),B&&Ne(B,S),Ne(()=>{E.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},Ct=(E,S,x,L=!1,D=!1,O=0)=>{for(let q=O;q<E.length;q++)gt(E[q],S,x,L,D)},P=E=>E.shapeFlag&6?P(E.component.subTree):E.shapeFlag&128?E.suspense.next():f(E.anchor||E.el),U=(E,S,x)=>{E==null?S._vnode&&gt(S._vnode,null,null,!0):v(S._vnode||null,E,S,null,null,null,x),Nv(),tE(),S._vnode=E},W={p:v,um:gt,m:Xt,r:Rt,mt:dt,mc:M,pc:G,pbc:K,n:P,o:i};let J,yt;return t&&([J,yt]=t(W)),{render:U,hydrate:J,createApp:fT(U,J)}}function rr({effect:i,update:t},e){i.allowRecurse=t.allowRecurse=e}function ET(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function _E(i,t,e=!1){const s=i.children,n=t.children;if(ot(s)&&ot(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=gn(n[r]),a.el=o.el),e||_E(o,a)),a.type===Fg&&(a.el=o.el)}}function wT(i){const t=i.slice(),e=[0];let s,n,r,o,a;const c=i.length;for(s=0;s<c;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<h?r=a+1:o=a;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}const ST=i=>i.__isTeleport,zt=Symbol.for("v-fgt"),Fg=Symbol.for("v-txt"),Lo=Symbol.for("v-cmt"),Wd=Symbol.for("v-stc"),Tc=[];let Os=null;function mt(i=!1){Tc.push(Os=i?null:[])}function CT(){Tc.pop(),Os=Tc[Tc.length-1]||null}let Hc=1;function Gv(i){Hc+=i}function bE(i){return i.dynamicChildren=Hc>0?Os||ca:null,CT(),Hc>0&&Os&&Os.push(i),i}function vt(i,t,e,s,n,r){return bE(H(i,t,e,s,n,r,!0))}function TT(i,t,e,s,n){return bE(Nt(i,t,e,s,n,!0))}function qm(i){return i?i.__v_isVNode===!0:!1}function Zl(i,t){return i.type===t.type&&i.key===t.key}const $g="__vInternal",vE=({key:i})=>i??null,zd=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?ie(i)||Kt(i)||ut(i)?{i:fs,r:i,k:t,f:!!e}:i:null);function H(i,t=null,e=null,s=0,n=null,r=i===zt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&vE(t),ref:t&&zd(t),scopeId:Og,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:fs};return a?(Bb(c,e),r&128&&i.normalize(c)):e&&(c.shapeFlag|=ie(e)?8:16),Hc>0&&!o&&Os&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Os.push(c),c}const Nt=xT;function xT(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===UC)&&(i=Lo),qm(i)){const a=Ml(i,t,!0);return e&&Bb(a,e),Hc>0&&!r&&Os&&(a.shapeFlag&6?Os[Os.indexOf(i)]=a:Os.push(a)),a.patchFlag|=-2,a}if(BT(i)&&(i=i.__vccOpts),t){t=RT(t);let{class:a,style:c}=t;a&&!ie(a)&&(t.class=kg(a)),Ht(c)&&(GA(c)&&!ot(c)&&(c=ve({},c)),t.style=Rb(c))}const o=ie(i)?1:zC(i)?128:ST(i)?64:Ht(i)?4:ut(i)?2:0;return H(i,t,e,s,n,o,r,!0)}function RT(i){return i?GA(i)||$g in i?ve({},i):i:null}function Ml(i,t,e=!1){const{props:s,ref:n,patchFlag:r,children:o}=i,a=t?LT(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:a,key:a&&vE(a),ref:t&&t.ref?e&&n?ot(n)?n.concat(zd(t)):[n,zd(t)]:zd(t):n,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==zt?r===-1?16:r|16:r,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ml(i.ssContent),ssFallback:i.ssFallback&&Ml(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function kT(i=" ",t=0){return Nt(Fg,null,i,t)}function PT(i,t){const e=Nt(Wd,null,i);return e.staticCount=t,e}function Dl(i="",t=!1){return t?(mt(),TT(Lo,null,i)):Nt(Lo,null,i)}function ai(i){return i==null||typeof i=="boolean"?Nt(Lo):ot(i)?Nt(zt,null,i.slice()):typeof i=="object"?gn(i):Nt(Fg,null,String(i))}function gn(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ml(i)}function Bb(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(ot(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Bb(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!($g in t)?t._ctx=fs:n===3&&fs&&(fs.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else ut(t)?(t={default:t,_ctx:fs},e=32):(t=String(t),s&64?(e=16,t=[kT(t)]):e=8);i.children=t,i.shapeFlag|=e}function LT(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=kg([t.class,s.class]));else if(n==="style")t.style=Rb([t.style,s.style]);else if(Sg(n)){const r=t[n],o=s[n];o&&r!==o&&!(ot(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function js(i,t,e,s=null){Fs(i,t,7,[e,s])}const IT=uE();let MT=0;function DT(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||IT,r={uid:MT++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new IA(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fE(s,n),emitsOptions:sE(s,n),emit:null,emitted:null,propsDefaults:$t,inheritAttrs:s.inheritAttrs,ctx:$t,data:$t,props:$t,attrs:$t,slots:$t,refs:$t,setupState:$t,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=FC.bind(null,r),i.ce&&i.ce(r),r}let de=null,jb,zo,qv="__VUE_INSTANCE_SETTERS__";(zo=$m()[qv])||(zo=$m()[qv]=[]),zo.push(i=>de=i),jb=i=>{zo.length>1?zo.forEach(t=>t(i)):zo[0](i)};const Ol=i=>{jb(i),i.scope.on()},Ro=()=>{de&&de.scope.off(),jb(null)};function yE(i){return i.vnode.shapeFlag&4}let Bc=!1;function OT(i,t=!1){Bc=t;const{props:e,children:s}=i.vnode,n=yE(i);gT(i,e,n,t),bT(i,s);const r=n?NT(i,t):void 0;return Bc=!1,r}function NT(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=Lg(new Proxy(i.ctx,oT));const{setup:s}=e;if(s){const n=i.setupContext=s.length>1?$T(i):null;Ol(i),Kl();const r=qn(s,i,0,[i.props,n]);if(Gl(),Ro(),xA(r)){if(r.then(Ro,Ro),t)return r.then(o=>{Yv(i,o,t)}).catch(o=>{Ig(o,i,0)});i.asyncDep=r}else Yv(i,r,t)}else AE(i,t)}function Yv(i,t,e){ut(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:Ht(t)&&(i.setupState=QA(t)),AE(i,e)}let Xv;function AE(i,t,e){const s=i.type;if(!i.render){if(!t&&Xv&&!s.render){const n=s.template||$b(i).template;if(n){const{isCustomElement:r,compilerOptions:o}=i.appContext.config,{delimiters:a,compilerOptions:c}=s,h=ve(ve({isCustomElement:r,delimiters:a},o),c);s.render=Xv(n,h)}}i.render=s.render||Ns}{Ol(i),Kl();try{aT(i)}finally{Gl(),Ro()}}}function FT(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(t,e){return Ve(i,"get","$attrs"),t[e]}}))}function $T(i){const t=e=>{i.exposed=e||{}};return{get attrs(){return FT(i)},slots:i.slots,emit:i.emit,expose:t}}function Vb(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(QA(Lg(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in Cc)return Cc[e](i)},has(t,e){return e in t||e in Cc}}))}function HT(i,t=!0){return ut(i)?i.displayName||i.name:i.name||t&&i.__name}function BT(i){return ut(i)&&"__vccOpts"in i}const ds=(i,t)=>LC(i,t,Bc);function EE(i,t,e){const s=arguments.length;return s===2?Ht(t)&&!ot(t)?qm(t)?Nt(i,null,[t]):Nt(i,t):Nt(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&qm(e)&&(e=[e]),Nt(i,t,e))}const jT=Symbol.for("v-scx"),VT=()=>ci(jT),UT="3.3.9",WT="http://www.w3.org/2000/svg",hr=typeof document<"u"?document:null,Qv=hr&&hr.createElement("template"),zT={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t?hr.createElementNS(WT,i):hr.createElement(i,e?{is:e}:void 0);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>hr.createTextNode(i),createComment:i=>hr.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>hr.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{Qv.innerHTML=s?`<svg>${i}</svg>`:i;const a=Qv.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},KT=Symbol("_vtc");function GT(i,t,e){const s=i[KT];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const qT=Symbol("_vod");function YT(i,t,e){const s=i.style,n=ie(e);if(e&&!n){if(t&&!ie(t))for(const r in t)e[r]==null&&Ym(s,r,"");for(const r in e)Ym(s,r,e[r])}else{const r=s.display;n?t!==e&&(s.cssText=e):t&&i.removeAttribute("style"),qT in i&&(s.display=r)}}const Jv=/\s*!important$/;function Ym(i,t,e){if(ot(e))e.forEach(s=>Ym(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=XT(i,t);Jv.test(e)?i.setProperty(zl(s),e.replace(Jv,""),"important"):i[s]=e}}const Zv=["Webkit","Moz","ms"],dm={};function XT(i,t){const e=dm[t];if(e)return e;let s=di(t);if(s!=="filter"&&s in i)return dm[t]=s;s=Rg(s);for(let n=0;n<Zv.length;n++){const r=Zv[n]+s;if(r in i)return dm[t]=r}return t}const ty="http://www.w3.org/1999/xlink";function QT(i,t,e,s,n){if(s&&t.startsWith("xlink:"))e==null?i.removeAttributeNS(ty,t.slice(6,t.length)):i.setAttributeNS(ty,t,e);else{const r=tC(t);e==null||r&&!PA(e)?i.removeAttribute(t):i.setAttribute(t,r?"":e)}}function JT(i,t,e,s,n,r,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,n,r),i[t]=e??"";return}const a=i.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){i._value=e;const h=a==="OPTION"?i.getAttribute("value"):i.value,u=e??"";h!==u&&(i.value=u),e==null&&i.removeAttribute(t);return}let c=!1;if(e===""||e==null){const h=typeof i[t];h==="boolean"?e=PA(e):e==null&&h==="string"?(e="",c=!0):h==="number"&&(e=0,c=!0)}try{i[t]=e}catch{}c&&i.removeAttribute(t)}function ZT(i,t,e,s){i.addEventListener(t,e,s)}function tx(i,t,e,s){i.removeEventListener(t,e,s)}const ey=Symbol("_vei");function ex(i,t,e,s,n=null){const r=i[ey]||(i[ey]={}),o=r[t];if(s&&o)o.value=s;else{const[a,c]=sx(t);if(s){const h=r[t]=rx(s,n);ZT(i,a,h,c)}else o&&(tx(i,a,o,c),r[t]=void 0)}}const sy=/(?:Once|Passive|Capture)$/;function sx(i){let t;if(sy.test(i)){t={};let s;for(;s=i.match(sy);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):zl(i.slice(2)),t]}let fm=0;const ix=Promise.resolve(),nx=()=>fm||(ix.then(()=>fm=0),fm=Date.now());function rx(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Fs(ox(s,e.value),t,5,[s])};return e.value=i,e.attached=nx(),e}function ox(i,t){if(ot(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const iy=/^on[a-z]/,ax=(i,t,e,s,n=!1,r,o,a,c)=>{t==="class"?GT(i,s,n):t==="style"?YT(i,e,s):Sg(t)?Cb(t)||ex(i,t,e,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lx(i,t,s,n))?JT(i,t,s,r,o,a,c):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),QT(i,t,s,n))};function lx(i,t,e,s){return s?!!(t==="innerHTML"||t==="textContent"||t in i&&iy.test(t)&&ut(e)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA"||iy.test(t)&&ie(e)?!1:t in i}const cx=ve({patchProp:ax},zT);let ny;function hx(){return ny||(ny=yT(cx))}const ux=(...i)=>{const t=hx().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=dx(s);if(!n)return;const r=t._component;!ut(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.innerHTML="";const o=e(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function dx(i){return ie(i)?document.querySelector(i):i}var fx=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let wE;const Hg=i=>wE=i,SE=Symbol();function Xm(i){return i&&typeof i=="object"&&Object.prototype.toString.call(i)==="[object Object]"&&typeof i.toJSON!="function"}var xc;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(xc||(xc={}));function px(){const i=MA(!0),t=i.run(()=>Ob({}));let e=[],s=[];const n=Lg({install(r){Hg(n),n._a=r,r.provide(SE,n),r.config.globalProperties.$pinia=n,s.forEach(o=>e.push(o)),s=[]},use(r){return!this._a&&!fx?s.push(r):e.push(r),this},_p:e,_a:null,_e:i,_s:new Map,state:t});return n}const CE=()=>{};function ry(i,t,e,s=CE){i.push(t);const n=()=>{const r=i.indexOf(t);r>-1&&(i.splice(r,1),s())};return!e&&DA()&&sC(n),n}function Ko(i,...t){i.slice().forEach(e=>{e(...t)})}const gx=i=>i();function Qm(i,t){i instanceof Map&&t instanceof Map&&t.forEach((e,s)=>i.set(s,e)),i instanceof Set&&t instanceof Set&&t.forEach(i.add,i);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],n=i[e];Xm(n)&&Xm(s)&&i.hasOwnProperty(e)&&!Kt(s)&&!Gn(s)?i[e]=Qm(n,s):i[e]=s}return i}const mx=Symbol();function _x(i){return!Xm(i)||!i.hasOwnProperty(mx)}const{assign:un}=Object;function bx(i){return!!(Kt(i)&&i.effect)}function vx(i,t,e,s){const{state:n,actions:r,getters:o}=t,a=e.state.value[i];let c;function h(){a||(e.state.value[i]=n?n():{});const u=xC(e.state.value[i]);return un(u,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=Lg(ds(()=>{Hg(e);const p=e._s.get(i);return o[f].call(p,p)})),d),{}))}return c=TE(i,h,t,e,s,!0),c}function TE(i,t,e={},s,n,r){let o;const a=un({actions:{}},e),c={deep:!0};let h,u,d=[],f=[],p;const m=s.state.value[i];!r&&!m&&(s.state.value[i]={}),Ob({});let v;function A(M){let $;h=u=!1,typeof M=="function"?(M(s.state.value[i]),$={type:xc.patchFunction,storeId:i,events:p}):(Qm(s.state.value[i],M),$={type:xc.patchObject,payload:M,storeId:i,events:p});const K=v=Symbol();Mg().then(()=>{v===K&&(h=!0)}),u=!0,Ko(d,$,s.state.value[i])}const y=r?function(){const{state:$}=e,K=$?$():{};this.$patch(z=>{un(z,K)})}:CE;function w(){o.stop(),d=[],f=[],s._s.delete(i)}function T(M,$){return function(){Hg(s);const K=Array.from(arguments),z=[],nt=[];function et(X){z.push(X)}function dt(X){nt.push(X)}Ko(f,{args:K,name:M,store:R,after:et,onError:dt});let lt;try{lt=$.apply(this&&this.$id===i?this:R,K)}catch(X){throw Ko(nt,X),X}return lt instanceof Promise?lt.then(X=>(Ko(z,X),X)).catch(X=>(Ko(nt,X),Promise.reject(X))):(Ko(z,lt),lt)}}const C={_p:s,$id:i,$onAction:ry.bind(null,f),$patch:A,$reset:y,$subscribe(M,$={}){const K=ry(d,M,$.detached,()=>z()),z=o.run(()=>Sc(()=>s.state.value[i],nt=>{($.flush==="sync"?u:h)&&M({storeId:i,type:xc.direct,events:p},nt)},un({},c,$)));return K},$dispose:w},R=fd(C);s._s.set(i,R);const I=(s._a&&s._a.runWithContext||gx)(()=>s._e.run(()=>(o=MA()).run(t)));for(const M in I){const $=I[M];if(Kt($)&&!bx($)||Gn($))r||(m&&_x($)&&(Kt($)?$.value=m[M]:Qm($,m[M])),s.state.value[i][M]=$);else if(typeof $=="function"){const K=T(M,$);I[M]=K,a.actions[M]=$}}return un(R,I),un(St(R),I),Object.defineProperty(R,"$state",{get:()=>s.state.value[i],set:M=>{A($=>{un($,M)})}}),s._p.forEach(M=>{un(R,o.run(()=>M({store:R,app:s._a,pinia:s,options:a})))}),m&&r&&e.hydrate&&e.hydrate(R.$state,m),h=!0,u=!0,R}function yx(i,t,e){let s,n;const r=typeof t=="function";typeof i=="string"?(s=i,n=r?e:t):(n=i,s=i.id);function o(a,c){const h=pT();return a=a||(h?ci(SE,null):null),a&&Hg(a),a=wE,a._s.has(s)||(r?TE(s,t,n,a):vx(s,n,a)),a._s.get(s)}return o.$id=s,o}function Ub(i,t){return Array.isArray(t)?t.reduce((e,s)=>(e[s]=function(){return i(this.$pinia)[s]},e),{}):Object.keys(t).reduce((e,s)=>(e[s]=function(){const n=i(this.$pinia),r=t[s];return typeof r=="function"?r.call(this,n):n[r]},e),{})}function xE(i,t){return Array.isArray(t)?t.reduce((e,s)=>(e[s]=function(...n){return i(this.$pinia)[s](...n)},e),{}):Object.keys(t).reduce((e,s)=>(e[s]=function(...n){return i(this.$pinia)[t[s]](...n)},e),{})}const oy=(i,t)=>{const e=i.storage||sessionStorage,s=i.key||t.$id;if(i.paths){const n=i.paths.reduce((r,o)=>(r[o]=t.$state[o],r),{});e.setItem(s,JSON.stringify(n))}else e.setItem(s,JSON.stringify(t.$state))};var Ax=({options:i,store:t})=>{var e,s,n,r;if((e=i.persist)!=null&&e.enabled){const o=[{key:t.$id,storage:sessionStorage}],a=(n=(s=i.persist)==null?void 0:s.strategies)!=null&&n.length?(r=i.persist)==null?void 0:r.strategies:o;a.forEach(c=>{const h=c.storage||sessionStorage,u=c.key||t.$id,d=h.getItem(u);d&&(t.$patch(JSON.parse(d)),oy(c,t))}),t.$subscribe(()=>{a.forEach(c=>{oy(c,t)})})}};/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Yo=typeof window<"u";function Ex(i){return i.__esModule||i[Symbol.toStringTag]==="Module"}const Lt=Object.assign;function pm(i,t){const e={};for(const s in t){const n=t[s];e[s]=$s(n)?n.map(i):i(n)}return e}const Rc=()=>{},$s=Array.isArray,wx=/\/$/,Sx=i=>i.replace(wx,"");function gm(i,t,e="/"){let s,n={},r="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),n=i(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=Rx(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:o}}function Cx(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function ay(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function Tx(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&Nl(t.matched[s],e.matched[n])&&RE(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function Nl(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function RE(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!xx(i[e],t[e]))return!1;return!0}function xx(i,t){return $s(i)?ly(i,t):$s(t)?ly(t,i):i===t}function ly(i,t){return $s(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function Rx(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var jc;(function(i){i.pop="pop",i.push="push"})(jc||(jc={}));var kc;(function(i){i.back="back",i.forward="forward",i.unknown=""})(kc||(kc={}));function kx(i){if(!i)if(Yo){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),Sx(i)}const Px=/^[^#]+#/;function Lx(i,t){return i.replace(Px,"#")+t}function Ix(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const Bg=()=>({left:window.pageXOffset,top:window.pageYOffset});function Mx(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=Ix(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function cy(i,t){return(history.state?history.state.position-t:-1)+i}const Jm=new Map;function Dx(i,t){Jm.set(i,t)}function Ox(i){const t=Jm.get(i);return Jm.delete(i),t}let Nx=()=>location.protocol+"//"+location.host;function kE(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let a=n.includes(i.slice(r))?i.slice(r).length:1,c=n.slice(a);return c[0]!=="/"&&(c="/"+c),ay(c,"")}return ay(e,i)+s+n}function Fx(i,t,e,s){let n=[],r=[],o=null;const a=({state:f})=>{const p=kE(i,location),m=e.value,v=t.value;let A=0;if(f){if(e.value=p,t.value=f,o&&o===m){o=null;return}A=v?f.position-v.position:0}else s(p);n.forEach(y=>{y(e.value,m,{delta:A,type:jc.pop,direction:A?A>0?kc.forward:kc.back:kc.unknown})})};function c(){o=e.value}function h(f){n.push(f);const p=()=>{const m=n.indexOf(f);m>-1&&n.splice(m,1)};return r.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(Lt({},f.state,{scroll:Bg()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:d}}function hy(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?Bg():null}}function $x(i){const{history:t,location:e}=window,s={value:kE(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,u){const d=i.indexOf("#"),f=d>-1?(e.host&&document.querySelector("base")?i:i.slice(d))+c:Nx()+i+c;try{t[u?"replaceState":"pushState"](h,"",f),n.value=h}catch(p){console.error(p),e[u?"replace":"assign"](f)}}function o(c,h){const u=Lt({},t.state,hy(n.value.back,c,n.value.forward,!0),h,{position:n.value.position});r(c,u,!0),s.value=c}function a(c,h){const u=Lt({},n.value,t.state,{forward:c,scroll:Bg()});r(u.current,u,!0);const d=Lt({},hy(s.value,c,null),{position:u.position+1},h);r(c,d,!1),s.value=c}return{location:s,state:n,push:a,replace:o}}function Hx(i){i=kx(i);const t=$x(i),e=Fx(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=Lt({location:"",base:i,go:s,createHref:Lx.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Bx(i){return typeof i=="string"||i&&typeof i=="object"}function PE(i){return typeof i=="string"||typeof i=="symbol"}const cn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},LE=Symbol("");var uy;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(uy||(uy={}));function Fl(i,t){return Lt(new Error,{type:i,[LE]:!0},t)}function gi(i,t){return i instanceof Error&&LE in i&&(t==null||!!(i.type&t))}const dy="[^/]+?",jx={sensitive:!1,strict:!1,start:!0,end:!0},Vx=/[.+*?^${}()[\]/\\]/g;function Ux(i,t){const e=Lt({},jx,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const u=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let d=0;d<h.length;d++){const f=h[d];let p=40+(e.sensitive?.25:0);if(f.type===0)d||(n+="/"),n+=f.value.replace(Vx,"\\$&"),p+=40;else if(f.type===1){const{value:m,repeatable:v,optional:A,regexp:y}=f;r.push({name:m,repeatable:v,optional:A});const w=y||dy;if(w!==dy){p+=10;try{new RegExp(`(${w})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${m}" (${w}): `+C.message)}}let T=v?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;d||(T=A&&h.length<2?`(?:/${T})`:"/"+T),A&&(T+="?"),n+=T,p+=20,A&&(p+=-8),v&&(p+=-20),w===".*"&&(p+=-50)}u.push(p)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(h){const u=h.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",m=r[f-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function c(h){let u="",d=!1;for(const f of i){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:v,optional:A}=p,y=m in h?h[m]:"";if($s(y)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const w=$s(y)?y.join("/"):y;if(!w)if(A)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=w}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function Wx(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===40+40?-1:1:i.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function zx(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=Wx(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(fy(s))return 1;if(fy(n))return-1}return n.length-s.length}function fy(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const Kx={type:0,value:""},Gx=/[a-zA-Z0-9_]/;function qx(i){if(!i)return[[]];if(i==="/")return[[Kx]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(p){throw new Error(`ERR (${e})/"${h}": ${p}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let a=0,c,h="",u="";function d(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function f(){h+=c}for(;a<i.length;){if(c=i[a++],c==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:c==="/"?(h&&d(),o()):c===":"?(d(),e=1):f();break;case 4:f(),e=s;break;case 1:c==="("?e=2:Gx.test(c)?f():(d(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:e=3:u+=c;break;case 3:d(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),d(),o(),n}function Yx(i,t,e){const s=Ux(qx(i.path),e),n=Lt(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function Xx(i,t){const e=[],s=new Map;t=my({strict:!1,end:!0,sensitive:!1},t);function n(u){return s.get(u)}function r(u,d,f){const p=!f,m=Qx(u);m.aliasOf=f&&f.record;const v=my(t,u),A=[m];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const C of T)A.push(Lt({},m,{components:f?f.record.components:m.components,path:C,aliasOf:f?f.record:m}))}let y,w;for(const T of A){const{path:C}=T;if(d&&C[0]!=="/"){const R=d.record.path,k=R[R.length-1]==="/"?"":"/";T.path=d.record.path+(C&&k+C)}if(y=Yx(T,d,v),f?f.alias.push(y):(w=w||y,w!==y&&w.alias.push(y),p&&u.name&&!gy(y)&&o(u.name)),m.children){const R=m.children;for(let k=0;k<R.length;k++)r(R[k],y,f&&f.children[k])}f=f||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&c(y)}return w?()=>{o(w)}:Rc}function o(u){if(PE(u)){const d=s.get(u);d&&(s.delete(u),e.splice(e.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=e.indexOf(u);d>-1&&(e.splice(d,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return e}function c(u){let d=0;for(;d<e.length&&zx(u,e[d])>=0&&(u.record.path!==e[d].record.path||!IE(u,e[d]));)d++;e.splice(d,0,u),u.record.name&&!gy(u)&&s.set(u.record.name,u)}function h(u,d){let f,p={},m,v;if("name"in u&&u.name){if(f=s.get(u.name),!f)throw Fl(1,{location:u});v=f.record.name,p=Lt(py(d.params,f.keys.filter(w=>!w.optional).map(w=>w.name)),u.params&&py(u.params,f.keys.map(w=>w.name))),m=f.stringify(p)}else if("path"in u)m=u.path,f=e.find(w=>w.re.test(m)),f&&(p=f.parse(m),v=f.record.name);else{if(f=d.name?s.get(d.name):e.find(w=>w.re.test(d.path)),!f)throw Fl(1,{location:u,currentLocation:d});v=f.record.name,p=Lt({},d.params,u.params),m=f.stringify(p)}const A=[];let y=f;for(;y;)A.unshift(y.record),y=y.parent;return{name:v,path:m,params:p,matched:A,meta:Zx(A)}}return i.forEach(u=>r(u)),{addRoute:r,resolve:h,removeRoute:o,getRoutes:a,getRecordMatcher:n}}function py(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function Qx(i){return{path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:void 0,beforeEnter:i.beforeEnter,props:Jx(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}}}function Jx(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function gy(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function Zx(i){return i.reduce((t,e)=>Lt(t,e.meta),{})}function my(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function IE(i,t){return t.children.some(e=>e===i||IE(i,e))}const ME=/#/g,tR=/&/g,eR=/\//g,sR=/=/g,iR=/\?/g,DE=/\+/g,nR=/%5B/g,rR=/%5D/g,OE=/%5E/g,oR=/%60/g,NE=/%7B/g,aR=/%7C/g,FE=/%7D/g,lR=/%20/g;function Wb(i){return encodeURI(""+i).replace(aR,"|").replace(nR,"[").replace(rR,"]")}function cR(i){return Wb(i).replace(NE,"{").replace(FE,"}").replace(OE,"^")}function Zm(i){return Wb(i).replace(DE,"%2B").replace(lR,"+").replace(ME,"%23").replace(tR,"%26").replace(oR,"`").replace(NE,"{").replace(FE,"}").replace(OE,"^")}function hR(i){return Zm(i).replace(sR,"%3D")}function uR(i){return Wb(i).replace(ME,"%23").replace(iR,"%3F")}function dR(i){return i==null?"":uR(i).replace(eR,"%2F")}function xf(i){try{return decodeURIComponent(""+i)}catch{}return""+i}function fR(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(DE," "),o=r.indexOf("="),a=xf(o<0?r:r.slice(0,o)),c=o<0?null:xf(r.slice(o+1));if(a in t){let h=t[a];$s(h)||(h=t[a]=[h]),h.push(c)}else t[a]=c}return t}function _y(i){let t="";for(let e in i){const s=i[e];if(e=hR(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}($s(s)?s.map(r=>r&&Zm(r)):[s&&Zm(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function pR(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=$s(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const gR=Symbol(""),by=Symbol(""),zb=Symbol(""),$E=Symbol(""),t_=Symbol("");function tc(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function mn(i,t,e,s,n){const r=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((o,a)=>{const c=d=>{d===!1?a(Fl(4,{from:e,to:t})):d instanceof Error?a(d):Bx(d)?a(Fl(2,{from:t,to:d})):(r&&s.enterCallbacks[n]===r&&typeof d=="function"&&r.push(d),o())},h=i.call(s&&s.instances[n],t,e,c);let u=Promise.resolve(h);i.length<3&&(u=u.then(c)),u.catch(d=>a(d))})}function mm(i,t,e,s){const n=[];for(const r of i)for(const o in r.components){let a=r.components[o];if(!(t!=="beforeRouteEnter"&&!r.instances[o]))if(mR(a)){const h=(a.__vccOpts||a)[t];h&&n.push(mn(h,e,s,r,o))}else{let c=a();n.push(()=>c.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=Ex(h)?h.default:h;r.components[o]=u;const f=(u.__vccOpts||u)[t];return f&&mn(f,e,s,r,o)()}))}}return n}function mR(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function vy(i){const t=ci(zb),e=ci($E),s=ds(()=>t.resolve(ua(i.to))),n=ds(()=>{const{matched:c}=s.value,{length:h}=c,u=c[h-1],d=e.matched;if(!u||!d.length)return-1;const f=d.findIndex(Nl.bind(null,u));if(f>-1)return f;const p=yy(c[h-2]);return h>1&&yy(u)===p&&d[d.length-1].path!==p?d.findIndex(Nl.bind(null,c[h-2])):f}),r=ds(()=>n.value>-1&&yR(e.params,s.value.params)),o=ds(()=>n.value>-1&&n.value===e.matched.length-1&&RE(e.params,s.value.params));function a(c={}){return vR(c)?t[ua(i.replace)?"replace":"push"](ua(i.to)).catch(Rc):Promise.resolve()}return{route:s,href:ds(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const _R=oE({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:vy,setup(i,{slots:t}){const e=fd(vy(i)),{options:s}=ci(zb),n=ds(()=>({[Ay(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[Ay(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&t.default(e);return i.custom?r:EE("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),bR=_R;function vR(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function yR(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!$s(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function yy(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const Ay=(i,t,e)=>i??t??e,AR=oE({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=ci(t_),n=ds(()=>i.route||s.value),r=ci(by,0),o=ds(()=>{let h=ua(r);const{matched:u}=n.value;let d;for(;(d=u[h])&&!d.components;)h++;return h}),a=ds(()=>n.value.matched[o.value]);Ud(by,ds(()=>o.value+1)),Ud(gR,a),Ud(t_,n);const c=Ob();return Sc(()=>[c.value,a.value,i.name],([h,u,d],[f,p,m])=>{u&&(u.instances[d]=h,p&&p!==u&&h&&h===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),h&&u&&(!p||!Nl(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(v=>v(h))},{flush:"post"}),()=>{const h=n.value,u=i.name,d=a.value,f=d&&d.components[u];if(!f)return Ey(e.default,{Component:f,route:h});const p=d.props[u],m=p?p===!0?h.params:typeof p=="function"?p(h):p:null,A=EE(f,Lt({},m,t,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(d.instances[u]=null)},ref:c}));return Ey(e.default,{Component:A,route:h})||A}}});function Ey(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const HE=AR;function ER(i){const t=Xx(i.routes,i),e=i.parseQuery||fR,s=i.stringifyQuery||_y,n=i.history,r=tc(),o=tc(),a=tc(),c=SC(cn);let h=cn;Yo&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=pm.bind(null,P=>""+P),d=pm.bind(null,dR),f=pm.bind(null,xf);function p(P,U){let W,J;return PE(P)?(W=t.getRecordMatcher(P),J=U):J=P,t.addRoute(J,W)}function m(P){const U=t.getRecordMatcher(P);U&&t.removeRoute(U)}function v(){return t.getRoutes().map(P=>P.record)}function A(P){return!!t.getRecordMatcher(P)}function y(P,U){if(U=Lt({},U||c.value),typeof P=="string"){const x=gm(e,P,U.path),L=t.resolve({path:x.path},U),D=n.createHref(x.fullPath);return Lt(x,L,{params:f(L.params),hash:xf(x.hash),redirectedFrom:void 0,href:D})}let W;if("path"in P)W=Lt({},P,{path:gm(e,P.path,U.path).path});else{const x=Lt({},P.params);for(const L in x)x[L]==null&&delete x[L];W=Lt({},P,{params:d(x)}),U.params=d(U.params)}const J=t.resolve(W,U),yt=P.hash||"";J.params=u(f(J.params));const E=Cx(s,Lt({},P,{hash:cR(yt),path:J.path})),S=n.createHref(E);return Lt({fullPath:E,hash:yt,query:s===_y?pR(P.query):P.query||{}},J,{redirectedFrom:void 0,href:S})}function w(P){return typeof P=="string"?gm(e,P,c.value.path):Lt({},P)}function T(P,U){if(h!==P)return Fl(8,{from:U,to:P})}function C(P){return I(P)}function R(P){return C(Lt(w(P),{replace:!0}))}function k(P){const U=P.matched[P.matched.length-1];if(U&&U.redirect){const{redirect:W}=U;let J=typeof W=="function"?W(P):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=w(J):{path:J},J.params={}),Lt({query:P.query,hash:P.hash,params:"path"in J?{}:P.params},J)}}function I(P,U){const W=h=y(P),J=c.value,yt=P.state,E=P.force,S=P.replace===!0,x=k(W);if(x)return I(Lt(w(x),{state:typeof x=="object"?Lt({},yt,x.state):yt,force:E,replace:S}),U||W);const L=W;L.redirectedFrom=U;let D;return!E&&Tx(s,J,W)&&(D=Fl(16,{to:L,from:J}),Xt(J,J,!0,!1)),(D?Promise.resolve(D):K(L,J)).catch(O=>gi(O)?gi(O,2)?O:ne(O):G(O,L,J)).then(O=>{if(O){if(gi(O,2))return I(Lt({replace:S},w(O.to),{state:typeof O.to=="object"?Lt({},yt,O.to.state):yt,force:E}),U||L)}else O=nt(L,J,!0,S,yt);return z(L,J,O),O})}function M(P,U){const W=T(P,U);return W?Promise.reject(W):Promise.resolve()}function $(P){const U=re.values().next().value;return U&&typeof U.runWithContext=="function"?U.runWithContext(P):P()}function K(P,U){let W;const[J,yt,E]=wR(P,U);W=mm(J.reverse(),"beforeRouteLeave",P,U);for(const x of J)x.leaveGuards.forEach(L=>{W.push(mn(L,P,U))});const S=M.bind(null,P,U);return W.push(S),Ct(W).then(()=>{W=[];for(const x of r.list())W.push(mn(x,P,U));return W.push(S),Ct(W)}).then(()=>{W=mm(yt,"beforeRouteUpdate",P,U);for(const x of yt)x.updateGuards.forEach(L=>{W.push(mn(L,P,U))});return W.push(S),Ct(W)}).then(()=>{W=[];for(const x of E)if(x.beforeEnter)if($s(x.beforeEnter))for(const L of x.beforeEnter)W.push(mn(L,P,U));else W.push(mn(x.beforeEnter,P,U));return W.push(S),Ct(W)}).then(()=>(P.matched.forEach(x=>x.enterCallbacks={}),W=mm(E,"beforeRouteEnter",P,U),W.push(S),Ct(W))).then(()=>{W=[];for(const x of o.list())W.push(mn(x,P,U));return W.push(S),Ct(W)}).catch(x=>gi(x,8)?x:Promise.reject(x))}function z(P,U,W){a.list().forEach(J=>$(()=>J(P,U,W)))}function nt(P,U,W,J,yt){const E=T(P,U);if(E)return E;const S=U===cn,x=Yo?history.state:{};W&&(J||S?n.replace(P.fullPath,Lt({scroll:S&&x&&x.scroll},yt)):n.push(P.fullPath,yt)),c.value=P,Xt(P,U,W,S),ne()}let et;function dt(){et||(et=n.listen((P,U,W)=>{if(!Ut.listening)return;const J=y(P),yt=k(J);if(yt){I(Lt(yt,{replace:!0}),J).catch(Rc);return}h=J;const E=c.value;Yo&&Dx(cy(E.fullPath,W.delta),Bg()),K(J,E).catch(S=>gi(S,12)?S:gi(S,2)?(I(S.to,J).then(x=>{gi(x,20)&&!W.delta&&W.type===jc.pop&&n.go(-1,!1)}).catch(Rc),Promise.reject()):(W.delta&&n.go(-W.delta,!1),G(S,J,E))).then(S=>{S=S||nt(J,E,!1),S&&(W.delta&&!gi(S,8)?n.go(-W.delta,!1):W.type===jc.pop&&gi(S,20)&&n.go(-1,!1)),z(J,E,S)}).catch(Rc)}))}let lt=tc(),X=tc(),V;function G(P,U,W){ne(P);const J=X.list();return J.length?J.forEach(yt=>yt(P,U,W)):console.error(P),Promise.reject(P)}function jt(){return V&&c.value!==cn?Promise.resolve():new Promise((P,U)=>{lt.add([P,U])})}function ne(P){return V||(V=!P,dt(),lt.list().forEach(([U,W])=>P?W(P):U()),lt.reset()),P}function Xt(P,U,W,J){const{scrollBehavior:yt}=i;if(!Yo||!yt)return Promise.resolve();const E=!W&&Ox(cy(P.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return Mg().then(()=>yt(P,U,E)).then(S=>S&&Mx(S)).catch(S=>G(S,P,U))}const gt=P=>n.go(P);let Rt;const re=new Set,Ut={currentRoute:c,listening:!0,addRoute:p,removeRoute:m,hasRoute:A,getRoutes:v,resolve:y,options:i,push:C,replace:R,go:gt,back:()=>gt(-1),forward:()=>gt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:X.add,isReady:jt,install(P){const U=this;P.component("RouterLink",bR),P.component("RouterView",HE),P.config.globalProperties.$router=U,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>ua(c)}),Yo&&!Rt&&c.value===cn&&(Rt=!0,C(n.location).catch(yt=>{}));const W={};for(const yt in cn)Object.defineProperty(W,yt,{get:()=>c.value[yt],enumerable:!0});P.provide(zb,U),P.provide($E,zA(W)),P.provide(t_,c);const J=P.unmount;re.add(P),P.unmount=function(){re.delete(P),re.size<1&&(h=cn,et&&et(),et=null,c.value=cn,Rt=!1,V=!1),J()}}};function Ct(P){return P.reduce((U,W)=>U.then(()=>$(W)),Promise.resolve())}return Ut}function wR(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(i.matched.find(h=>Nl(h,a))?s.push(a):e.push(a));const c=i.matched[o];c&&(t.matched.find(h=>Nl(h,c))||n.push(c))}return[e,s,n]}const Vc=yx("commonStore",{state:()=>({loading:!1}),actions:{setLoading(i){this.loading=i}},persist:{enabled:!0}});const ye=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},SR={components:{RouterView:HE},watch:{$route(i){const t=i.meta.title||"Family Showcase";document.title=t}},computed:{...Ub(Vc,["loading"])}},CR={id:"app"},TR={key:0,class:"loader-container"},xR=H("div",{class:"spinner-border text-secondary"},[H("span",{class:"visually-hidden"},"Loading...")],-1),RR=[xR];function kR(i,t,e,s,n,r){const o=is("RouterView");return mt(),vt("div",CR,[i.loading?(mt(),vt("div",TR,RR)):Dl("",!0),Nt(o)])}const PR=ye(SR,[["render",kR]]),LR="/",wi={familyShowcaseHomepage:"/family-showcase",bookHomepage:"/family-showcase/book-homepage",bookDetail:"/family-showcase/book-detail/:id",gameHomepage:"/family-showcase/game-homepage",gameDetail:"/family-showcase/game-detail",parodyVideoHomepage:"/family-showcase/parody-video-homepage",parodyVideoDetail:"/family-showcase/parody-video-detail",rokhTempleHomepage:"/rokh-temple",youtubeWatcher:"/rokh-temple/youtube-watcher",rokhMusicPlaylist:"/rokh-temple/rokhMusicPlaylist",musicChoiceMaker:"/rokh-temple/musicChoiceMaker",movieChoiceMaker:"/rokh-temple/movieChoiceMaker",videoGameChoiceMaker:"/rokh-temple/videoGameChoiceMaker",rokhRolDocumentation:"/rokh-temple/rokhRolDocumentation",rokhWosDocumentation:"/rokh-temple/rokhWosDocumentation",nothing:"/nothing"};class Kb{constructor(){this.books=[]}async fetchBooks(){try{const t=await fetch("/assets/books/books-data.json");this.books=await t.json()}catch(t){console.error("Error fetching books:",t)}}getBooks(){return this.books}getBookById(t){return this.books.find(e=>e.id===t)}getBooksBySaga(t){return this.books.filter(e=>e.saga===t)}getBooksByGenre(t){return this.books.filter(e=>e.main_genre===t)}getPDF(t){if(t.pdf)return`/assets/books/${t.id}/${t.pdf}`}getFirstMainImage(t){return this.getMainImages(t)[0]}getMainImages(t){if(t.main_images)return t.main_images.map(e=>`/assets/books/${t.id}/main_images/images/${e}`)}getMainThumbnails(t){if(t.main_images)return t.main_images.map(e=>`/assets/books/${t.id}/main_images/thumbnails/${e}`)}getSecondaryImages(t){if(t.secondary_images)return t.secondary_images.map(e=>`/assets/books/${t.id}/secondary_images/images/${e}`)}getSecondaryThumbnails(t){if(t.secondary_images)return t.secondary_images.map(e=>`/assets/books/${t.id}/secondary_images/thumbnails/${e}`)}}const IR="/assets/books/rokh_logo_grey_fire.png";const MR={props:{text:String},methods:{goToBookHomepage(){this.$router.push({name:"bookHomepage"})}}},DR=i=>(Fo("data-v-fb9ecc86"),i=i(),$o(),i),OR={class:"custom-header"},NR=DR(()=>H("div",{class:"header-text"},[H("h2",null,"Bienvenue sur le site référençant les oeuvres littéraires de"),H("h3",null,"Mr A, Miss B and Mr C !"),H("h4",null,"Notre petite famille est créative et compte des écrivains, des musiciens, des vidéastes, et encore ce n'est pas tout !")],-1));function FR(i,t,e,s,n,r){return mt(),vt("div",null,[H("header",OR,[H("img",{src:IR,alt:"Website Logo",class:"header-logo d-none d-xxl-block",onClick:t[0]||(t[0]=o=>r.goToBookHomepage())}),NR])])}const BE=ye(MR,[["render",FR],["__scopeId","data-v-fb9ecc86"]]);const $R={props:{text:String}},HR=i=>(Fo("data-v-0a4300ec"),i=i(),$o(),i),BR={class:"homepage-description mt-3"},jR=HR(()=>H("p",null," Sur ce site vous retrouverez les différentes oeuvres littéraires de notre petite famille. Dans la liste de livre ci-dessous il vous suffit de cliquer sur l’un d’entre eux pour afficher sa page de détail. Vous y retrouverez le résumé ou bien le premier chapitre, la première de couverture, des liens vers les sites marchands dans le cas où l’oeuvre à été publié chez un éditeur, ainsi que d’éventuel images et commentaires du/des auteur(s) pour accompagner la description d’un livre. ",-1)),VR=[jR];function UR(i,t,e,s,n,r){return mt(),vt("div",BR,VR)}const WR=ye($R,[["render",UR],["__scopeId","data-v-0a4300ec"]]);const zR={props:{groupedBooks:[]},data(){return{bookUtils:new Kb}},methods:{goToBookDetail(i){this.$router.push({name:"bookDetail",params:{id:i}})}}},KR={class:"mt-4"},GR={class:"row g-3"},qR=["onClick"],YR=["src"],XR={class:"card-body d-flex flex-column"},QR={class:"card-title"},JR={class:"card-text"},ZR={class:"mt-auto"},tk={class:"card-text"},ek={class:"text-muted"},sk={class:"genres-container"};function ik(i,t,e,s,n,r){return mt(),vt("div",KR,[H("div",GR,[(mt(!0),vt(zt,null,xo(e.groupedBooks,o=>(mt(),vt(zt,{key:o[0].saga},[(mt(!0),vt(zt,null,xo(o,a=>(mt(),vt("div",{key:a.id,class:"col-12 col-md-6 col-lg-4 col-xl-3 col-xxl-2 mb-4"},[H("div",{class:"card h-100 clickable-card",onClick:c=>r.goToBookDetail(a.id)},[H("img",{src:n.bookUtils.getFirstMainImage(a),class:"card-img-top img-bordered",alt:"Book Cover"},null,8,YR),H("div",XR,[H("h5",QR,Ji(a.title),1),H("p",JR,Ji(a.author),1),H("div",ZR,[H("p",tk,[H("small",ek,"Saga : "+Ji(a.saga),1)]),H("div",sk,[(mt(!0),vt(zt,null,xo(a.genres.slice(0,4),c=>(mt(),vt("span",{key:c,class:"badge rounded-pill bg-secondary me-2 mb-2"},Ji(c),1))),128))])])])],8,qR)]))),128))],64))),128))])])}const nk=ye(zR,[["render",ik],["__scopeId","data-v-3ad6954a"]]);const rk={props:{text:String}},ok=i=>(Fo("data-v-c08287f7"),i=i(),$o(),i),ak=ok(()=>H("footer",{class:"custom-footer"},[H("div",{class:"footer-text"},[H("p",null,"Auteur du site : Alexandre Mailliu")])],-1)),lk=[ak];function ck(i,t,e,s,n,r){return mt(),vt("div",null,lk)}const jE=ye(rk,[["render",ck],["__scopeId","data-v-c08287f7"]]);const hk={components:{BookHeader:BE,BookHomepageDescription:WR,BookCards:nk,BookFooter:jE},data(){return{routes:wi,bookUtils:new Kb,books:[]}},async created(){await this.bookUtils.fetchBooks(),this.books=this.bookUtils.getBooks()},mounted(){this.setLoading(!0),setTimeout(()=>{this.setLoading(!1)},200)},computed:{...Ub(Vc,["loading"])},methods:{...xE(Vc,["setLoading"]),groupAndSortBooksBySaga(i){var n;i.sort((r,o)=>!r.saga&&o.saga?1:r.saga&&!o.saga?-1:r.saga&&o.saga?r.saga.localeCompare(o.saga):0);const t=[];let e=[],s=(n=i[0])==null?void 0:n.saga;return i.forEach(r=>{r.saga===s?e.push(r):(t.push(e),e=[r],s=r.saga)}),e.length>0&&t.push(e),t}}},uk={key:0},dk={id:"app-main-div"};function fk(i,t,e,s,n,r){const o=is("BookHeader"),a=is("BookHomepageDescription"),c=is("BookCards"),h=is("BookFooter");return i.loading?Dl("",!0):(mt(),vt("div",uk,[Nt(o),H("div",dk,[Nt(a),Nt(c,{"grouped-books":r.groupAndSortBooksBySaga(n.books)},null,8,["grouped-books"])]),Nt(h)]))}const pk=ye(hk,[["render",fk],["__scopeId","data-v-4e4bb7ba"]]);const gk={props:{title:String,author:String}},mk={class:"book-detail-header"};function _k(i,t,e,s,n,r){return mt(),vt("div",null,[H("div",mk,[H("h4",null,Ji(e.title+" ("+e.author+")"),1)])])}const bk=ye(gk,[["render",_k],["__scopeId","data-v-3abd5ae5"]]),vk="modulepreload",yk=function(i){return"/"+i},wy={},lc=function(t,e,s){if(!e||e.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(e.map(r=>{if(r=yk(r),r in wy)return;wy[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let u=n.length-1;u>=0;u--){const d=n[u];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const h=document.createElement("link");if(h.rel=o?"stylesheet":vk,o||(h.as="script",h.crossOrigin=""),h.href=r,document.head.appendChild(h),o)return new Promise((u,d)=>{h.addEventListener("load",u),h.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};var Pc={};Pc.d=(i,t)=>{for(var e in t)Pc.o(t,e)&&!Pc.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Pc.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var ct=globalThis.pdfjsLib={};Pc.d(ct,{AbortException:()=>Bo,AnnotationEditorLayer:()=>hb,AnnotationEditorParamsType:()=>at,AnnotationEditorType:()=>bt,AnnotationEditorUIManager:()=>Mo,AnnotationLayer:()=>mL,AnnotationMode:()=>_n,CMapCompressionType:()=>s_,ColorPicker:()=>Mf,DOMSVGFactory:()=>Yb,DrawLayer:()=>pb,FeatureTest:()=>Be,GlobalWorkerOptions:()=>tn,ImageKind:()=>Kd,InvalidPDFException:()=>UE,MissingPDFException:()=>Ho,OPS:()=>ys,PDFDataRangeTransport:()=>Fw,PDFDateString:()=>YE,PDFWorker:()=>pa,PasswordResponses:()=>Sk,PermissionFlag:()=>wk,PixelsPerInch:()=>Xn,RenderingCancelledException:()=>Xb,TextLayer:()=>Uc,UnexpectedResponseException:()=>Wg,Util:()=>Q,VerbosityLevel:()=>jg,XfaLayer:()=>Hw,build:()=>XP,createValidAbsoluteUrl:()=>Rk,fetchData:()=>Yg,getDocument:()=>jP,getFilenameFromUrl:()=>$k,getPdfFilenameFromUrl:()=>Hk,getXfaPageViewport:()=>Bk,isDataScheme:()=>Xg,isPdfFile:()=>Qb,noContextMenu:()=>je,normalizeUnicode:()=>Dk,setLayerDimensions:()=>Io,shadow:()=>At,version:()=>YP});const Re=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),VE=[1,0,0,1,0,0],e_=[.001,0,0,.001,0,0],Ak=1e7,_m=1.35,ss={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},_n={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ek="pdfjs_internal_editor_",bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},at={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},wk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ae={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Kd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ec={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},jg={ERRORS:0,WARNINGS:1,INFOS:5},s_={NONE:0,BINARY:1},ys={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Sk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Vg=jg.WARNINGS;function Ck(i){Number.isInteger(i)&&(Vg=i)}function Tk(){return Vg}function Ug(i){Vg>=jg.INFOS&&console.log(`Info: ${i}`)}function pt(i){Vg>=jg.WARNINGS&&console.log(`Warning: ${i}`)}function Mt(i){throw new Error(i)}function se(i,t){i||Mt(t)}function xk(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Rk(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=Mk(i)}catch{}}const s=t?new URL(i,t):new URL(i);if(xk(s))return s}catch{}return null}function At(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const tr=function(){function t(e,s){this.constructor===t&&Mt("Cannot initialize BaseException."),this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class i_ extends tr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class n_ extends tr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class UE extends tr{constructor(t){super(t,"InvalidPDFException")}}class Ho extends tr{constructor(t){super(t,"MissingPDFException")}}class Wg extends tr{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class kk extends tr{constructor(t){super(t,"FormatError")}}class Bo extends tr{constructor(t){super(t,"AbortException")}}function WE(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Mt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function zg(i){typeof i!="string"&&Mt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function Pk(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Gb(i){const t=Object.create(null);for(const[e,s]of i)t[e]=s;return t}function Lk(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function Ik(){try{return new Function(""),!0}catch{return!1}}class Be{static get isLittleEndian(){return At(this,"isLittleEndian",Lk())}static get isEvalSupported(){return At(this,"isEvalSupported",Ik())}static get isOffscreenCanvasSupported(){return At(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?At(this,"platform",{isMac:navigator.platform.includes("Mac")}):At(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var t,e;return At(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const bm=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var ga,Gd,Kc,r_;class Q{static makeHexColor(t,e,s){return`#${bm[t]}${bm[e]}${bm[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const s=t[0]*e[0]+t[1]*e[2]+e[4],n=t[0]*e[1]+t[1]*e[3]+e[5];return[s,n]}static applyInverseTransform(t,e){const s=e[0]*e[3]-e[1]*e[2],n=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/s,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/s;return[n,r]}static getAxialAlignedBoundingBox(t,e){const s=this.applyTransform(t,e),n=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(s[0],n[0],r[0],o[0]),Math.min(s[1],n[1],r[1],o[1]),Math.max(s[0],n[0],r[0],o[0]),Math.max(s[1],n[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],s=t[0]*e[0]+t[1]*e[2],n=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],a=(s+o)/2,c=Math.sqrt((s+o)**2-4*(s*o-r*n))/2,h=a+c||1,u=a-c||1;return[Math.sqrt(h),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static bezierBoundingBox(t,e,s,n,r,o,a,c,h){return h?(h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,c)):h=[Math.min(t,a),Math.min(e,c),Math.max(t,a),Math.max(e,c)],b(this,Kc,r_).call(this,t,s,r,a,e,n,o,c,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),h),b(this,Kc,r_).call(this,t,s,r,a,e,n,o,c,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h),h}}ga=new WeakSet,Gd=function(t,e,s,n,r,o,a,c,h,u){if(h<=0||h>=1)return;const d=1-h,f=h*h,p=f*h,m=d*(d*(d*t+3*h*e)+3*f*s)+p*n,v=d*(d*(d*r+3*h*o)+3*f*a)+p*c;u[0]=Math.min(u[0],m),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],m),u[3]=Math.max(u[3],v)},Kc=new WeakSet,r_=function(t,e,s,n,r,o,a,c,h,u,d,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&b(this,ga,Gd).call(this,t,e,s,n,r,o,a,c,-d/u,f);return}const p=u**2-4*d*h;if(p<0)return;const m=Math.sqrt(p),v=2*h;b(this,ga,Gd).call(this,t,e,s,n,r,o,a,c,(-u+m)/v,f),b(this,ga,Gd).call(this,t,e,s,n,r,o,a,c,(-u-m)/v,f)},g(Q,ga),g(Q,Kc);function Mk(i){return decodeURIComponent(escape(i))}let vm=null,Sy=null;function Dk(i){return vm||(vm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Sy=new Map([["ﬅ","ſt"]])),i.replaceAll(vm,(t,e,s)=>e?e.normalize("NFKC"):Sy.get(s))}function Ok(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return WE(i)}const zE="pdfjs_internal_id_",mi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Kg{constructor(){this.constructor===Kg&&Mt("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}var Gc;const Av=class Av{constructor({enableHWA:t=!1}={}){g(this,Gc,!1);this.constructor===Av&&Mt("Cannot initialize BaseCanvasFactory."),_(this,Gc,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,Gc)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Mt("Abstract method `_createCanvas` called.")}};Gc=new WeakMap;let Rf=Av;class Gg{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===Gg&&Mt("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),s=this.isCompressed?s_.BINARY:s_.NONE;return this._fetchData(e,s).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}_fetchData(t,e){Mt("Abstract method `_fetchData` called.")}}class qg{constructor({baseUrl:t=null}){this.constructor===qg&&Mt("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}_fetchData(t){Mt("Abstract method `_fetchData` called.")}}class qb{constructor(){this.constructor===qb&&Mt("Cannot initialize BaseSVGFactory.")}create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Mt("Abstract method `_createSVG` called.")}}const bi="http://www.w3.org/2000/svg",ur=class ur{};ht(ur,"CSS",96),ht(ur,"PDF",72),ht(ur,"PDF_TO_CSS_UNITS",ur.CSS/ur.PDF);let Xn=ur;var gr,mr,Us,Ci,we,Hf,_r,ae,Ee,bn,Xo,vn,Qo,ma,qd,yn,Jo,Bf,KE,qc,o_,An,Zo,br,cc,vr,hc,Yc,a_,yr,uc;class Nk extends Kg{constructor({docId:e,ownerDocument:s=globalThis.document}={}){super();g(this,ae);g(this,bn);g(this,vn);g(this,ma);g(this,yn);g(this,Bf);g(this,qc);g(this,An);g(this,br);g(this,vr);g(this,Yc);g(this,yr);g(this,gr,void 0);g(this,mr,void 0);g(this,Us,void 0);g(this,Ci,void 0);g(this,we,void 0);g(this,Hf,void 0);g(this,_r,0);_(this,Ci,e),_(this,we,s)}addFilter(e){if(!e)return"none";let s=l(this,ae,Ee).get(e);if(s)return s;const[n,r,o]=b(this,ma,qd).call(this,e),a=e.length===1?n:`${n}${r}${o}`;if(s=l(this,ae,Ee).get(a),s)return l(this,ae,Ee).set(e,s),s;const c=`g_${l(this,Ci)}_transfer_map_${We(this,_r)._++}`,h=b(this,yn,Jo).call(this,c);l(this,ae,Ee).set(e,h),l(this,ae,Ee).set(a,h);const u=b(this,An,Zo).call(this,c);return b(this,vr,hc).call(this,n,r,o,u),h}addHCMFilter(e,s){var m;const n=`${e}-${s}`,r="base";let o=l(this,bn,Xo).get(r);if((o==null?void 0:o.key)===n||(o?((m=o.filter)==null||m.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},l(this,bn,Xo).set(r,o)),!e||!s))return o.url;const a=b(this,yr,uc).call(this,e);e=Q.makeHexColor(...a);const c=b(this,yr,uc).call(this,s);if(s=Q.makeHexColor(...c),l(this,vn,Qo).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let v=0;v<=255;v++){const A=v/255;h[v]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const u=h.join(","),d=`g_${l(this,Ci)}_hcm_filter`,f=o.filter=b(this,An,Zo).call(this,d);b(this,vr,hc).call(this,u,u,u,f),b(this,qc,o_).call(this,f);const p=(v,A)=>{const y=a[v]/255,w=c[v]/255,T=new Array(A+1);for(let C=0;C<=A;C++)T[C]=y+C/A*(w-y);return T.join(",")};return b(this,vr,hc).call(this,p(0,5),p(1,5),p(2,5),f),o.url=b(this,yn,Jo).call(this,d),o.url}addAlphaFilter(e){let s=l(this,ae,Ee).get(e);if(s)return s;const[n]=b(this,ma,qd).call(this,[e]),r=`alpha_${n}`;if(s=l(this,ae,Ee).get(r),s)return l(this,ae,Ee).set(e,s),s;const o=`g_${l(this,Ci)}_alpha_map_${We(this,_r)._++}`,a=b(this,yn,Jo).call(this,o);l(this,ae,Ee).set(e,a),l(this,ae,Ee).set(r,a);const c=b(this,An,Zo).call(this,o);return b(this,Yc,a_).call(this,n,c),a}addLuminosityFilter(e){let s=l(this,ae,Ee).get(e||"luminosity");if(s)return s;let n,r;if(e?([n]=b(this,ma,qd).call(this,[e]),r=`luminosity_${n}`):r="luminosity",s=l(this,ae,Ee).get(r),s)return l(this,ae,Ee).set(e,s),s;const o=`g_${l(this,Ci)}_luminosity_map_${We(this,_r)._++}`,a=b(this,yn,Jo).call(this,o);l(this,ae,Ee).set(e,a),l(this,ae,Ee).set(r,a);const c=b(this,An,Zo).call(this,o);return b(this,Bf,KE).call(this,c),e&&b(this,Yc,a_).call(this,n,c),a}addHighlightHCMFilter(e,s,n,r,o){var w;const a=`${s}-${n}-${r}-${o}`;let c=l(this,bn,Xo).get(e);if((c==null?void 0:c.key)===a||(c?((w=c.filter)==null||w.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,bn,Xo).set(e,c)),!s||!n))return c.url;const[h,u]=[s,n].map(b(this,yr,uc).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,m]=[r,o].map(b(this,yr,uc).bind(this));f<d&&([d,f,p,m]=[f,d,m,p]),l(this,vn,Qo).style.color="";const v=(T,C,R)=>{const k=new Array(256),I=(f-d)/R,M=T/255,$=(C-T)/(255*R);let K=0;for(let z=0;z<=R;z++){const nt=Math.round(d+z*I),et=M+z*$;for(let dt=K;dt<=nt;dt++)k[dt]=et;K=nt+1}for(let z=K;z<256;z++)k[z]=k[K-1];return k.join(",")},A=`g_${l(this,Ci)}_hcm_${e}_filter`,y=c.filter=b(this,An,Zo).call(this,A);return b(this,qc,o_).call(this,y),b(this,vr,hc).call(this,v(p[0],m[0],5),v(p[1],m[1],5),v(p[2],m[2],5),y),c.url=b(this,yn,Jo).call(this,A),c.url}destroy(e=!1){e&&l(this,bn,Xo).size!==0||(l(this,Us)&&(l(this,Us).parentNode.parentNode.remove(),_(this,Us,null)),l(this,mr)&&(l(this,mr).clear(),_(this,mr,null)),_(this,_r,0))}}gr=new WeakMap,mr=new WeakMap,Us=new WeakMap,Ci=new WeakMap,we=new WeakMap,Hf=new WeakMap,_r=new WeakMap,ae=new WeakSet,Ee=function(){return l(this,mr)||_(this,mr,new Map)},bn=new WeakSet,Xo=function(){return l(this,Hf)||_(this,Hf,new Map)},vn=new WeakSet,Qo=function(){if(!l(this,Us)){const e=l(this,we).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=l(this,we).createElementNS(bi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),_(this,Us,l(this,we).createElementNS(bi,"defs")),e.append(n),n.append(l(this,Us)),l(this,we).body.append(e)}return l(this,Us)},ma=new WeakSet,qd=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=h[f]/255;const d=u.join(",");return[d,d,d]}const[s,n,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,a[h]=n[h]/255,c[h]=r[h]/255;return[o.join(","),a.join(","),c.join(",")]},yn=new WeakSet,Jo=function(e){if(l(this,gr)===void 0){_(this,gr,"");const s=l(this,we).URL;s!==l(this,we).baseURI&&(Xg(s)?pt('#createUrl: ignore "data:"-URL for performance reasons.'):_(this,gr,s.split("#",1)[0]))}return`url(${l(this,gr)}#${e})`},Bf=new WeakSet,KE=function(e){const s=l(this,we).createElementNS(bi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},qc=new WeakSet,o_=function(e){const s=l(this,we).createElementNS(bi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},An=new WeakSet,Zo=function(e){const s=l(this,we).createElementNS(bi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),l(this,vn,Qo).append(s),s},br=new WeakSet,cc=function(e,s,n){const r=l(this,we).createElementNS(bi,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},vr=new WeakSet,hc=function(e,s,n,r){const o=l(this,we).createElementNS(bi,"feComponentTransfer");r.append(o),b(this,br,cc).call(this,o,"feFuncR",e),b(this,br,cc).call(this,o,"feFuncG",s),b(this,br,cc).call(this,o,"feFuncB",n)},Yc=new WeakSet,a_=function(e,s){const n=l(this,we).createElementNS(bi,"feComponentTransfer");s.append(n),b(this,br,cc).call(this,n,"feFuncA",e)},yr=new WeakSet,uc=function(e){return l(this,vn,Qo).style.color=e,Jb(getComputedStyle(l(this,vn,Qo)).getPropertyValue("color"))};class Fk extends Rf{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}={}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}async function Yg(i,t="text"){if(dc(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class GE extends Gg{_fetchData(t,e){return Yg(t,this.isCompressed?"arraybuffer":"text").then(s=>({cMapData:s instanceof ArrayBuffer?new Uint8Array(s):zg(s),compressionType:e}))}}class qE extends qg{_fetchData(t){return Yg(t,"arraybuffer").then(e=>new Uint8Array(e))}}class Yb extends qb{_createSVG(t){return document.createElementNS(bi,t)}}class pd{constructor({viewBox:t,scale:e,rotation:s,offsetX:n=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=s,this.offsetX=n,this.offsetY=r;const a=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let h,u,d,f;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,u=0,d=0,f=1;break;case 90:h=0,u=1,d=1,f=0;break;case 270:h=0,u=-1,d=-1,f=0;break;case 0:h=1,u=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,v,A;h===0?(p=Math.abs(c-t[1])*e+n,m=Math.abs(a-t[0])*e+r,v=(t[3]-t[1])*e,A=(t[2]-t[0])*e):(p=Math.abs(a-t[0])*e+n,m=Math.abs(c-t[1])*e+r,v=(t[2]-t[0])*e,A=(t[3]-t[1])*e),this.transform=[h*e,u*e,d*e,f*e,p-h*e*a-d*e*c,m-u*e*a-f*e*c],this.width=v,this.height=A}get rawDims(){const{viewBox:t}=this;return At(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new pd({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){return Q.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=Q.applyTransform([t[0],t[1]],this.transform),s=Q.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){return Q.applyInverseTransform([t,e],this.transform)}}class Xb extends tr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Xg(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Qb(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function $k(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function Hk(i,t="document.pdf"){if(typeof i!="string")return t;if(Xg(i))return pt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Cy{constructor(){ht(this,"started",Object.create(null));ht(this,"times",[])}time(t){t in this.started&&pt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||pt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function dc(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function je(i){i.preventDefault()}let Ty;class YE{static toDateObject(t){if(!t||typeof t!="string")return null;Ty||(Ty=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=Ty.exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,h==="-"?(o+=u,a+=d):h==="+"&&(o-=u,a-=d),new Date(Date.UTC(s,n,r,o,a,c))}}function Bk(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new pd({viewBox:r,scale:t,rotation:e})}function Jb(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(pt(`Not a valid color format: "${i}"`),[0,0,0])}function jk(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,Jb(s))}t.remove()}function Bt(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function _i(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function Io(i,t,e=!1,s=!0){if(t instanceof pd){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,a=Be.isCSSRoundSupported,c=`var(--scale-factor) * ${n}px`,h=`var(--scale-factor) * ${r}px`,u=a?`round(${c}, 1px)`:`calc(${c})`,d=a?`round(${h}, 1px)`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}s&&i.setAttribute("data-main-rotation",t.rotation)}var Ar,Er,Ge,wr,jf,XE,Vf,QE,Uf,JE,_a,Yd,Wf,ZE,Xc,c_;const zf=class zf{constructor(t){g(this,Vf);g(this,Uf);g(this,_a);g(this,Wf);g(this,Xc);g(this,Ar,null);g(this,Er,null);g(this,Ge,void 0);g(this,wr,null);_(this,Ge,t)}render(){const t=_(this,Ar,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,Ge)._uiManager._signal;t.addEventListener("contextmenu",je,{signal:e}),t.addEventListener("pointerdown",b(zf,jf,XE),{signal:e});const s=_(this,wr,document.createElement("div"));s.className="buttons",t.append(s);const n=l(this,Ge).toolbarPosition;if(n){const{style:r}=t,o=l(this,Ge)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return b(this,Wf,ZE).call(this),t}hide(){var t;l(this,Ar).classList.add("hidden"),(t=l(this,Er))==null||t.hideDropdown()}show(){l(this,Ar).classList.remove("hidden")}addAltTextButton(t){b(this,_a,Yd).call(this,t),l(this,wr).prepend(t,l(this,Xc,c_))}addColorPicker(t){_(this,Er,t);const e=t.renderButton();b(this,_a,Yd).call(this,e),l(this,wr).prepend(e,l(this,Xc,c_))}remove(){var t;l(this,Ar).remove(),(t=l(this,Er))==null||t.destroy(),_(this,Er,null)}};Ar=new WeakMap,Er=new WeakMap,Ge=new WeakMap,wr=new WeakMap,jf=new WeakSet,XE=function(t){t.stopPropagation()},Vf=new WeakSet,QE=function(t){l(this,Ge)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},Uf=new WeakSet,JE=function(t){l(this,Ge)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},_a=new WeakSet,Yd=function(t){const e=l(this,Ge)._uiManager._signal;t.addEventListener("focusin",b(this,Vf,QE).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",b(this,Uf,JE).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",je,{signal:e})},Wf=new WeakSet,ZE=function(){const t=document.createElement("button");t.className="delete",t.tabIndex=0,t.setAttribute("data-l10n-id",`pdfjs-editor-remove-${l(this,Ge).editorType}-button`),b(this,_a,Yd).call(this,t),t.addEventListener("click",e=>{l(this,Ge)._uiManager.delete()},{signal:l(this,Ge)._uiManager._signal}),l(this,wr).append(t)},Xc=new WeakSet,c_=function(){const t=document.createElement("div");return t.className="divider",t},g(zf,jf);let l_=zf;var Qc,Sr,Cr,Kf,tw,Gf,ew,qf,sw;class Vk{constructor(t){g(this,Kf);g(this,Gf);g(this,qf);g(this,Qc,null);g(this,Sr,null);g(this,Cr,void 0);_(this,Cr,t)}show(t,e,s){const[n,r]=b(this,Gf,ew).call(this,e,s),{style:o}=l(this,Sr)||_(this,Sr,b(this,Kf,tw).call(this));t.append(l(this,Sr)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Sr).remove()}}Qc=new WeakMap,Sr=new WeakMap,Cr=new WeakMap,Kf=new WeakSet,tw=function(){const t=_(this,Sr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",je,{signal:l(this,Cr)._signal});const e=_(this,Qc,document.createElement("div"));return e.className="buttons",t.append(e),b(this,qf,sw).call(this),t},Gf=new WeakSet,ew=function(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){n=a,s=o;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,s]},qf=new WeakSet,sw=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,Cr)._signal;t.addEventListener("contextmenu",je,{signal:s}),t.addEventListener("click",()=>{l(this,Cr).highlightSelection("floating_button")},{signal:s}),l(this,Qc).append(t)};function kf(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}function Uk(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var Yf;class Wk{constructor(){g(this,Yf,0)}get id(){return`${Ek}${We(this,Yf)._++}`}}Yf=new WeakMap;var Jc,Xf,ls,Zc,u_;const Ev=class Ev{constructor(){g(this,Zc);g(this,Jc,Ok());g(this,Xf,0);g(this,ls,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return At(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return b(this,Zc,u_).call(this,`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return b(this,Zc,u_).call(this,t,t)}async getFromId(t){l(this,ls)||_(this,ls,new Map);const e=l(this,ls).get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=l(this,ls).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){l(this,ls)||_(this,ls,new Map);const e=l(this,ls).get(t);e&&(e.refCounter-=1,e.refCounter===0&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${l(this,Jc)}_`)}};Jc=new WeakMap,Xf=new WeakMap,ls=new WeakMap,Zc=new WeakSet,u_=async function(t,e){l(this,ls)||_(this,ls,new Map);let s=l(this,ls).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,Jc)}_${We(this,Xf)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(s.url=e,n=await Yg(e,"blob")):n=s.file=e,n.type==="image/svg+xml"){const r=Ev._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((h,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,h()},o.onload=async()=>{const d=s.svgUrl=o.result;a.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},a.onerror=o.onerror=u});o.readAsDataURL(n),await c}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){console.error(n),s=null}return l(this,ls).set(t,s),s&&l(this,ls).set(s.id,s),s};let h_=Ev;var le,En,th,ce;class zk{constructor(t=128){g(this,le,[]);g(this,En,!1);g(this,th,void 0);g(this,ce,-1);_(this,th,t)}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(n&&t(),l(this,En))return;const c={cmd:t,undo:e,post:s,type:r};if(l(this,ce)===-1){l(this,le).length>0&&(l(this,le).length=0),_(this,ce,0),l(this,le).push(c);return}if(o&&l(this,le)[l(this,ce)].type===r){a&&(c.undo=l(this,le)[l(this,ce)].undo),l(this,le)[l(this,ce)]=c;return}const h=l(this,ce)+1;h===l(this,th)?l(this,le).splice(0,1):(_(this,ce,h),h<l(this,le).length&&l(this,le).splice(h)),l(this,le).push(c)}undo(){if(l(this,ce)===-1)return;_(this,En,!0);const{undo:t,post:e}=l(this,le)[l(this,ce)];t(),e==null||e(),_(this,En,!1),_(this,ce,l(this,ce)-1)}redo(){if(l(this,ce)<l(this,le).length-1){_(this,ce,l(this,ce)+1),_(this,En,!0);const{cmd:t,post:e}=l(this,le)[l(this,ce)];t(),e==null||e(),_(this,En,!1)}}hasSomethingToUndo(){return l(this,ce)!==-1}hasSomethingToRedo(){return l(this,ce)<l(this,le).length-1}destroy(){_(this,le,null)}}le=new WeakMap,En=new WeakMap,th=new WeakMap,ce=new WeakMap;var Qf,iw;class gd{constructor(t){g(this,Qf);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Be.platform;for(const[s,n,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(b(this,Qf,iw).call(this,e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(n.bind(t,...o,e)(),r||(e.stopPropagation(),e.preventDefault()))}}Qf=new WeakSet,iw=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Jf=class Jf{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return jk(t),At(this,"_colors",t)}convert(t){const e=Jb(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return Jf._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?Q.makeHexColor(...e):t}};ht(Jf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let d_=Jf;var ba,qe,Jt,pe,va,Ti,ya,As,Aa,Tr,Ws,Es,xr,eh,sh,ih,zs,Ea,wn,Ks,Zf,Sn,nh,Rr,rh,wa,he,Pt,xi,kr,oh,ah,lh,ch,hh,uh,dh,fh,ph,gh,mh,_h,bh,Cn,Gs,Ri,vh,Sa,Xd,yh,f_,tp,nw,ep,rw,Ca,Qd,sp,ow,ip,aw,np,lw,Ah,p_,rp,cw,Eh,g_,wh,m_,op,hw,ge,Pe,qs,dn,ap,uw,lp,dw,Sh,__,cp,fw,Pr,fc,Ch,b_;const la=class la{constructor(t,e,s,n,r,o,a,c,h,u){g(this,Sa);g(this,yh);g(this,tp);g(this,ep);g(this,Ca);g(this,sp);g(this,ip);g(this,np);g(this,Ah);g(this,rp);g(this,Eh);g(this,wh);g(this,op);g(this,ge);g(this,qs);g(this,ap);g(this,lp);g(this,Sh);g(this,cp);g(this,Pr);g(this,Ch);g(this,ba,new AbortController);g(this,qe,null);g(this,Jt,new Map);g(this,pe,new Map);g(this,va,null);g(this,Ti,null);g(this,ya,null);g(this,As,new zk);g(this,Aa,0);g(this,Tr,new Set);g(this,Ws,null);g(this,Es,null);g(this,xr,new Set);g(this,eh,!1);g(this,sh,!1);g(this,ih,null);g(this,zs,null);g(this,Ea,null);g(this,wn,!1);g(this,Ks,null);g(this,Zf,new Wk);g(this,Sn,!1);g(this,nh,!1);g(this,Rr,null);g(this,rh,null);g(this,wa,null);g(this,he,bt.NONE);g(this,Pt,new Set);g(this,xi,null);g(this,kr,null);g(this,oh,null);g(this,ah,this.blur.bind(this));g(this,lh,this.focus.bind(this));g(this,ch,this.copy.bind(this));g(this,hh,this.cut.bind(this));g(this,uh,this.paste.bind(this));g(this,dh,this.keydown.bind(this));g(this,fh,this.keyup.bind(this));g(this,ph,this.onEditingAction.bind(this));g(this,gh,this.onPageChanging.bind(this));g(this,mh,this.onScaleChanging.bind(this));g(this,_h,this.onRotationChanging.bind(this));g(this,bh,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});g(this,Cn,[0,0]);g(this,Gs,null);g(this,Ri,null);g(this,vh,null);this._signal=l(this,ba).signal,_(this,Ri,t),_(this,vh,e),_(this,va,s),this._eventBus=n,this._eventBus._on("editingaction",l(this,ph)),this._eventBus._on("pagechanging",l(this,gh)),this._eventBus._on("scalechanging",l(this,mh)),this._eventBus._on("rotationchanging",l(this,_h)),b(this,sp,ow).call(this),b(this,op,hw).call(this),b(this,Ah,p_).call(this),_(this,Ti,r.annotationStorage),_(this,ih,r.filterFactory),_(this,kr,o),_(this,Ea,a||null),_(this,eh,c),_(this,sh,h),_(this,wa,u||null),this.viewParameters={realScale:Xn.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=la.prototype,e=o=>l(o,Ri).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return At(this,"_keyboardManager",new gd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ri).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ri).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s;(t=l(this,ba))==null||t.abort(),_(this,ba,null),this._signal=null,this._eventBus._off("editingaction",l(this,ph)),this._eventBus._off("pagechanging",l(this,gh)),this._eventBus._off("scalechanging",l(this,mh)),this._eventBus._off("rotationchanging",l(this,_h));for(const n of l(this,pe).values())n.destroy();l(this,pe).clear(),l(this,Jt).clear(),l(this,xr).clear(),_(this,qe,null),l(this,Pt).clear(),l(this,As).destroy(),(e=l(this,va))==null||e.destroy(),(s=l(this,Ks))==null||s.hide(),_(this,Ks,null),l(this,zs)&&(clearTimeout(l(this,zs)),_(this,zs,null)),l(this,Gs)&&(clearTimeout(l(this,Gs)),_(this,Gs,null))}async mlGuess(t){var e;return((e=l(this,wa))==null?void 0:e.guess(t))||null}async isMLEnabledFor(t){var e;return!!await((e=l(this,wa))==null?void 0:e.isEnabledFor(t))}get useNewAltTextFlow(){return l(this,sh)}get hcmFilter(){return At(this,"hcmFilter",l(this,kr)?l(this,ih).addHCMFilter(l(this,kr).foreground,l(this,kr).background):"none")}get direction(){return At(this,"direction",getComputedStyle(l(this,Ri)).direction)}get highlightColors(){return At(this,"highlightColors",l(this,Ea)?new Map(l(this,Ea).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return At(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){_(this,rh,t)}editAltText(t){var e;(e=l(this,va))==null||e.editAltText(this,t)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onPageChanging({pageNumber:t}){_(this,Aa,t-1)}focusMainContainer(){l(this,Ri).focus()}findParent(t,e){for(const s of l(this,pe).values()){const{x:n,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){l(this,vh).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,xr).add(t)}removeShouldRescale(t){l(this,xr).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Xn.PDF_TO_CSS_UNITS;for(const e of l(this,xr))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,a=e.toString(),h=b(this,Sa,Xd).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const d=b(this,yh,f_).call(this,h),f=l(this,he)===bt.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(bt.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,Ti)&&!l(this,Ti).has(t.id)&&l(this,Ti).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,wn)&&(_(this,wn,!1),b(this,Ca,Qd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,Pt))if(e.div.contains(t)){_(this,Rr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,Rr))return;const[t,e]=l(this,Rr);_(this,Rr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){b(this,Ah,p_).call(this),b(this,Eh,g_).call(this)}removeEditListeners(){b(this,rp,cw).call(this),b(this,wh,m_).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of l(this,Es))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of l(this,Es))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=l(this,qe))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of l(this,Pt)){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,Es))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){pt(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const c of s){const h=n.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)b(this,Sh,__).call(this,c);b(this,Ch,b_).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){pt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,he)!==bt.NONE&&!this.isEditorHandlingKeyboard&&la._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,wn)&&(_(this,wn,!1),b(this,Ca,Qd).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(b(this,ip,aw).call(this),b(this,Eh,g_).call(this),b(this,ge,Pe).call(this,{isEditing:l(this,he)!==bt.NONE,isEmpty:b(this,Pr,fc).call(this),hasSomethingToUndo:l(this,As).hasSomethingToUndo(),hasSomethingToRedo:l(this,As).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,np,lw).call(this),b(this,wh,m_).call(this),b(this,ge,Pe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Es)){_(this,Es,t);for(const e of l(this,Es))b(this,qs,dn).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Zf).id}get currentLayer(){return l(this,pe).get(l(this,Aa))}getLayer(t){return l(this,pe).get(t)}get currentPageIndex(){return l(this,Aa)}addLayer(t){l(this,pe).set(t.pageIndex,t),l(this,Sn)?t.enable():t.disable()}removeLayer(t){l(this,pe).delete(t.pageIndex)}updateMode(t,e=null,s=!1){if(l(this,he)!==t){if(_(this,he,t),t===bt.NONE){this.setEditingState(!1),b(this,lp,dw).call(this);return}this.setEditingState(!0),b(this,ap,uw).call(this),this.unselectAll();for(const n of l(this,pe).values())n.updateMode(t);if(!e&&s){this.addNewEditorFromKeyboard();return}if(e){for(const n of l(this,Jt).values())if(n.annotationElementId===e){this.setSelected(n),n.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,he)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(l(this,Es)){switch(t){case at.CREATE:this.currentLayer.addNewEditor();return;case at.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,rh))==null||s.updateColor(e);break;case at.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,oh)||_(this,oh,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of l(this,Pt))n.updateParams(t,e);for(const n of l(this,Es))n.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of l(this,Jt).values())o.editorType===t&&o.show(e);(((r=l(this,oh))==null?void 0:r.get(at.HIGHLIGHT_SHOW_ALL))??!0)!==e&&b(this,qs,dn).call(this,[[at.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,nh)!==t){_(this,nh,t);for(const e of l(this,pe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of l(this,Jt).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return l(this,Jt).get(t)}addEditor(t){l(this,Jt).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(l(this,zs)&&clearTimeout(l(this,zs)),_(this,zs,setTimeout(()=>{this.focusMainContainer(),_(this,zs,null)},0))),l(this,Jt).delete(t.id),this.unselect(t),(!t.annotationElementId||!l(this,Tr).has(t.annotationElementId))&&((e=l(this,Ti))==null||e.remove(t.id))}addDeletedAnnotationElement(t){l(this,Tr).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,Tr).has(t)}removeDeletedAnnotationElement(t){l(this,Tr).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,qe)!==t&&(_(this,qe,t),t&&b(this,qs,dn).call(this,t.propertiesToUpdate))}updateUI(t){l(this,cp,fw)===t&&b(this,qs,dn).call(this,t.propertiesToUpdate)}toggleSelected(t){if(l(this,Pt).has(t)){l(this,Pt).delete(t),t.unselect(),b(this,ge,Pe).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Pt).add(t),t.select(),b(this,qs,dn).call(this,t.propertiesToUpdate),b(this,ge,Pe).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of l(this,Pt))e!==t&&e.unselect();l(this,Pt).clear(),l(this,Pt).add(t),t.select(),b(this,qs,dn).call(this,t.propertiesToUpdate),b(this,ge,Pe).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,Pt).has(t)}get firstSelectedEditor(){return l(this,Pt).values().next().value}unselect(t){t.unselect(),l(this,Pt).delete(t),b(this,ge,Pe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Pt).size!==0}get isEnterHandled(){return l(this,Pt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,As).undo(),b(this,ge,Pe).call(this,{hasSomethingToUndo:l(this,As).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,Pr,fc).call(this)})}redo(){l(this,As).redo(),b(this,ge,Pe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,As).hasSomethingToRedo(),isEmpty:b(this,Pr,fc).call(this)})}addCommands(t){l(this,As).add(t),b(this,ge,Pe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,Pr,fc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...l(this,Pt)],e=()=>{for(const n of t)n.remove()},s=()=>{for(const n of t)b(this,Sh,__).call(this,n)};this.addCommands({cmd:e,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=l(this,qe))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,qe)||this.hasSelection}selectAll(){for(const t of l(this,Pt))t.commit();b(this,Ch,b_).call(this,l(this,Jt).values())}unselectAll(){if(!(l(this,qe)&&(l(this,qe).commitOrRemove(),l(this,he)!==bt.NONE))&&this.hasSelection){for(const t of l(this,Pt))t.unselect();l(this,Pt).clear(),b(this,ge,Pe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,Cn)[0]+=t,l(this,Cn)[1]+=e;const[n,r]=l(this,Cn),o=[...l(this,Pt)],a=1e3;l(this,Gs)&&clearTimeout(l(this,Gs)),_(this,Gs,setTimeout(()=>{_(this,Gs,null),l(this,Cn)[0]=l(this,Cn)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,Jt).has(c.id)&&c.translateInPage(n,r)},undo:()=>{for(const c of o)l(this,Jt).has(c.id)&&c.translateInPage(-n,-r)},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),_(this,Ws,new Map);for(const t of l(this,Pt))l(this,Ws).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ws))return!1;this.disableUserSelect(!1);const t=l(this,Ws);_(this,Ws,null);let e=!1;for(const[{x:n,y:r,pageIndex:o},a]of t)a.newX=n,a.newY=r,a.newPageIndex=o,e||(e=n!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const s=(n,r,o,a)=>{if(l(this,Jt).has(n.id)){const c=l(this,pe).get(a);c?n._setParentAndPosition(c,r,o):(n.pageIndex=a,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:a}]of t)s(n,r,o,a)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(n,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Ws))for(const s of l(this,Ws).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,Pt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,qe)===t}getActive(){return l(this,qe)}getMode(){return l(this,he)}get imageManager(){return At(this,"imageManager",new h_)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(h,u,d,f)=>({x:(u-n)/o,y:1-(h+d-s)/r,width:f/o,height:d/r});break;case"180":a=(h,u,d,f)=>({x:1-(h+d-s)/r,y:1-(u+f-n)/o,width:d/r,height:f/o});break;case"270":a=(h,u,d,f)=>({x:1-(u+f-n)/o,y:(h-s)/r,width:f/o,height:d/r});break;default:a=(h,u,d,f)=>({x:(h-s)/r,y:(u-n)/o,width:d/r,height:f/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const d=e.getRangeAt(h);if(!d.collapsed)for(const{x:f,y:p,width:m,height:v}of d.getClientRects())m===0||v===0||c.push(a(f,p,m,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,ya)||_(this,ya,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,ya))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=l(this,ya))==null?void 0:n.get(t.data.id);if(!e)return;const s=l(this,Ti).getRawValue(e);s&&(l(this,he)===bt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}};ba=new WeakMap,qe=new WeakMap,Jt=new WeakMap,pe=new WeakMap,va=new WeakMap,Ti=new WeakMap,ya=new WeakMap,As=new WeakMap,Aa=new WeakMap,Tr=new WeakMap,Ws=new WeakMap,Es=new WeakMap,xr=new WeakMap,eh=new WeakMap,sh=new WeakMap,ih=new WeakMap,zs=new WeakMap,Ea=new WeakMap,wn=new WeakMap,Ks=new WeakMap,Zf=new WeakMap,Sn=new WeakMap,nh=new WeakMap,Rr=new WeakMap,rh=new WeakMap,wa=new WeakMap,he=new WeakMap,Pt=new WeakMap,xi=new WeakMap,kr=new WeakMap,oh=new WeakMap,ah=new WeakMap,lh=new WeakMap,ch=new WeakMap,hh=new WeakMap,uh=new WeakMap,dh=new WeakMap,fh=new WeakMap,ph=new WeakMap,gh=new WeakMap,mh=new WeakMap,_h=new WeakMap,bh=new WeakMap,Cn=new WeakMap,Gs=new WeakMap,Ri=new WeakMap,vh=new WeakMap,Sa=new WeakSet,Xd=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},yh=new WeakSet,f_=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of l(this,pe).values())if(s.hasTextLayer(t))return s;return null},tp=new WeakSet,nw=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=b(this,Sa,Xd).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(l(this,Ks)||_(this,Ks,new Vk(this)),l(this,Ks).show(s,n,this.direction==="ltr"))},ep=new WeakSet,rw=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,xi)&&((r=l(this,Ks))==null||r.hide(),_(this,xi,null),b(this,ge,Pe).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,xi))return;const n=b(this,Sa,Xd).call(this,t).closest(".textLayer");if(!n){l(this,xi)&&((o=l(this,Ks))==null||o.hide(),_(this,xi,null),b(this,ge,Pe).call(this,{hasSelectedText:!1}));return}if((a=l(this,Ks))==null||a.hide(),_(this,xi,e),b(this,ge,Pe).call(this,{hasSelectedText:!0}),!(l(this,he)!==bt.HIGHLIGHT&&l(this,he)!==bt.NONE)&&(l(this,he)===bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),_(this,wn,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,he)===bt.HIGHLIGHT?b(this,yh,f_).call(this,n):null;c==null||c.toggleDrawing();const h=this._signal,u=d=>{d.type==="pointerup"&&d.button!==0||(c==null||c.toggleDrawing(!0),window.removeEventListener("pointerup",u),window.removeEventListener("blur",u),d.type==="pointerup"&&b(this,Ca,Qd).call(this,"main_toolbar"))};window.addEventListener("pointerup",u,{signal:h}),window.addEventListener("blur",u,{signal:h})}},Ca=new WeakSet,Qd=function(t=""){l(this,he)===bt.HIGHLIGHT?this.highlightSelection(t):l(this,eh)&&b(this,tp,nw).call(this)},sp=new WeakSet,ow=function(){document.addEventListener("selectionchange",b(this,ep,rw).bind(this),{signal:this._signal})},ip=new WeakSet,aw=function(){const t=this._signal;window.addEventListener("focus",l(this,lh),{signal:t}),window.addEventListener("blur",l(this,ah),{signal:t})},np=new WeakSet,lw=function(){window.removeEventListener("focus",l(this,lh)),window.removeEventListener("blur",l(this,ah))},Ah=new WeakSet,p_=function(){const t=this._signal;window.addEventListener("keydown",l(this,dh),{signal:t}),window.addEventListener("keyup",l(this,fh),{signal:t})},rp=new WeakSet,cw=function(){window.removeEventListener("keydown",l(this,dh)),window.removeEventListener("keyup",l(this,fh))},Eh=new WeakSet,g_=function(){const t=this._signal;document.addEventListener("copy",l(this,ch),{signal:t}),document.addEventListener("cut",l(this,hh),{signal:t}),document.addEventListener("paste",l(this,uh),{signal:t})},wh=new WeakSet,m_=function(){document.removeEventListener("copy",l(this,ch)),document.removeEventListener("cut",l(this,hh)),document.removeEventListener("paste",l(this,uh))},op=new WeakSet,hw=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},ge=new WeakSet,Pe=function(t){Object.entries(t).some(([s,n])=>l(this,bh)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,bh),t)}),l(this,he)===bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&b(this,qs,dn).call(this,[[at.HIGHLIGHT_FREE,!0]]))},qs=new WeakSet,dn=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},ap=new WeakSet,uw=function(){if(!l(this,Sn)){_(this,Sn,!0);for(const t of l(this,pe).values())t.enable();for(const t of l(this,Jt).values())t.enable()}},lp=new WeakSet,dw=function(){if(this.unselectAll(),l(this,Sn)){_(this,Sn,!1);for(const t of l(this,pe).values())t.disable();for(const t of l(this,Jt).values())t.disable()}},Sh=new WeakSet,__=function(t){const e=l(this,pe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},cp=new WeakSet,fw=function(){let t=null;for(t of l(this,Pt));return t},Pr=new WeakSet,fc=function(){if(l(this,Jt).size===0)return!0;if(l(this,Jt).size===1)for(const t of l(this,Jt).values())return t.isEmpty();return!1},Ch=new WeakSet,b_=function(t){for(const e of l(this,Pt))e.unselect();l(this,Pt).clear();for(const e of t)e.isEmpty()||(l(this,Pt).add(e),e.select());b(this,ge,Pe).call(this,{hasSelectedEditor:this.hasSelection})},ht(la,"TRANSLATE_SMALL",1),ht(la,"TRANSLATE_BIG",10);let Mo=la;var ki,Pi,ws,Li,Ye,Ta,Ss,Th,v_;const yi=class yi{constructor(t){g(this,Th);g(this,ki,"");g(this,Pi,!1);g(this,ws,null);g(this,Li,null);g(this,Ye,null);g(this,Ta,!1);g(this,Ss,null);_(this,Ss,t)}static initialize(t){yi._l10nPromise||(yi._l10nPromise=t)}async render(){const t=_(this,ws,document.createElement("button"));t.className="altText";const e=await yi._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0";const s=l(this,Ss)._uiManager._signal;t.addEventListener("contextmenu",je,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),l(this,Ss)._uiManager.editAltText(l(this,Ss))};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(_(this,Ta,!0),n(r))},{signal:s}),await b(this,Th,v_).call(this),t}finish(){l(this,ws)&&(l(this,ws).focus({focusVisible:l(this,Ta)}),_(this,Ta,!1))}isEmpty(){return!l(this,ki)&&!l(this,Pi)}get data(){return{altText:l(this,ki),decorative:l(this,Pi)}}set data({altText:t,decorative:e}){l(this,ki)===t&&l(this,Pi)===e||(_(this,ki,t),_(this,Pi,e),b(this,Th,v_).call(this))}toggle(t=!1){l(this,ws)&&(!t&&l(this,Ye)&&(clearTimeout(l(this,Ye)),_(this,Ye,null)),l(this,ws).disabled=!t)}destroy(){var t;(t=l(this,ws))==null||t.remove(),_(this,ws,null),_(this,Li,null)}};ki=new WeakMap,Pi=new WeakMap,ws=new WeakMap,Li=new WeakMap,Ye=new WeakMap,Ta=new WeakMap,Ss=new WeakMap,Th=new WeakSet,v_=async function(){var n;const t=l(this,ws);if(!t)return;if(!l(this,ki)&&!l(this,Pi)){t.classList.remove("done"),(n=l(this,Li))==null||n.remove();return}t.classList.add("done"),yi._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{t.setAttribute("aria-label",r)});let e=l(this,Li);if(!e){_(this,Li,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip");const r=e.id=`alt-text-tooltip-${l(this,Ss).id}`;t.setAttribute("aria-describedby",r);const o=100,a=l(this,Ss)._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(l(this,Ye)),_(this,Ye,null)},{once:!0}),t.addEventListener("mouseenter",()=>{_(this,Ye,setTimeout(()=>{_(this,Ye,null),l(this,Li).classList.add("show"),l(this,Ss)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:a}),t.addEventListener("mouseleave",()=>{var c;l(this,Ye)&&(clearTimeout(l(this,Ye)),_(this,Ye,null)),(c=l(this,Li))==null||c.classList.remove("show")},{signal:a})}e.innerText=l(this,Pi)?await yi._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):l(this,ki),e.parentNode||t.append(e);const s=l(this,Ss).getImageForAltText();s==null||s.setAttribute("aria-describedby",e.id)},ht(yi,"_l10nPromise",null);let Pf=yi;var Lr,Cs,Se,xa,Ir,me,Mr,Ra,ka,Ce,xh,Dr,Tn,Rh,Or,Ii,Ys,Pa,La,cs,kh,hp,Ph,y_,Lh,A_,Ih,E_,up,pw,dp,gw,Mh,w_,Dh,S_,Oh,C_,fp,mw,pp,_w,gp,bw,mp,vw,Nh,T_,Nr,pc;const Dt=class Dt{constructor(t){g(this,Ph);g(this,Ih);g(this,up);g(this,dp);g(this,Mh);g(this,Dh);g(this,Oh);g(this,fp);g(this,pp);g(this,gp);g(this,mp);g(this,Nh);g(this,Nr);g(this,Lr,null);g(this,Cs,null);g(this,Se,null);g(this,xa,!1);g(this,Ir,!1);g(this,me,null);g(this,Mr,null);g(this,Ra,this.focusin.bind(this));g(this,ka,this.focusout.bind(this));g(this,Ce,null);g(this,xh,"");g(this,Dr,!1);g(this,Tn,null);g(this,Rh,!1);g(this,Or,!1);g(this,Ii,!1);g(this,Ys,null);g(this,Pa,0);g(this,La,0);g(this,cs,null);ht(this,"_initialOptions",Object.create(null));ht(this,"_isVisible",!0);ht(this,"_uiManager",null);ht(this,"_focusEventsAllowed",!0);ht(this,"_l10nPromise",null);g(this,kh,!1);g(this,hp,Dt._zIndex++);this.constructor===Dt&&Mt("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Dt.prototype._resizeWithKeyboard,e=Mo.TRANSLATE_SMALL,s=Mo.TRANSLATE_BIG;return At(this,"_resizerKeyboardManager",new gd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Dt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return At(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new Kk({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e,s){if(Dt._l10nPromise||(Dt._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,t.get(r.replaceAll(/([A-Z])/g,o=>`-${o.toLowerCase()}`))]))),s!=null&&s.strings)for(const r of s.strings)Dt._l10nPromise.set(r,t.get(r));if(Dt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Dt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,kh)}set _isDraggable(t){var e;_(this,kh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,hp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):b(this,Nr,pc).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Dr)?_(this,Dr,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}translate(t,e){b(this,Ph,y_).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,Tn)||_(this,Tn,[this.x,this.y]),b(this,Ph,y_).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){l(this,Tn)||_(this,Tn,[this.x,this.y]);const[s,n]=this.parentDimensions;if(this.x+=t/s,this.y+=e/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[a,c]=this.getBaseTranslation();r+=a,o+=c,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!l(this,Tn)&&(l(this,Tn)[0]!==this.x||l(this,Tn)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Dt,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,s]=this.pageDimensions;let{x:n,y:r,width:o,height:a}=this;if(o*=e,a*=s,n*=e,r*=s,this._mustFixPosition)switch(t){case 0:n=Math.max(0,Math.min(e-o,n)),r=Math.max(0,Math.min(s-a,r));break;case 90:n=Math.max(0,Math.min(e-a,n)),r=Math.min(s,Math.max(o,r));break;case 180:n=Math.min(e,Math.max(o,n)),r=Math.min(s,Math.max(a,r));break;case 270:n=Math.min(e,Math.max(a,n)),r=Math.max(0,Math.min(s-o,r));break}this.x=n/=e,this.y=r/=s;const[c,h]=this.getBaseTranslation();n+=c,r+=h;const{style:u}=this.div;u.left=`${(100*n).toFixed(2)}%`,u.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return b(s=Dt,Lh,A_).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return b(s=Dt,Lh,A_).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this,n=e*t,r=s*t;return Be.isCSSRoundSupported?[Math.round(n),Math.round(r)]:[n,r]}setDims(t,e){const[s,n]=this.parentDimensions;this.div.style.width=`${(100*t/s).toFixed(2)}%`,l(this,Ir)||(this.div.style.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!l(this,Ir)&&e.endsWith("%");if(n&&r)return;const[o,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!l(this,Ir)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=l(this,Se))==null||t.finish()}async addEditToolbar(){return l(this,Ce)||l(this,Or)?l(this,Ce):(_(this,Ce,new l_(this)),this.div.append(l(this,Ce).render()),l(this,Se)&&l(this,Ce).addAltTextButton(await l(this,Se).render()),l(this,Ce))}removeEditToolbar(){var t;l(this,Ce)&&(l(this,Ce).remove(),_(this,Ce,null),(t=l(this,Se))==null||t.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Se)||(Pf.initialize(Dt._l10nPromise),_(this,Se,new Pf(this)),l(this,Lr)&&(l(this,Se).data=l(this,Lr),_(this,Lr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,Se))==null?void 0:t.data}set altTextData(t){l(this,Se)&&(l(this,Se).data=t)}hasAltText(){var t;return!((t=l(this,Se))!=null&&t.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=l(this,xa)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground();const t=this._uiManager._signal;this.div.addEventListener("focusin",l(this,Ra),{signal:t}),this.div.addEventListener("focusout",l(this,ka),{signal:t});const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*s/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),kf(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=Be.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(_(this,Dr,!0),this._isDraggable){b(this,fp,mw).call(this,t);return}b(this,Oh,C_).call(this,t)}moveInDOM(){l(this,Ys)&&clearTimeout(l(this,Ys)),_(this,Ys,setTimeout(()=>{var t;_(this,Ys,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,h=t/n,u=e/n,d=this.x*r,f=this.y*o,p=this.width*r,m=this.height*o;switch(s){case 0:return[d+h+a,o-f-u-m+c,d+h+p+a,o-f-u+c];case 90:return[d+u+a,o-f+h+c,d+u+m+a,o-f+h+p+c];case 180:return[d-h-p+a,o-f+u+c,d-h+a,o-f+u+m+c];case 270:return[d-u-m+a,o-f-h-p+c,d-u+a,o-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,a=r-s,c=o-n;switch(this.rotation){case 0:return[s,e-o,a,c];case 90:return[s,e-n,c,a];case 180:return[r,e-n,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_(this,Or,!0)}disableEditMode(){_(this,Or,!1)}isInEditMode(){return l(this,Or)}shouldGetKeyboardEvents(){return l(this,Ii)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,s;const t=this._uiManager._signal;(e=this.div)==null||e.addEventListener("focusin",l(this,Ra),{signal:t}),(s=this.div)==null||s.addEventListener("focusout",l(this,ka),{signal:t})}rotate(t){}serialize(t=!1,e=null){Mt("An editor must be serializable")}static deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});n.rotation=t.rotation,_(n,Lr,t.accessibilityData);const[r,o]=n.pageDimensions,[a,c,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=a/r,n.y=c/o,n.width=h/r,n.height=u/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",l(this,Ra)),this.div.removeEventListener("focusout",l(this,ka)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Ys)&&(clearTimeout(l(this,Ys)),_(this,Ys,null)),b(this,Nr,pc).call(this),this.removeEditToolbar(),l(this,cs)){for(const t of l(this,cs).values())clearTimeout(t);_(this,cs,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,up,pw).call(this),l(this,me).classList.remove("hidden"),kf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),_(this,Mr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,me).children;if(!l(this,Cs)){_(this,Cs,Array.from(e));const o=b(this,pp,_w).bind(this),a=b(this,gp,bw).bind(this),c=this._uiManager._signal;for(const h of l(this,Cs)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",a,{signal:c}),h.addEventListener("focus",b(this,mp,vw).bind(this,u),{signal:c}),Dt._l10nPromise.get(`pdfjs-editor-resizer-label-${u}`).then(d=>h.setAttribute("aria-label",d))}}const s=l(this,Cs)[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Cs).length/4);if(r!==n){if(r<n)for(let a=0;a<n-r;a++)l(this,me).append(l(this,me).firstChild);else if(r>n)for(let a=0;a<r-n;a++)l(this,me).firstChild.before(l(this,me).lastChild);let o=0;for(const a of e){const h=l(this,Cs)[o++].getAttribute("data-resizer-name");Dt._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(u=>a.setAttribute("aria-label",u))}}b(this,Nh,T_).call(this,0),_(this,Ii,!0),l(this,me).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Ii)&&b(this,Dh,S_).call(this,l(this,xh),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){b(this,Nr,pc).call(this),this.div.focus()}select(){var t,e;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!l(this,Ce)){this.addEditToolbar().then(()=>{var s,n;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((n=l(this,Ce))==null||n.show())});return}(e=l(this,Ce))==null||e.show()}unselect(){var t,e,s,n;(t=l(this,me))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=l(this,Ce))==null||n.hide()}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return l(this,Rh)}set isEditing(t){_(this,Rh,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){_(this,Ir,!0);const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,cs)||_(this,cs,new Map);const{action:s}=t;let n=l(this,cs).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),l(this,cs).delete(s),l(this,cs).size===0&&_(this,cs,null)},Dt._telemetryTimeout),l(this,cs).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),_(this,xa,!1)}disable(){this.div&&(this.div.tabIndex=-1),_(this,xa,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Lr=new WeakMap,Cs=new WeakMap,Se=new WeakMap,xa=new WeakMap,Ir=new WeakMap,me=new WeakMap,Mr=new WeakMap,Ra=new WeakMap,ka=new WeakMap,Ce=new WeakMap,xh=new WeakMap,Dr=new WeakMap,Tn=new WeakMap,Rh=new WeakMap,Or=new WeakMap,Ii=new WeakMap,Ys=new WeakMap,Pa=new WeakMap,La=new WeakMap,cs=new WeakMap,kh=new WeakMap,hp=new WeakMap,Ph=new WeakSet,y_=function([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this.fixAndSetPosition()},Lh=new WeakSet,A_=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Ih=new WeakSet,E_=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},up=new WeakSet,pw=function(){if(l(this,me))return;_(this,me,document.createElement("div")),l(this,me).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");l(this,me).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",b(this,dp,gw).bind(this,s),{signal:e}),n.addEventListener("contextmenu",je,{signal:e}),n.tabIndex=-1}this.div.prepend(l(this,me))},dp=new WeakSet,gw=function(t,e){var v;e.preventDefault();const{isMac:s}=Be.platform;if(e.button!==0||e.ctrlKey&&s)return;(v=l(this,Se))==null||v.toggle(!1);const n=b(this,Dh,S_).bind(this,t),r=this._isDraggable;this._isDraggable=!1;const o=this._uiManager._signal,a={passive:!0,capture:!0,signal:o};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,a),window.addEventListener("contextmenu",je,{signal:o});const c=this.x,h=this.y,u=this.width,d=this.height,f=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const m=()=>{var A;this.parent.togglePointerEvents(!0),(A=l(this,Se))==null||A.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",m),window.removeEventListener("blur",m),window.removeEventListener("pointermove",n,a),window.removeEventListener("contextmenu",je),this.parent.div.style.cursor=f,this.div.style.cursor=p,b(this,Mh,w_).call(this,c,h,u,d)};window.addEventListener("pointerup",m,{signal:o}),window.addEventListener("blur",m,{signal:o})},Mh=new WeakSet,w_=function(t,e,s,n){const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===s&&c===n||this.addCommands({cmd:()=>{this.width=a,this.height=c,this.x=r,this.y=o;const[h,u]=this.parentDimensions;this.setDims(h*a,u*c),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=n,this.x=t,this.y=e;const[h,u]=this.parentDimensions;this.setDims(h*s,u*n),this.fixAndSetPosition()},mustExec:!0})},Dh=new WeakSet,S_=function(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,h=Dt.MIN_SIZE/s,u=Dt.MIN_SIZE/n,d=V=>Math.round(V*1e4)/1e4,f=b(this,Ih,E_).call(this,this.rotation),p=(V,G)=>[f[0]*V+f[2]*G,f[1]*V+f[3]*G],m=b(this,Ih,E_).call(this,360-this.rotation),v=(V,G)=>[m[0]*V+m[2]*G,m[1]*V+m[3]*G];let A,y,w=!1,T=!1;switch(t){case"topLeft":w=!0,A=(V,G)=>[0,0],y=(V,G)=>[V,G];break;case"topMiddle":A=(V,G)=>[V/2,0],y=(V,G)=>[V/2,G];break;case"topRight":w=!0,A=(V,G)=>[V,0],y=(V,G)=>[0,G];break;case"middleRight":T=!0,A=(V,G)=>[V,G/2],y=(V,G)=>[0,G/2];break;case"bottomRight":w=!0,A=(V,G)=>[V,G],y=(V,G)=>[0,0];break;case"bottomMiddle":A=(V,G)=>[V/2,G],y=(V,G)=>[V/2,0];break;case"bottomLeft":w=!0,A=(V,G)=>[0,G],y=(V,G)=>[V,0];break;case"middleLeft":T=!0,A=(V,G)=>[0,G/2],y=(V,G)=>[V,G/2];break}const C=A(a,c),R=y(a,c);let k=p(...R);const I=d(r+k[0]),M=d(o+k[1]);let $=1,K=1,[z,nt]=this.screenToPageTranslation(e.movementX,e.movementY);if([z,nt]=v(z/s,nt/n),w){const V=Math.hypot(a,c);$=K=Math.max(Math.min(Math.hypot(R[0]-C[0]-z,R[1]-C[1]-nt)/V,1/a,1/c),h/a,u/c)}else T?$=Math.max(h,Math.min(1,Math.abs(R[0]-C[0]-z)))/a:K=Math.max(u,Math.min(1,Math.abs(R[1]-C[1]-nt)))/c;const et=d(a*$),dt=d(c*K);k=p(...y(et,dt));const lt=I-k[0],X=M-k[1];this.width=et,this.height=dt,this.x=lt,this.y=X,this.setDims(s*et,n*dt),this.fixAndSetPosition()},Oh=new WeakSet,C_=function(t){const{isMac:e}=Be.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},fp=new WeakSet,mw=function(t){const e=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let s,n;const r=this._uiManager._signal;e&&(this.div.classList.add("moving"),s={passive:!0,capture:!0,signal:r},_(this,Pa,t.clientX),_(this,La,t.clientY),n=a=>{const{clientX:c,clientY:h}=a,[u,d]=this.screenToPageTranslation(c-l(this,Pa),h-l(this,La));_(this,Pa,c),_(this,La,h),this._uiManager.dragSelectedEditors(u,d)},window.addEventListener("pointermove",n,s));const o=()=>{window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),e&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,s)),_(this,Dr,!1),this._uiManager.endDragSession()||b(this,Oh,C_).call(this,t)};window.addEventListener("pointerup",o,{signal:r}),window.addEventListener("blur",o,{signal:r})},pp=new WeakSet,_w=function(t){Dt._resizerKeyboardManager.exec(this,t)},gp=new WeakSet,bw=function(t){var e;l(this,Ii)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,me)&&b(this,Nr,pc).call(this)},mp=new WeakSet,vw=function(t){_(this,xh,l(this,Ii)?t:"")},Nh=new WeakSet,T_=function(t){if(l(this,Cs))for(const e of l(this,Cs))e.tabIndex=t},Nr=new WeakSet,pc=function(){if(_(this,Ii,!1),b(this,Nh,T_).call(this,-1),l(this,Mr)){const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=l(this,Mr);b(this,Mh,w_).call(this,t,e,s,n),_(this,Mr,null)}},g(Dt,Lh),ht(Dt,"_borderLineWidth",-1),ht(Dt,"_colorManager",new d_),ht(Dt,"_zIndex",1),ht(Dt,"_telemetryTimeout",1e3);let xt=Dt;class Kk extends xt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const xy=3285377520,as=4294901760,Vs=65535;class yw{constructor(t){this.h1=t?t&4294967295:xy,this.h2=t?t&4294967295:xy}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,A=t.length;v<A;v++){const y=t.charCodeAt(v);y<=255?e[s++]=y:(e[s++]=y>>>8,e[s++]=y&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let a=0,c=0,h=this.h1,u=this.h2;const d=3432918353,f=461845907,p=d&Vs,m=f&Vs;for(let v=0;v<n;v++)v&1?(a=o[v],a=a*d&as|a*p&Vs,a=a<<15|a>>>17,a=a*f&as|a*m&Vs,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[v],c=c*d&as|c*p&Vs,c=c<<15|c>>>17,c=c*f&as|c*m&Vs,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[n*4+2]<<16;case 2:a^=e[n*4+1]<<8;case 1:a^=e[n*4],a=a*d&as|a*p&Vs,a=a<<15|a>>>17,a=a*f&as|a*m&Vs,n&1?h^=a:u^=a}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&as|t*36045&Vs,e=e*4283543511&as|((e<<16|t>>>16)*2950163797&as)>>>16,t^=e>>>1,t=t*444984403&as|t*60499&Vs,e=e*3301882366&as|((e<<16|t>>>16)*3120437893&as)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const x_=Object.freeze({map:null,hash:"",transfer:void 0});var Fr,$r,ue,_p,Aw;class Zb{constructor(){g(this,_p);g(this,Fr,!1);g(this,$r,null);g(this,ue,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=l(this,ue).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return l(this,ue).get(t)}remove(t){if(l(this,ue).delete(t),l(this,ue).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,ue).values())if(e instanceof xt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=l(this,ue).get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,l(this,ue).set(t,e);n&&b(this,_p,Aw).call(this),e instanceof xt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,ue).has(t)}getAll(){return l(this,ue).size>0?Gb(l(this,ue)):null}setAll(t){for(const[e,s]of Object.entries(t))this.setValue(e,s)}get size(){return l(this,ue).size}resetModified(){l(this,Fr)&&(_(this,Fr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ew(this)}get serializable(){if(l(this,ue).size===0)return x_;const t=new Map,e=new yw,s=[],n=Object.create(null);let r=!1;for(const[o,a]of l(this,ue)){const c=a instanceof xt?a.serialize(!1,n):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:x_}get editorStats(){let t=null;const e=new Map;for(const s of l(this,ue).values()){if(!(s instanceof xt))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,c]of Object.entries(n)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){_(this,$r,null)}get modifiedIds(){if(l(this,$r))return l(this,$r);const t=[];for(const e of l(this,ue).values())!(e instanceof xt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return _(this,$r,{ids:new Set(t),hash:t.join(",")})}}Fr=new WeakMap,$r=new WeakMap,ue=new WeakMap,_p=new WeakSet,Aw=function(){l(this,Fr)||(_(this,Fr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Fh;class Ew extends Zb{constructor(e){super();g(this,Fh,void 0);const{map:s,hash:n,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);_(this,Fh,{map:o,hash:n,transfer:r})}get print(){Mt("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Fh)}get modifiedIds(){return At(this,"modifiedIds",{ids:new Set,hash:""})}}Fh=new WeakMap;var Ia;class Gk{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){g(this,Ia,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Ia).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||l(this,Ia).has(t.loadedName))){if(se(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:n,style:r}=t,o=new FontFace(s,n,r);this.addNativeFontFace(o);try{await o.load(),l(this,Ia).add(s),e==null||e(t)}catch{pt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw pt(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return At(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Re||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),At(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(se(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return At(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(C,R){return C.charCodeAt(R)<<24|C.charCodeAt(R+1)<<16|C.charCodeAt(R+2)<<8|C.charCodeAt(R+3)&255}function n(C,R,k,I){const M=C.substring(0,R),$=C.substring(R+k);return M+I+$}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let h=0;function u(C,R){if(++h>30){pt("Load test font never loaded."),R();return}if(c.font="30px "+C,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(u.bind(null,C,R))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=n(f,976,d.length,d);const m=16,v=1482184792;let A=s(f,m);for(r=0,o=d.length-3;r<o;r+=4)A=A-v+s(d,r)|0;r<d.length&&(A=A-v+s(d+"XXX",r)|0),f=n(f,m,4,Pk(A));const y=`url(data:font/opentype;base64,${btoa(f)});`,w=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(w);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const C of[t.loadedName,d]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=C,T.append(R)}this._document.body.append(T),u(d,()=>{T.remove(),e.complete()})}}Ia=new WeakMap;class qk{constructor(t,{disableFontFace:e=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this.disableFontFace=e===!0,this._inspectFont=s}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=WE(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),s}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let s;try{s=t.get(this.loadedName+"_path_"+e)}catch(r){pt(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[e]=function(r,o){};const n=[];for(let r=0,o=s.length;r<o;)switch(s[r++]){case mi.BEZIER_CURVE_TO:{const[a,c,h,u,d,f]=s.slice(r,r+6);n.push(p=>p.bezierCurveTo(a,c,h,u,d,f)),r+=6}break;case mi.MOVE_TO:{const[a,c]=s.slice(r,r+2);n.push(h=>h.moveTo(a,c)),r+=2}break;case mi.LINE_TO:{const[a,c]=s.slice(r,r+2);n.push(h=>h.lineTo(a,c)),r+=2}break;case mi.QUADRATIC_CURVE_TO:{const[a,c,h,u]=s.slice(r,r+4);n.push(d=>d.quadraticCurveTo(a,c,h,u)),r+=4}break;case mi.RESTORE:n.push(a=>a.restore());break;case mi.SAVE:n.push(a=>a.save());break;case mi.SCALE:se(n.length===2,"Scale command is only valid at the third position.");break;case mi.TRANSFORM:{const[a,c,h,u,d,f]=s.slice(r,r+6);n.push(p=>p.transform(a,c,h,u,d,f)),r+=6}break;case mi.TRANSLATE:{const[a,c]=s.slice(r,r+2);n.push(h=>h.translate(a,c)),r+=2}break}return this.compiledGlyphs[e]=function(o,a){n[0](o),n[1](o),o.scale(a,-a);for(let c=2,h=n.length;c<h;c++)n[c](o)}}}if(Re){var R_=Promise.withResolvers(),Lc=null;(async()=>{const t=await lc(()=>import("./__vite-browser-external-b25bb000.js"),[]),e=await lc(()=>import("./__vite-browser-external-b25bb000.js"),[]),s=await lc(()=>import("./__vite-browser-external-b25bb000.js"),[]),n=await lc(()=>import("./__vite-browser-external-b25bb000.js"),[]);let r,o;return new Map(Object.entries({fs:t,http:e,https:s,url:n,canvas:r,path2d:o}))})().then(t=>{Lc=t,R_.resolve()},t=>{pt(`loadPackages: ${t}`),Lc=new Map,R_.resolve()})}class fi{static get promise(){return R_.promise}static get(t){return Lc==null?void 0:Lc.get(t)}}const ww=function(i){return fi.get("fs").promises.readFile(i).then(e=>new Uint8Array(e))};class Yk extends Kg{}class Xk extends Rf{_createCanvas(t,e){return fi.get("canvas").createCanvas(t,e)}}class Qk extends Gg{_fetchData(t,e){return ww(t).then(s=>({cMapData:s,compressionType:e}))}}class Jk extends qg{_fetchData(t){return ww(t)}}const Ie={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function k_(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class md{constructor(){this.constructor===md&&Mt("Cannot initialize BaseShadingPattern.")}getPattern(){Mt("Abstract method `getPattern` called.")}}class Zk extends md{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===Ie.STROKE||n===Ie.FILL){const o=e.current.getClippedPathBoundingBox(n,Bt(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",a,c,!0),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=Q.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),k_(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const d=new DOMMatrix(s);r.setTransform(d)}else k_(t,this._bbox),r=this._createGradient(t);return r}}function ym(i,t,e,s,n,r,o,a){const c=t.coords,h=t.colors,u=i.data,d=i.width*4;let f;c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f),c[s+1]>c[n+1]&&(f=s,s=n,n=f,f=o,o=a,a=f),c[e+1]>c[s+1]&&(f=e,e=s,s=f,f=r,r=o,o=f);const p=(c[e]+t.offsetX)*t.scaleX,m=(c[e+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,A=(c[s+1]+t.offsetY)*t.scaleY,y=(c[n]+t.offsetX)*t.scaleX,w=(c[n+1]+t.offsetY)*t.scaleY;if(m>=w)return;const T=h[r],C=h[r+1],R=h[r+2],k=h[o],I=h[o+1],M=h[o+2],$=h[a],K=h[a+1],z=h[a+2],nt=Math.round(m),et=Math.round(w);let dt,lt,X,V,G,jt,ne,Xt;for(let gt=nt;gt<=et;gt++){if(gt<A){const P=gt<m?0:(m-gt)/(m-A);dt=p-(p-v)*P,lt=T-(T-k)*P,X=C-(C-I)*P,V=R-(R-M)*P}else{let P;gt>w?P=1:A===w?P=0:P=(A-gt)/(A-w),dt=v-(v-y)*P,lt=k-(k-$)*P,X=I-(I-K)*P,V=M-(M-z)*P}let Rt;gt<m?Rt=0:gt>w?Rt=1:Rt=(m-gt)/(m-w),G=p-(p-y)*Rt,jt=T-(T-$)*Rt,ne=C-(C-K)*Rt,Xt=R-(R-z)*Rt;const re=Math.round(Math.min(dt,G)),Ut=Math.round(Math.max(dt,G));let Ct=d*gt+re*4;for(let P=re;P<=Ut;P++)Rt=(dt-P)/(dt-G),Rt<0?Rt=0:Rt>1&&(Rt=1),u[Ct++]=lt-(lt-jt)*Rt|0,u[Ct++]=X-(X-ne)*Rt|0,u[Ct++]=V-(V-Xt)*Rt|0,u[Ct++]=255}}function tP(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<c;r++){let u=r*a;for(let d=0;d<h;d++,u++)ym(i,e,s[u],s[u+1],s[u+a],n[u],n[u+1],n[u+a]),ym(i,e,s[u+a+1],s[u+1],s[u+a],n[u+a+1],n[u+1],n[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)ym(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class eP extends md{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),p=h/d,m=u/f,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},A=d+2*2,y=f+2*2,w=s.getCanvas("mesh",A,y,!1),T=w.context,C=T.createImageData(d,f);if(e){const k=C.data;for(let I=0,M=k.length;I<M;I+=4)k[I]=e[0],k[I+1]=e[1],k[I+2]=e[2],k[I+3]=255}for(const k of this._figures)tP(C,k,v);return T.putImageData(C,2,2),{canvas:w.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}getPattern(t,e,s,n){k_(t,this._bbox);let r;if(n===Ie.SHADING)r=Q.singularValueDecompose2dScale(Bt(t));else if(r=Q.singularValueDecompose2dScale(e.baseTransform),this.matrix){const a=Q.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,n===Ie.SHADING?null:this._background,e.cachedCanvases);return n!==Ie.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class sP extends md{getPattern(){return"hotpink"}}function iP(i){switch(i[0]){case"RadialAxial":return new Zk(i);case"Mesh":return new eP(i);case"Dummy":return new sP}throw new Error(`Unknown IR type: ${i[0]}`)}const Ry={COLORED:1,UNCOLORED:2},bp=class bp{constructor(t,e,s,n,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=s,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,s=this.bbox,n=this.xstep,r=this.ystep,o=this.paintType,a=this.tilingType,c=this.color,h=this.canvasGraphicsFactory;Ug("TilingType: "+a);const u=s[0],d=s[1],f=s[2],p=s[3],m=Q.singularValueDecompose2dScale(this.matrix),v=Q.singularValueDecompose2dScale(this.baseTransform),A=[m[0]*v[0],m[1]*v[1]],y=this.getSizeAndScale(n,this.ctx.canvas.width,A[0]),w=this.getSizeAndScale(r,this.ctx.canvas.height,A[1]),T=t.cachedCanvases.getCanvas("pattern",y.size,w.size,!0),C=T.context,R=h.createCanvasGraphics(C);R.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(R,o,c);let k=u,I=d,M=f,$=p;return u<0&&(k=0,M+=Math.abs(u)),d<0&&(I=0,$+=Math.abs(d)),C.translate(-(y.scale*k),-(w.scale*I)),R.transform(y.scale,0,0,w.scale,0,0),C.save(),this.clipBbox(R,k,I,M,$),R.baseTransform=Bt(R.ctx),R.executeOperatorList(e),R.endDrawing(),{canvas:T.canvas,scaleX:y.scale,scaleY:w.scale,offsetX:k,offsetY:I}}getSizeAndScale(t,e,s){t=Math.abs(t);const n=Math.max(bp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,a=r-s;t.ctx.rect(e,s,o,a),t.current.updateRectMinMax(Bt(t.ctx),[e,s,n,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case Ry.COLORED:const o=this.ctx;n.fillStyle=o.fillStyle,n.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case Ry.UNCOLORED:const a=Q.makeHexColor(s[0],s[1],s[2]);n.fillStyle=a,n.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new kk(`Unsupported paint type: ${e}`)}}getPattern(t,e,s,n){let r=s;n!==Ie.SHADING&&(r=Q.transform(r,e.baseTransform),this.matrix&&(r=Q.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};ht(bp,"MAX_PATTERN_SIZE",3e3);let P_=bp;function nP({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Be.isLittleEndian?4278190080:255,[c,h]=o?[r,a]:[a,r],u=s>>3,d=s&7,f=i.length;e=new Uint32Array(e.buffer);let p=0;for(let m=0;m<n;m++){for(const A=t+u;t<A;t++){const y=t<f?i[t]:255;e[p++]=y&128?h:c,e[p++]=y&64?h:c,e[p++]=y&32?h:c,e[p++]=y&16?h:c,e[p++]=y&8?h:c,e[p++]=y&4?h:c,e[p++]=y&2?h:c,e[p++]=y&1?h:c}if(d===0)continue;const v=t<f?i[t++]:255;for(let A=0;A<d;A++)e[p++]=v&1<<7-A?h:c}return{srcPos:t,destPos:p}}const ky=16,Py=100,rP=15,Ly=10,Iy=1e3,$e=16;function oP(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(s,n){t.translate(s,n),this.__originalTranslate(s,n)},i.scale=function(s,n){t.scale(s,n),this.__originalScale(s,n)},i.transform=function(s,n,r,o,a,c){t.transform(s,n,r,o,a,c),this.__originalTransform(s,n,r,o,a,c)},i.setTransform=function(s,n,r,o,a,c){t.setTransform(s,n,r,o,a,c),this.__originalSetTransform(s,n,r,o,a,c)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(s){t.rotate(s),this.__originalRotate(s)},i.clip=function(s){t.clip(s),this.__originalClip(s)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,a){t.bezierCurveTo(e,s,n,r,o,a),this.__originalBezierCurveTo(e,s,n,r,o,a)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class aP{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function kd(i,t,e,s,n,r,o,a,c,h){const[u,d,f,p,m,v]=Bt(i);if(d===0&&f===0){const w=o*u+m,T=Math.round(w),C=a*p+v,R=Math.round(C),k=(o+c)*u+m,I=Math.abs(Math.round(k)-T)||1,M=(a+h)*p+v,$=Math.abs(Math.round(M)-R)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(p),T,R),i.drawImage(t,e,s,n,r,0,0,I,$),i.setTransform(u,d,f,p,m,v),[I,$]}if(u===0&&p===0){const w=a*f+m,T=Math.round(w),C=o*d+v,R=Math.round(C),k=(a+h)*f+m,I=Math.abs(Math.round(k)-T)||1,M=(o+c)*d+v,$=Math.abs(Math.round(M)-R)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,T,R),i.drawImage(t,e,s,n,r,0,0,$,I),i.setTransform(u,d,f,p,m,v),[$,I]}i.drawImage(t,e,s,n,r,o,a,c,h);const A=Math.hypot(u,d),y=Math.hypot(f,p);return[A*c,y*h]}function lP(i){const{width:t,height:e}=i;if(t>Iy||e>Iy)return null;const s=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let o=new Uint8Array(r*(e+1)),a,c,h;const u=t+7&-8;let d=new Uint8Array(u*e),f=0;for(const y of i.data){let w=128;for(;w>0;)d[f++]=y&w?0:255,w>>=1}let p=0;for(f=0,d[f]!==0&&(o[0]=1,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[c]=d[f]?2:1,++p),f++;for(d[f]!==0&&(o[c]=2,++p),a=1;a<e;a++){f=a*u,h=a*r,d[f-u]!==d[f]&&(o[h]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-u]?8:0);for(c=1;c<t;c++)y=(y>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0),n[y]&&(o[h+c]=n[y],++p),f++;if(d[f-u]!==d[f]&&(o[h+c]=d[f]?2:4,++p),p>s)return null}for(f=u*(e-1),h=a*r,d[f]!==0&&(o[h]=8,++p),c=1;c<t;c++)d[f]!==d[f+1]&&(o[h+c]=d[f]?4:8,++p),f++;if(d[f]!==0&&(o[h+c]=4,++p),p>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),v=new Path2D;for(a=0;p&&a<=e;a++){let y=a*r;const w=y+t;for(;y<w&&!o[y];)y++;if(y===w)continue;v.moveTo(y%r,a);const T=y;let C=o[y];do{const R=m[C];do y+=R;while(!o[y]);const k=o[y];k!==5&&k!==10?(C=k,o[y]=0):(C=k&51*C>>4,o[y]&=C>>2|C<<2),v.lineTo(y%r,y/r|0),o[y]||--p}while(T!==y);--a}return d=null,o=null,function(y){y.save(),y.scale(1/t,-1/e),y.translate(0,-e),y.fill(v),y.beginPath(),y.restore()}}class My{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=VE,this.textMatrixScale=1,this.fontMatrix=e_,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Ae.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,s){[e,s]=Q.applyTransform([e,s],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(t,e){const s=Q.applyTransform(e,t),n=Q.applyTransform(e.slice(2),t),r=Q.applyTransform([e[0],e[3]],t),o=Q.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,s[0],n[0],r[0],o[0]),this.minY=Math.min(this.minY,s[1],n[1],r[1],o[1]),this.maxX=Math.max(this.maxX,s[0],n[0],r[0],o[0]),this.maxY=Math.max(this.maxY,s[1],n[1],r[1],o[1])}updateScalingPathMinMax(t,e){Q.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,s,n,r,o,a,c,h,u){const d=Q.bezierBoundingBox(e,s,n,r,o,a,c,h,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Ie.FILL,e=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ie.STROKE){e||Mt("Stroke bounding box must include transform.");const n=Q.singularValueDecompose2dScale(e),r=n[0]*this.lineWidth/2,o=n[1]*this.lineWidth/2;s[0]-=r,s[1]-=o,s[2]+=r,s[3]+=o}return s}updateClipFromPath(){const t=Q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ie.FILL,e=null){return Q.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Dy(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%$e,r=(e-n)/$e,o=n===0?r:r+1,a=i.createImageData(s,$e);let c=0,h;const u=t.data,d=a.data;let f,p,m,v;if(t.kind===Kd.GRAYSCALE_1BPP){const A=u.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),w=y.length,T=s+7>>3,C=4294967295,R=Be.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<r?$e:n,h=0,p=0;p<m;p++){const k=A-c;let I=0;const M=k>T?s:k*8-7,$=M&-8;let K=0,z=0;for(;I<$;I+=8)z=u[c++],y[h++]=z&128?C:R,y[h++]=z&64?C:R,y[h++]=z&32?C:R,y[h++]=z&16?C:R,y[h++]=z&8?C:R,y[h++]=z&4?C:R,y[h++]=z&2?C:R,y[h++]=z&1?C:R;for(;I<M;I++)K===0&&(z=u[c++],K=128),y[h++]=z&K?C:R,K>>=1}for(;h<w;)y[h++]=0;i.putImageData(a,0,f*$e)}}else if(t.kind===Kd.RGBA_32BPP){for(p=0,v=s*$e*4,f=0;f<r;f++)d.set(u.subarray(c,c+v)),c+=v,i.putImageData(a,0,p),p+=$e;f<o&&(v=s*n*4,d.set(u.subarray(c,c+v)),i.putImageData(a,0,p))}else if(t.kind===Kd.RGB_24BPP)for(m=$e,v=s*m,f=0;f<o;f++){for(f>=r&&(m=n,v=s*m),h=0,p=v;p--;)d[h++]=u[c++],d[h++]=u[c++],d[h++]=u[c++],d[h++]=255;i.putImageData(a,0,f*$e)}else throw new Error(`bad image kind: ${t.kind}`)}function Oy(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%$e,r=(e-n)/$e,o=n===0?r:r+1,a=i.createImageData(s,$e);let c=0;const h=t.data,u=a.data;for(let d=0;d<o;d++){const f=d<r?$e:n;({srcPos:c}=nP({src:h,srcPos:c,dest:u,width:s,height:f,nonBlackColor:0})),i.putImageData(a,0,d*$e)}}function sc(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Pd(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Re){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function Ny(i,t){if(t)return!0;const e=Q.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*Xn.PDF_TO_CSS_UNITS);return e[0]<=s&&e[1]<=s}const cP=["butt","round","square"],hP=["miter","round","bevel"],uP={},Fy={};var $h,L_,Hh,I_;const wv=class wv{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:a=null},c,h){g(this,$h);g(this,Hh);this.ctx=t,this.current=new My(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new aP(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Bt(this.compositeCtx))}this.ctx.save(),Pd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Bt(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let a=e||0;const c=r.length;if(c===a)return a;const h=c-a>Ly&&typeof s=="function",u=h?Date.now()+rP:0;let d=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,s),a;if(m=o[a],m!==ys.dependency)this[m].apply(this,r[a]);else for(const v of r[a]){const A=v.startsWith("g_")?f:p;if(!A.has(v))return A.get(v,s),a}if(a++,a===c)return a;if(h&&++d>Ly){if(Date.now()>u)return s(),a;d=0}}}endDrawing(){b(this,$h,L_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),b(this,Hh,I_).call(this)}_scaleImage(t,e){const s=t.width,n=t.height;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,c=n,h="prescale1",u,d;for(;r>2&&a>1||o>2&&c>1;){let f=a,p=c;r>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),u=this.cachedCanvases.getCanvas(h,f,p),d=u.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,a,c,0,0,f,p),t=u.canvas,a=f,c=p,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,a=Bt(e);let c,h,u,d;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(M),c||(c=new Map,this._cachedBitmapsMap.set(M,c));const $=c.get(h);if($&&!o){const K=Math.round(Math.min(a[0],a[2])+a[4]),z=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:$,offsetX:K,offsetY:z}}u=$}u||(d=this.cachedCanvases.getCanvas("maskCanvas",s,n),Oy(d.context,t));let f=Q.transform(a,[1/s,0,0,-1/n,0,0]);f=Q.transform(f,[1,0,0,1,0,-n]);const[p,m,v,A]=Q.getAxialAlignedBoundingBox([0,0,s,n],f),y=Math.round(v-p)||1,w=Math.round(A-m)||1,T=this.cachedCanvases.getCanvas("fillCanvas",y,w),C=T.context,R=p,k=m;C.translate(-R,-k),C.transform(...f),u||(u=this._scaleImage(d.canvas,_i(C)),u=u.img,c&&o&&c.set(h,u)),C.imageSmoothingEnabled=Ny(Bt(C),t.interpolate),kd(C,u,0,0,u.width,u.height,0,0,s,n),C.globalCompositeOperation="source-in";const I=Q.transform(_i(C),[1,0,0,1,-R,-k]);return C.fillStyle=o?r.getPattern(e,this,I,Ie.FILL):r,C.fillRect(0,0,s,n),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,T.canvas)),{canvas:T.canvas,offsetX:Math.round(R),offsetY:Math.round(k)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=cP[t]}setLineJoin(t){this.ctx.lineJoin=hP[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform(...Bt(this.suspendedCtx)),sc(this.suspendedCtx,r),oP(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),sc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],a=n[2]-r,c=n[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,s,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,a,c,h,u,d){let f=t.canvas,p=c-u,m=h-d;if(o){if(p<0||m<0||p+s>f.width||m+n>f.height){const A=this.cachedCanvases.getCanvas("maskExtension",s,n),y=A.context;y.drawImage(f,-p,-m),o.some(w=>w!==0)&&(y.globalCompositeOperation="destination-atop",y.fillStyle=Q.makeHexColor(...o),y.fillRect(0,0,s,n),y.globalCompositeOperation="source-over"),f=A.canvas,p=m=0}else if(o.some(A=>A!==0)){t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const A=new Path2D;A.rect(p,m,s,n),t.clip(A),t.globalCompositeOperation="destination-atop",t.fillStyle=Q.makeHexColor(...o),t.fillRect(p,m,s,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(c,h,s,n),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(f,p,m,s,n,c,h,s,n),e.restore()}save(){this.inSMaskMode?(sc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),sc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){const n=this.ctx,r=this.current;let o=r.x,a=r.y,c,h;const u=Bt(n),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,f=d?s.slice(0):null;for(let p=0,m=0,v=t.length;p<v;p++)switch(t[p]|0){case ys.rectangle:o=e[m++],a=e[m++];const A=e[m++],y=e[m++],w=o+A,T=a+y;n.moveTo(o,a),A===0||y===0?n.lineTo(w,T):(n.lineTo(w,a),n.lineTo(w,T),n.lineTo(o,T)),d||r.updateRectMinMax(u,[o,a,w,T]),n.closePath();break;case ys.moveTo:o=e[m++],a=e[m++],n.moveTo(o,a),d||r.updatePathMinMax(u,o,a);break;case ys.lineTo:o=e[m++],a=e[m++],n.lineTo(o,a),d||r.updatePathMinMax(u,o,a);break;case ys.curveTo:c=o,h=a,o=e[m+4],a=e[m+5],n.bezierCurveTo(e[m],e[m+1],e[m+2],e[m+3],o,a),r.updateCurvePathMinMax(u,c,h,e[m],e[m+1],e[m+2],e[m+3],o,a,f),m+=6;break;case ys.curveTo2:c=o,h=a,n.bezierCurveTo(o,a,e[m],e[m+1],e[m+2],e[m+3]),r.updateCurvePathMinMax(u,c,h,o,a,e[m],e[m+1],e[m+2],e[m+3],f),o=e[m+2],a=e[m+3],m+=4;break;case ys.curveTo3:c=o,h=a,o=e[m+2],a=e[m+3],n.bezierCurveTo(e[m],e[m+1],o,a,o,a),r.updateCurvePathMinMax(u,c,h,e[m],e[m+1],o,a,o,a,f),m+=4;break;case ys.closePath:n.closePath();break}d&&r.updateScalingPathMinMax(u,f),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,s=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(e.save(),e.strokeStyle=s.getPattern(e,this,_i(e),Ie.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;let r=!1;n&&(e.save(),e.fillStyle=s.getPattern(e,this,_i(e),Ie.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=uP}eoClip(){this.pendingClip=Fy}beginText(){this.current.textMatrix=VE,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const s of t)e.setTransform(...s.transform),e.translate(s.x,s.y),s.addToPath(e,s.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||e_,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&pt("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const c=s.italic?"italic":"normal";let h=e;e<ky?h=ky:e>Py&&(h=Py),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${a} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,s,n,r,o){this.current.textMatrix=[t,e,s,n,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n){const r=this.ctx,o=this.current,a=o.font,c=o.textRenderingMode,h=o.fontSize/o.fontSizeScale,u=c&Ae.FILL_STROKE_MASK,d=!!(c&Ae.ADD_TO_PATH_FLAG),f=o.patternFill&&!a.missingFile;let p;(a.disableFontFace||d||f)&&(p=a.getPathGenerator(this.commonObjs,t)),a.disableFontFace||f?(r.save(),r.translate(e,s),r.beginPath(),p(r,h),n&&r.setTransform(...n),(u===Ae.FILL||u===Ae.FILL_STROKE)&&r.fill(),(u===Ae.STROKE||u===Ae.FILL_STROKE)&&r.stroke(),r.restore()):((u===Ae.FILL||u===Ae.FILL_STROKE)&&r.fillText(t,e,s),(u===Ae.STROKE||u===Ae.FILL_STROKE)&&r.strokeText(t,e,s)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Bt(r),x:e,y:s,fontSize:h,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return At(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,d=t.length,f=s.vertical,p=f?1:-1,m=s.defaultVMetrics,v=n*e.fontMatrix[0],A=e.textRenderingMode===Ae.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let y;if(e.patternFill){r.save();const k=e.fillColor.getPattern(r,this,_i(r),Ie.FILL);y=Bt(r),r.restore(),r.fillStyle=k}let w=e.lineWidth;const T=e.textMatrixScale;if(T===0||w===0){const k=e.textRenderingMode&Ae.FILL_STROKE_MASK;(k===Ae.STROKE||k===Ae.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=T;if(o!==1&&(r.scale(o,o),w/=o),r.lineWidth=w,s.isInvalidPDFjsFont){const k=[];let I=0;for(const M of t)k.push(M.unicode),I+=M.width;r.fillText(k.join(""),0,0),e.x+=I*v*u,r.restore(),this.compose();return}let C=0,R;for(R=0;R<d;++R){const k=t[R];if(typeof k=="number"){C+=p*k*n/1e3;continue}let I=!1;const M=(k.isSpace?c:0)+a,$=k.fontChar,K=k.accent;let z,nt,et=k.width;if(f){const lt=k.vmetric||m,X=-(k.vmetric?lt[1]:et*.5)*v,V=lt[2]*v;et=lt?-lt[0]:et,z=X/o,nt=(C+V)/o}else z=C/o,nt=0;if(s.remeasure&&et>0){const lt=r.measureText($).width*1e3/n*o;if(et<lt&&this.isFontSubpixelAAEnabled){const X=et/lt;I=!0,r.save(),r.scale(X,1),z/=X}else et!==lt&&(z+=(et-lt)/2e3*n/o)}if(this.contentVisible&&(k.isInFont||s.missingFile)){if(A&&!K)r.fillText($,z,nt);else if(this.paintChar($,z,nt,y),K){const lt=z+n*K.offset.x/o,X=nt-n*K.offset.y/o;this.paintChar(K.fontChar,lt,X,y)}}const dt=f?et*v-M*h:et*v+M*h;C+=dt,I&&r.restore()}f?e.y-=C:e.x+=C*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,a=n.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,d=s.fontMatrix||e_,f=t.length,p=s.textRenderingMode===Ae.INVISIBLE;let m,v,A,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...s.textMatrix),e.translate(s.x,s.y),e.scale(u,o),m=0;m<f;++m){if(v=t[m],typeof v=="number"){y=a*v*r/1e3,this.ctx.translate(y,0),s.x+=y*u;continue}const w=(v.isSpace?h:0)+c,T=n.charProcOperatorList[v.operatorListId];if(!T){pt(`Type3 character "${v.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=v,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(T),this.restore()),A=Q.applyTransform([v.width,0],d)[0]*r+w,e.translate(A,0),s.x+=A*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){this.ctx.rect(s,n,r-s,o-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=t[1],n=this.baseTransform||Bt(this.ctx),r={createCanvasGraphics:o=>new wv(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new P_(t,s,this.ctx,r,n)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=Q.makeHexColor(t,e,s)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=Q.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=iP(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,_i(e),Ie.SHADING);const n=_i(e);if(n){const{width:r,height:o}=e.canvas,[a,c,h,u]=Q.getAxialAlignedBoundingBox([0,0,r,o],n);this.ctx.fillRect(a,c,h-a,u-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Mt("Should not call beginInlineImage")}beginImageData(){Mt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Bt(this.ctx),e)){const s=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],s,n),this.current.updateRectMinMax(Bt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Ug("TODO: Support non-isolated groups."),t.knockout&&pt("Knockout groups not supported.");const s=Bt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=Q.getAxialAlignedBoundingBox(t.bbox,Bt(e));const r=[0,0,e.canvas.width,e.canvas.height];n=Q.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),a=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,c,h),f=d.context;f.translate(-o,-a),f.transform(...s),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),sc(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Bt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=Q.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(b(this,$h,L_).call(this),Pd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a;const[c,h]=Q.singularValueDecompose2dScale(Bt(this.ctx)),{viewportScale:u}=this,d=Math.ceil(o*this.outputScaleX*u),f=Math.ceil(a*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,a*h),Pd(this.ctx)}else Pd(this.ctx),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.endPath()}this.current=new My(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),b(this,Hh,I_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=lP(t)),n.compiled)){n.compiled(s);return}const r=this._createMaskCanvas(t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const c=Bt(a);a.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);a.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,d=o.length;u<d;u+=2){const f=Q.transform(c,[e,s,n,r,o[u],o[u+1]]),[p,m]=Q.applyTransform([0,0],f);a.drawImage(h.canvas,p,m)}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:a,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,c),d=u.context;d.save();const f=this.getObject(o,r);Oy(d,f),d.globalCompositeOperation="source-in",d.fillStyle=n?s.getPattern(d,this,_i(e),Ie.FILL):s,d.fillRect(0,0,a,c),d.restore(),e.save(),e.transform(...h),e.scale(1,-1),kd(e,u.canvas,0,0,a,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){pt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){pt("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let h=0,u=n.length;h<u;h+=2)c.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;if(this.save(),!Re){const{filter:a}=n;a!=="none"&&a!==""&&(n.filter="none")}n.scale(1/e,-1/s);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const c=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Dy(c,t),r=this.applyTransferMapsToCanvas(c)}const o=this._scaleImage(r,_i(n));n.imageSmoothingEnabled=Ny(Bt(n),t.interpolate),kd(n,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Dy(c,t),n=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),kd(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(e||(this.pendingClip===Fy?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Bt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,a;if(s===0&&n===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=a=1/c;else{const u=c*t;o=a=u<1?1/u:1}else if(t===0)o=1/c,a=1/h;else{const u=c*t,d=h*t;o=u<1?1/u:1,a=d<1?1/d:1}}else{const c=Math.abs(e*r-s*n),h=Math.hypot(e,s),u=Math.hypot(n,r);if(t===0)o=u/c,a=h/c;else{const d=t*c;o=u>d?u/d:1,a=h>d?h/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:s}=this.current,[n,r]=this.getScaleForStroking();if(e.lineWidth=s||1,n===1&&r===1){e.stroke();return}const o=e.getLineDash();if(t&&e.save(),e.scale(n,r),o.length>0){const a=Math.max(n,r);e.setLineDash(o.map(c=>c/a)),e.lineDashOffset/=a}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};$h=new WeakSet,L_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Hh=new WeakSet,I_=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let fa=wv;for(const i in ys)fa.prototype[i]!==void 0&&(fa.prototype[ys[i]]=fa.prototype[i]);var Bh,jh;class tn{static get workerPort(){return l(this,Bh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");_(this,Bh,t)}static get workerSrc(){return l(this,jh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");_(this,jh,t)}}Bh=new WeakMap,jh=new WeakMap,g(tn,Bh,null),g(tn,jh,"");const Ld={UNKNOWN:0,DATA:1,ERROR:2},Yt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ze(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Bo(i.message);case"MissingPDFException":return new Ho(i.message);case"PasswordException":return new i_(i.message,i.code);case"UnexpectedResponseException":return new Wg(i.message,i.status);case"UnknownErrorException":return new n_(i.message,i.details);default:return new n_(i.message,i.toString())}}var vp,Sw,yp,Cw,Ma,Jd;class gc{constructor(t,e,s){g(this,vp);g(this,yp);g(this,Ma);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=n=>{const r=n.data;if(r.targetName!==this.sourceName)return;if(r.stream){b(this,yp,Cw).call(this,r);return}if(r.callback){const a=r.callbackId,c=this.callbackCapabilities[a];if(!c)throw new Error(`Cannot resolve callback ${a}`);if(delete this.callbackCapabilities[a],r.callback===Ld.DATA)c.resolve(r.data);else if(r.callback===Ld.ERROR)c.reject(ze(r.reason));else throw new Error("Unexpected callback case");return}const o=this.actionHandler[r.action];if(!o)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const a=this.sourceName,c=r.sourceName;new Promise(function(h){h(o(r.data))}).then(function(h){s.postMessage({sourceName:a,targetName:c,callback:Ld.DATA,callbackId:r.callbackId,data:h})},function(h){s.postMessage({sourceName:a,targetName:c,callback:Ld.ERROR,callbackId:r.callbackId,reason:ze(h)})});return}if(r.streamId){b(this,vp,Sw).call(this,r);return}o(r.data)},s.addEventListener("message",this._onComObjOnMessage)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:a,stream:Yt.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{se(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Yt.CANCEL,streamId:r,reason:ze(h)}),u.promise}},s)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}vp=new WeakSet,Sw=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(h,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:Yt.ENQUEUE,streamId:e,chunk:h},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Yt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){se(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Yt.ERROR,streamId:e,reason:ze(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,new Promise(function(h){h(a(t.data,c))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Yt.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Yt.START_COMPLETE,streamId:e,reason:ze(h)})})},yp=new WeakSet,Cw=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Yt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ze(t.reason));break;case Yt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ze(t.reason));break;case Yt.PULL:if(!a){r.postMessage({sourceName:s,targetName:n,stream:Yt.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,new Promise(function(c){var h;c((h=a.onPull)==null?void 0:h.call(a))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Yt.PULL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:n,stream:Yt.PULL_COMPLETE,streamId:e,reason:ze(c)})});break;case Yt.ENQUEUE:if(se(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Yt.CLOSE:if(se(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),b(this,Ma,Jd).call(this,o,e);break;case Yt.ERROR:se(o,"error should have stream controller"),o.controller.error(ze(t.reason)),b(this,Ma,Jd).call(this,o,e);break;case Yt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ze(t.reason)),b(this,Ma,Jd).call(this,o,e);break;case Yt.CANCEL:if(!a)break;new Promise(function(c){var h;c((h=a.onCancel)==null?void 0:h.call(a,ze(t.reason)))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Yt.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){r.postMessage({sourceName:s,targetName:n,stream:Yt.CANCEL_COMPLETE,streamId:e,reason:ze(c)})}),a.sinkCapability.reject(ze(t.reason)),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ma=new WeakSet,Jd=async function(t,e){var s,n,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Hr,Vh;class dP{constructor({parsedData:t,rawData:e}){g(this,Hr,void 0);g(this,Vh,void 0);_(this,Hr,t),_(this,Vh,e)}getRaw(){return l(this,Vh)}get(t){return l(this,Hr).get(t)??null}getAll(){return Gb(l(this,Hr))}has(t){return l(this,Hr).has(t)}}Hr=new WeakMap,Vh=new WeakMap;const fn=Symbol("INTERNAL");var Uh,Wh,zh,Da;class fP{constructor(t,{name:e,intent:s,usage:n}){g(this,Uh,!1);g(this,Wh,!1);g(this,zh,!1);g(this,Da,!0);_(this,Uh,!!(t&ss.DISPLAY)),_(this,Wh,!!(t&ss.PRINT)),this.name=e,this.intent=s,this.usage=n}get visible(){if(l(this,zh))return l(this,Da);if(!l(this,Da))return!1;const{print:t,view:e}=this.usage;return l(this,Uh)?(e==null?void 0:e.viewState)!=="OFF":l(this,Wh)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==fn&&Mt("Internal method `_setVisible` called."),_(this,zh,s),_(this,Da,e)}}Uh=new WeakMap,Wh=new WeakMap,zh=new WeakMap,Da=new WeakMap;var xn,It,Oa,Na,Kh,M_;class pP{constructor(t,e=ss.DISPLAY){g(this,Kh);g(this,xn,null);g(this,It,new Map);g(this,Oa,null);g(this,Na,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,_(this,Na,t.order);for(const s of t.groups)l(this,It).set(s.id,new fP(e,s));if(t.baseState==="OFF")for(const s of l(this,It).values())s._setVisible(fn,!1);for(const s of t.on)l(this,It).get(s)._setVisible(fn,!0);for(const s of t.off)l(this,It).get(s)._setVisible(fn,!1);_(this,Oa,this.getHash())}}isVisible(t){if(l(this,It).size===0)return!0;if(!t)return Ug("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,It).has(t.id)?l(this,It).get(t.id).visible:(pt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return b(this,Kh,M_).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(l(this,It).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(!l(this,It).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(!l(this,It).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,It).has(e))return pt(`Optional content group not found: ${e}`),!0;if(l(this,It).get(e).visible)return!1}return!0}return pt(`Unknown optional content policy ${t.policy}.`),!0}return pt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){const s=l(this,It).get(t);if(!s){pt(`Optional content group not found: ${t}`);return}s._setVisible(fn,!!e,!0),_(this,xn,null)}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=l(this,It).get(n);if(r)switch(s){case"ON":r._setVisible(fn,!0);break;case"OFF":r._setVisible(fn,!1);break;case"Toggle":r._setVisible(fn,!r.visible);break}}_(this,xn,null)}get hasInitialVisibility(){return l(this,Oa)===null||this.getHash()===l(this,Oa)}getOrder(){return l(this,It).size?l(this,Na)?l(this,Na).slice():[...l(this,It).keys()]:null}getGroups(){return l(this,It).size>0?Gb(l(this,It)):null}getGroup(t){return l(this,It).get(t)||null}getHash(){if(l(this,xn)!==null)return l(this,xn);const t=new yw;for(const[e,s]of l(this,It))t.update(`${e}:${s.visible}`);return _(this,xn,t.hexdigest())}}xn=new WeakMap,It=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Kh=new WeakSet,M_=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=b(this,Kh,M_).call(this,r);else if(l(this,It).has(r))o=l(this,It).get(r).visible;else return pt(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class gP{constructor(t,{disableRange:e=!1,disableStream:s=!1}){se(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});se(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,n,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){se(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new mP(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new _P(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class mP{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=Qb(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _P{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function bP(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let u=a(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(i),e){e=e[1];let u=a(e);return u=h(u),r(u)}function s(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function n(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),p=zg(d);d=f.decode(p),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){const d=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,v,A,y]=f;if(v=parseInt(v,10),v in d){if(v===0)break;continue}d[v]=[A,y]}const m=[];for(let v=0;v<d.length&&v in d;++v){let[A,y]=d[v];y=a(y),A&&(y=unescape(y),v===0&&(y=c(y))),m.push(y)}return m.join("")}function a(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function c(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),m=u.slice(d+1).replace(/^[^']*'/,"");return n(f,m)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,A){return String.fromCharCode(parseInt(A,16))}),n(f,m);try{m=atob(m)}catch{}return n(f,m)})}return""}function tv({getResponseHeader:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function ev(i){const t=i("Content-Disposition");if(t){let e=bP(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Qb(e))return e}return null}function Qg(i,t){return i===404||i===0&&t.startsWith("file:")?new Ho('Missing PDF "'+t+'".'):new Wg(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function Tw(i){return i===200||i===206}function xw(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Rw(i){const t=new Headers;for(const e in i){const s=i[e];s!==void 0&&t.append(e,s)}return t}function kw(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(pt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class $y{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return se(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vP(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new yP(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class vP{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=Rw(this._stream.httpHeaders);const s=e.url;fetch(s,xw(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!Tw(n.status))throw Qg(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();const r=c=>n.headers.get(c),{allowRangeRequests:o,suggestedLength:a}=tv({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=a||this._contentLength,this._filename=ev(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Bo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:kw(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class yP{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=Rw(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${s-1}`);const r=n.url;fetch(r,xw(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!Tw(o.status))throw Qg(o.status,r);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:kw(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Am=200,Em=206;function AP(i){const t=i.response;return typeof t!="string"?t:zg(t).buffer}class EP{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,s){const n={begin:t,end:e};for(const r in s)n[r]=s[r];return this.request(n)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const o=this.httpHeaders[r];o!==void 0&&e.setRequestHeader(r,o)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Em):n.expectedStatus=Am,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){var c,h,u;const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){(c=s.onError)==null||c.call(s,n.status);return}const r=n.status||Am;if(!(r===Am&&s.expectedStatus===Em)&&r!==s.expectedStatus){(h=s.onError)==null||h.call(s,n.status);return}const a=AP(n);if(r===Em){const d=n.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);s.onDone({begin:parseInt(f[1],10),chunk:a})}else a?s.onDone({begin:0,chunk:a}):(u=s.onError)==null||u.call(s,n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class wP{constructor(t){this._source=t,this._manager=new EP(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return se(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new SP(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new CP(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class SP{constructor(t,e){this._manager=t;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(s),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),s=o=>e.getResponseHeader(o),{allowRangeRequests:n,suggestedLength:r}=tv({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=ev(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Qg(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class CP{constructor(t,e,s){this._manager=t;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,s,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Qg(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Pw=/^file:\/\/\/[a-zA-Z]:\//;function TP(i){const t=fi.get("url"),e=t.parse(i);return e.protocol==="file:"||e.host?e:/^[a-z]:[/\\]/i.test(i)?t.parse(`file:///${i}`):(e.host||(e.protocol="file:"),e)}class xP{constructor(t){this.source=t,this.url=TP(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return se(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new PP(this):new RP(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=this.isFsUrl?new LP(this,t,e):new kP(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class Lw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Bo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Iw{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Lf(i,t){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:t}}class RP extends Lw{constructor(t){super(t);const e=s=>{if(s.statusCode===404){const a=new Ho(`Missing PDF "${this._url}".`);this._storedError=a,this._headersCapability.reject(a);return}this._headersCapability.resolve(),this._setReadableStream(s);const n=a=>this._readableStream.headers[a.toLowerCase()],{allowRangeRequests:r,suggestedLength:o}=tv({getResponseHeader:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=ev(n)};if(this._request=null,this._url.protocol==="http:"){const s=fi.get("http");this._request=s.request(Lf(this._url,t.httpHeaders),e)}else{const s=fi.get("https");this._request=s.request(Lf(this._url,t.httpHeaders),e)}this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class kP extends Iw{constructor(t,e,s){super(t),this._httpHeaders={};for(const r in t.httpHeaders){const o=t.httpHeaders[r];o!==void 0&&(this._httpHeaders[r]=o)}this._httpHeaders.Range=`bytes=${e}-${s-1}`;const n=r=>{if(r.statusCode===404){const o=new Ho(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=fi.get("http");this._request=r.request(Lf(this._url,this._httpHeaders),n)}else{const r=fi.get("https");this._request=r.request(Lf(this._url,this._httpHeaders),n)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class PP extends Lw{constructor(t){super(t);let e=decodeURIComponent(this._url.path);Pw.test(this._url.href)&&(e=e.replace(/^\//,""));const s=fi.get("fs");s.promises.lstat(e).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(e)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new Ho(`Missing PDF "${e}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class LP extends Iw{constructor(t,e,s){super(t);let n=decodeURIComponent(this._url.path);Pw.test(this._url.href)&&(n=n.replace(/^\//,""));const r=fi.get("fs");this._setReadableStream(r.createReadStream(n,{start:e,end:s-1}))}}const IP=1e5,Oe=30,MP=.8;var CA,Rn,Fe,Gh,qh,Br,Mi,Yh,Xh,jr,Fa,$a,kn,Ha,Qh,Ba,Vr,Jh,Zh,Ur,Wr,Pn,ja,Ap,Mw,Ep,Dw,tu,D_,Va,Zd,wp,Ow,Sp,Nw;const oe=class oe{constructor({textContentSource:t,container:e,viewport:s}){g(this,Ap);g(this,Ep);g(this,tu);g(this,Rn,Promise.withResolvers());g(this,Fe,null);g(this,Gh,!1);g(this,qh,!!((CA=globalThis.FontInspector)!=null&&CA.enabled));g(this,Br,null);g(this,Mi,null);g(this,Yh,0);g(this,Xh,0);g(this,jr,null);g(this,Fa,null);g(this,$a,0);g(this,kn,0);g(this,Ha,Object.create(null));g(this,Qh,[]);g(this,Ba,null);g(this,Vr,[]);g(this,Jh,new WeakMap);g(this,Zh,null);var c;if(t instanceof ReadableStream)_(this,Ba,t);else if(typeof t=="object")_(this,Ba,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');_(this,Fe,_(this,Fa,e)),_(this,kn,s.scale*(globalThis.devicePixelRatio||1)),_(this,$a,s.rotation),_(this,Mi,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:o,pageY:a}=s.rawDims;_(this,Zh,[1,0,0,-1,-o,a+r]),_(this,Xh,n),_(this,Yh,r),b(c=oe,wp,Ow).call(c),Io(e,s),l(this,Rn).promise.catch(()=>{}).then(()=>{l(oe,ja).delete(this),_(this,Mi,null),_(this,Ha,null)})}render(){const t=()=>{l(this,jr).read().then(({value:e,done:s})=>{if(s){l(this,Rn).resolve();return}l(this,Br)??_(this,Br,e.lang),Object.assign(l(this,Ha),e.styles),b(this,Ap,Mw).call(this,e.items),t()},l(this,Rn).reject)};return _(this,jr,l(this,Ba).getReader()),l(oe,ja).add(this),t(),l(this,Rn).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*(globalThis.devicePixelRatio||1),n=t.rotation;if(n!==l(this,$a)&&(e==null||e(),_(this,$a,n),Io(l(this,Fa),{rotation:n})),s!==l(this,kn)){e==null||e(),_(this,kn,s);const o={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:b(r=oe,Va,Zd).call(r,l(this,Br))};for(const a of l(this,Vr))o.properties=l(this,Jh).get(a),o.div=a,b(this,tu,D_).call(this,o)}}cancel(){var e;const t=new Bo("TextLayer task cancelled.");(e=l(this,jr))==null||e.cancel(t).catch(()=>{}),_(this,jr,null),l(this,Rn).reject(t)}get textDivs(){return l(this,Vr)}get textContentItemsStr(){return l(this,Qh)}static cleanup(){if(!(l(this,ja).size>0)){l(this,Ur).clear();for(const{canvas:t}of l(this,Wr).values())t.remove();l(this,Wr).clear()}}};Rn=new WeakMap,Fe=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Br=new WeakMap,Mi=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,jr=new WeakMap,Fa=new WeakMap,$a=new WeakMap,kn=new WeakMap,Ha=new WeakMap,Qh=new WeakMap,Ba=new WeakMap,Vr=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,Ur=new WeakMap,Wr=new WeakMap,Pn=new WeakMap,ja=new WeakMap,Ap=new WeakSet,Mw=function(t){var n,r;if(l(this,Gh))return;(r=l(this,Mi)).ctx??(r.ctx=b(n=oe,Va,Zd).call(n,l(this,Br)));const e=l(this,Vr),s=l(this,Qh);for(const o of t){if(e.length>IP){pt("Ignoring additional textDivs for performance reasons."),_(this,Gh,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Fe);_(this,Fe,document.createElement("span")),l(this,Fe).classList.add("markedContent"),o.id!==null&&l(this,Fe).setAttribute("id",`${o.id}`),a.append(l(this,Fe))}else o.type==="endMarkedContent"&&_(this,Fe,l(this,Fe).parentNode);continue}s.push(o.str),b(this,Ep,Dw).call(this,o)}},Ep=new WeakSet,Dw=function(t){var v;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,Vr).push(e);const n=Q.transform(l(this,Zh),t.transform);let r=Math.atan2(n[1],n[0]);const o=l(this,Ha)[t.fontName];o.vertical&&(r+=Math.PI/2);const a=l(this,qh)&&o.fontSubstitution||o.fontFamily,c=Math.hypot(n[2],n[3]),h=c*b(v=oe,Sp,Nw).call(v,a,l(this,Br));let u,d;r===0?(u=n[4],d=n[5]-h):(u=n[4]+h*Math.sin(r),d=n[5]-h*Math.cos(r));const f="calc(var(--scale-factor)*",p=e.style;l(this,Fe)===l(this,Fa)?(p.left=`${(100*u/l(this,Xh)).toFixed(2)}%`,p.top=`${(100*d/l(this,Yh)).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(l(oe,Pn)*c).toFixed(2)}px)`,p.fontFamily=a,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,qh)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(t.str.length>1)m=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),y=Math.abs(t.transform[3]);A!==y&&Math.max(A,y)/Math.min(A,y)>1.5&&(m=!0)}if(m&&(s.canvasWidth=o.vertical?t.height:t.width),l(this,Jh).set(e,s),l(this,Mi).div=e,l(this,Mi).properties=s,b(this,tu,D_).call(this,l(this,Mi)),s.hasText&&l(this,Fe).append(e),s.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),l(this,Fe).append(A)}},tu=new WeakSet,D_=function(t){const{div:e,properties:s,ctx:n,prevFontSize:r,prevFontFamily:o}=t,{style:a}=e;let c="";if(l(oe,Pn)>1&&(c=`scale(${1/l(oe,Pn)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=a,{canvasWidth:u,fontSize:d}=s;(r!==d||o!==h)&&(n.font=`${d*l(this,kn)}px ${h}`,t.prevFontSize=d,t.prevFontFamily=h);const{width:f}=n.measureText(e.textContent);f>0&&(c=`scaleX(${u*l(this,kn)/f}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(a.transform=c)},Va=new WeakSet,Zd=function(t=null){let e=l(this,Wr).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Wr).set(t,e)}return e},wp=new WeakSet,Ow=function(){if(l(this,Pn)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),_(this,Pn,t.getBoundingClientRect().height),t.remove()},Sp=new WeakSet,Nw=function(t,e){const s=l(this,Ur).get(t);if(s)return s;const n=b(this,Va,Zd).call(this,e),r=n.font;n.canvas.width=n.canvas.height=Oe,n.font=`${Oe}px ${t}`;const o=n.measureText("");let a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);if(a){const d=a/(a+c);return l(this,Ur).set(t,d),n.canvas.width=n.canvas.height=0,n.font=r,d}n.strokeStyle="red",n.clearRect(0,0,Oe,Oe),n.strokeText("g",0,0);let h=n.getImageData(0,0,Oe,Oe).data;c=0;for(let d=h.length-1-3;d>=0;d-=4)if(h[d]>0){c=Math.ceil(d/4/Oe);break}n.clearRect(0,0,Oe,Oe),n.strokeText("A",0,Oe),h=n.getImageData(0,0,Oe,Oe).data,a=0;for(let d=0,f=h.length;d<f;d+=4)if(h[d]>0){a=Oe-Math.floor(d/4/Oe);break}n.canvas.width=n.canvas.height=0,n.font=r;const u=a?a/(a+c):MP;return l(this,Ur).set(t,u),u},g(oe,Va),g(oe,wp),g(oe,Sp),g(oe,Ur,new Map),g(oe,Wr,new Map),g(oe,Pn,null),g(oe,ja,new Set);let Uc=oe;class Wc{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(Wc.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)n(h)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const DP=65536,OP=100,NP=5e3,FP=Re?Xk:Fk,$P=Re?Qk:GE,HP=Re?Yk:Nk,BP=Re?Jk:qE;function jP(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new O_,{docId:e}=t,s=i.url?VP(i.url):null,n=i.data?UP(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,c=i.range instanceof Fw?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:DP;let u=i.worker instanceof pa?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Xg(i.docBaseUrl)?i.docBaseUrl:null,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,m=i.cMapPacked!==!1,v=i.CMapReaderFactory||$P,A=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,y=i.StandardFontDataFactory||BP,w=i.stopAtErrors!==!0,T=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,C=i.isEvalSupported!==!1,R=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Re,k=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,I=typeof i.disableFontFace=="boolean"?i.disableFontFace:Re,M=i.fontExtraProperties===!0,$=i.enableXfa===!0,K=i.ownerDocument||globalThis.document,z=i.disableRange===!0,nt=i.disableStream===!0,et=i.disableAutoFetch===!0,dt=i.pdfBug===!0,lt=i.enableHWA===!0,X=c?c.length:i.length??NaN,V=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Re&&!I,G=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:v===GE&&y===qE&&p&&A&&dc(p,document.baseURI)&&dc(A,document.baseURI),jt=i.canvasFactory||new FP({ownerDocument:K,enableHWA:lt}),ne=i.filterFactory||new HP({docId:e,ownerDocument:K}),Xt=null;Ck(d);const gt={canvasFactory:jt,filterFactory:ne};if(G||(gt.cMapReaderFactory=new v({baseUrl:p,isCompressed:m}),gt.standardFontDataFactory=new y({baseUrl:A})),!u){const Ut={verbosity:d,port:tn.workerPort};u=Ut.port?pa.fromPort(Ut):new pa(Ut),t._worker=u}const Rt={docId:e,apiVersion:"4.5.136",data:n,password:a,disableAutoFetch:et,rangeChunkSize:h,length:X,docBaseUrl:f,enableXfa:$,evaluatorOptions:{maxImageSize:T,disableFontFace:I,ignoreErrors:w,isEvalSupported:C,isOffscreenCanvasSupported:R,canvasMaxAreaInBytes:k,fontExtraProperties:M,useSystemFonts:V,cMapUrl:G?p:null,standardFontDataUrl:G?A:null}},re={disableFontFace:I,fontExtraProperties:M,ownerDocument:K,pdfBug:dt,styleElement:Xt,loadingParams:{disableAutoFetch:et,enableXfa:$}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ut=u.messageHandler.sendWithPromise("GetDocRequest",Rt,n?[n.buffer]:null);let Ct;if(c)Ct=new gP(c,{disableRange:z,disableStream:nt});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");Ct=(U=>Re?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&dc(U.url)?new $y(U):new xP(U):dc(U.url)?new $y(U):new wP(U))({url:s,length:X,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:z,disableStream:nt})}return Ut.then(P=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const U=new gc(e,P,u.port),W=new GP(U,t,Ct,re,gt);t._transport=W,U.send("Ready",null)})}).catch(t._capability.reject),t}function VP(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Re&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function UP(i){if(Re&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return zg(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Hy(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Cp;const Tp=class Tp{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${We(Tp,Cp)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(n){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Cp=new WeakMap,g(Tp,Cp,0);let O_=Tp;class Fw{constructor(t,e,s=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class WP{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return At(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ln,Di,In,ta,Ua,tf;class zP{constructor(t,e,s,n=!1){g(this,In);g(this,Ua);g(this,Ln,null);g(this,Di,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new Cy:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new $w,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new pd({viewBox:this.view,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return At(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=_n.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:d=!1}){var C,R;(C=this._stats)==null||C.time("Overall");const f=this._transport.getRenderingIntent(s,n,u,d),{renderingIntent:p,cacheKey:m}=f;_(this,Di,!1),b(this,Ua,tf).call(this),a||(a=this._transport.getOptionalContentConfig(p));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const A=!!(p&ss.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(f));const y=k=>{var I;v.renderTasks.delete(w),(this._maybeCleanupAfterRender||A)&&_(this,Di,!0),b(this,In,ta).call(this,!A),k?(w.capability.reject(k),this._abortOperatorList({intentState:v,reason:k instanceof Error?k:new Error(k)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new F_({callback:y,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h});(v.renderTasks||(v.renderTasks=new Set)).add(w);const T=w.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([k,I])=>{var M;if(this.destroyed){y();return}if((M=this._stats)==null||M.time("Rendering"),!(I.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:k,optionalContentConfig:I}),w.operatorListChanged()}).catch(y),T}getOperatorList({intent:t="display",annotationMode:e=_n.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Wc.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:c,done:h}){if(h){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},n)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),_(this,Di,!1),b(this,Ua,tf).call(this),Promise.all(t)}cleanup(t=!1){_(this,Di,!0);const e=b(this,In,ta).call(this,!1);return t&&e&&this._stats&&(this._stats=new Cy),e}_startRenderPage(t,e){var n,r;const s=this._intentStates.get(e);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&b(this,In,ta).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:d,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,h),u())},d=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();b(this,In,ta).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(d);else if(h.opListReadCapability)h.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Xb){let n=OP;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Bo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}Ln=new WeakMap,Di=new WeakMap,In=new WeakSet,ta=function(t=!1){if(b(this,Ua,tf).call(this),!l(this,Di)||this.destroyed)return!1;if(t)return _(this,Ln,setTimeout(()=>{_(this,Ln,null),b(this,In,ta).call(this,!1)},NP)),!1;for(const{renderTasks:e,operatorList:s}of this._intentStates.values())if(e.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_(this,Di,!1),!0},Ua=new WeakSet,tf=function(){l(this,Ln)&&(clearTimeout(l(this,Ln)),_(this,Ln,null))};var zr,xp;class KP{constructor(){g(this,zr,new Set);g(this,xp,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};l(this,xp).then(()=>{for(const n of l(this,zr))n.call(this,s)})}addEventListener(t,e){l(this,zr).add(e)}removeEventListener(t,e){l(this,zr).delete(e)}terminate(){l(this,zr).clear()}}zr=new WeakMap,xp=new WeakMap;const Si={isWorkerDisabled:!1,fakeWorkerId:0};Re&&(Si.isWorkerDisabled=!0,tn.workerSrc||(tn.workerSrc="./pdf.worker.mjs")),Si.isSameOrigin=function(i,t){let e;try{if(e=new URL(i),!e.origin||e.origin==="null")return!1}catch{return!1}const s=new URL(t,e);return e.origin===s.origin},Si.createCDNWrapper=function(i){const t=`await import("${i}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var Kr,Wa,ef,za,sf;const Ke=class Ke{constructor({name:t=null,port:e=null,verbosity:s=Tk()}={}){g(this,Wa);var n;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((n=l(Ke,Kr))!=null&&n.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(Ke,Kr)||_(Ke,Kr,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Re?Promise.all([fi.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new gc("main","worker",t),this._messageHandler.on("ready",function(){}),b(this,Wa,ef).call(this)}_initialize(){if(Si.isWorkerDisabled||l(Ke,za,sf)){this._setupFakeWorker();return}let{workerSrc:t}=Ke;try{Si.isSameOrigin(window.location.href,t)||(t=Si.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new gc("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){n();return}this._messageHandler=s,this._port=e,this._webWorker=e,b(this,Wa,ef).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{Ug("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Si.isWorkerDisabled||(pt("Setting up fake worker."),Si.isWorkerDisabled=!0),Ke._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new KP;this._port=e;const s=`fake${Si.fakeWorkerId++}`,n=new gc(s+"_worker",s,e);t.setup(n,e),this._messageHandler=new gc(s,s+"_worker",e),b(this,Wa,ef).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=l(Ke,Kr))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=l(this,Kr))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ke(t)}static get workerSrc(){if(tn.workerSrc)return tn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return At(this,"_setupFakeWorkerGlobal",(async()=>l(this,za,sf)?l(this,za,sf):(await lc(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Kr=new WeakMap,Wa=new WeakSet,ef=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},za=new WeakSet,sf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},g(Ke,za),g(Ke,Kr,void 0);let pa=Ke;var Oi,Xs,Ka,Ga,Qs,Gr,mc;class GP{constructor(t,e,s,n,r){g(this,Gr);g(this,Oi,new Map);g(this,Xs,new Map);g(this,Ka,new Map);g(this,Ga,new Map);g(this,Qs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new $w,this.fontLoader=new Gk({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return At(this,"annotationStorage",new Zb)}getRenderingIntent(t,e=_n.ENABLE,s=null,n=!1,r=!1){let o=ss.DISPLAY,a=x_;switch(t){case"any":o=ss.ANY;break;case"display":break;case"print":o=ss.PRINT;break;default:pt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&ss.PRINT&&s instanceof Ew?s:this.annotationStorage;switch(e){case _n.DISABLE:o+=ss.ANNOTATIONS_DISABLE;break;case _n.ENABLE:break;case _n.ENABLE_FORMS:o+=ss.ANNOTATIONS_FORMS;break;case _n.ENABLE_STORAGE:o+=ss.ANNOTATIONS_STORAGE,a=c.serializable;break;default:pt(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=ss.IS_EDITING),r&&(o+=ss.OPLIST);const{ids:h,hash:u}=c.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,Qs))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of l(this,Xs).values())t.push(n._destroy());l(this,Xs).clear(),l(this,Ka).clear(),l(this,Ga).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Oi).clear(),this.filterFactory.destroy(),Uc.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Bo("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{se(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}se(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",s=>{const n=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var o;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),r.onProgress=a=>{var c;(c=e.onProgress)==null||c.call(e,{loaded:a.loaded,total:a.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},n.reject),n.promise}),t.on("GetRangeReader",(s,n)=>{se(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){n.close();return}se(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new WP(s,this))}),t.on("DocException",function(s){let n;switch(s.name){case"PasswordException":n=new i_(s.message,s.code);break;case"InvalidPDFException":n=new UE(s.message);break;case"MissingPDFException":n=new Ho(s.message);break;case"UnexpectedResponseException":n=new Wg(s.message,s.status);break;case"UnknownErrorException":n=new n_(s.message,s.details);break;default:Mt("DocException - expected a valid Error.")}e._capability.reject(n)}),t.on("PasswordRequest",s=>{if(_(this,Qs,Promise.withResolvers()),e.onPassword){const n=r=>{r instanceof Error?l(this,Qs).reject(r):l(this,Qs).resolve({password:r})};try{e.onPassword(n,s.code)}catch(r){l(this,Qs).reject(r)}}else l(this,Qs).reject(new i_(s.message,s.code));return l(this,Qs).promise}),t.on("DataLoaded",s=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Xs).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":const{disableFontFace:a,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in r){const p=r.error;pt(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const u=h&&((o=globalThis.FontInspector)!=null&&o.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new qk(r,{disableFontFace:a,inspectFont:u});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c&&d.data&&(d.data=null),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=r;se(f,"The imageRef must be defined.");for(const p of l(this,Xs).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{var c;if(this.destroyed)return;const a=l(this,Xs).get(n);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":a.objs.resolve(s,o),(o==null?void 0:o.dataLen)>Ak&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&pt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=l(this,Ka).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,Ga).set(r.refStr,t);const o=new zP(e,r,this,this._params.pdfBug);return l(this,Xs).set(e,o),o});return l(this,Ka).set(e,n),n}getPageIndex(t){return Hy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return b(this,Gr,mc).call(this,"GetFieldObjects")}hasJSActions(){return b(this,Gr,mc).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return b(this,Gr,mc).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return b(this,Gr,mc).call(this,"GetOptionalContentConfig").then(e=>new pP(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,Oi).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var r,o;return{info:n[0],metadata:n[1]?new dP(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Oi).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,Xs).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,Oi).clear(),this.filterFactory.destroy(!0),Uc.cleanup()}}cachedPageNumber(t){if(!Hy(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Ga).get(e)??null}}Oi=new WeakMap,Xs=new WeakMap,Ka=new WeakMap,Ga=new WeakMap,Qs=new WeakMap,Gr=new WeakSet,mc=function(t,e=null){const s=l(this,Oi).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return l(this,Oi).set(t,n),n};const Id=Symbol("INITIAL_DATA");var Ts,eu,N_;class $w{constructor(){g(this,eu);g(this,Ts,Object.create(null))}get(t,e=null){if(e){const n=b(this,eu,N_).call(this,t);return n.promise.then(()=>e(n.data)),null}const s=l(this,Ts)[t];if(!s||s.data===Id)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=l(this,Ts)[t];return!!e&&e.data!==Id}resolve(t,e=null){const s=b(this,eu,N_).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in l(this,Ts)){const{data:s}=l(this,Ts)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}_(this,Ts,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,Ts)){const{data:e}=l(this,Ts)[t];e!==Id&&(yield[t,e])}}}Ts=new WeakMap,eu=new WeakSet,N_=function(t){var e;return(e=l(this,Ts))[t]||(e[t]={...Promise.withResolvers(),data:Id})};var Mn;class qP{constructor(t){g(this,Mn,null);_(this,Mn,t),this.onContinue=null}get promise(){return l(this,Mn).capability.promise}cancel(t=0){l(this,Mn).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,Mn).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,Mn);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Mn=new WeakMap;var Dn,qr;const dr=class dr{constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){g(this,Dn,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new qP(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(dr,qr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(dr,qr).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new fa(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,Dn)&&(window.cancelAnimationFrame(l(this,Dn)),_(this,Dn,null)),l(dr,qr).delete(this._canvas),this.callback(t||new Xb(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?_(this,Dn,window.requestAnimationFrame(()=>{_(this,Dn,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(dr,qr).delete(this._canvas),this.callback())))}};Dn=new WeakMap,qr=new WeakMap,g(dr,qr,new WeakSet);let F_=dr;const YP="4.5.136",XP="3a21f03b0";function By(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function ic(i){return Math.max(0,Math.min(255,255*i))}class jy{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ic(t),[t,t,t]}static G_HTML([t]){const e=By(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(ic)}static RGB_HTML(t){return`#${t.map(By).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[ic(1-Math.min(1,t+n)),ic(1-Math.min(1,s+n)),ic(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,a=Math.min(n,r,o);return["CMYK",n,r,o,a]}}class Hw{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{n.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var d,f;const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const p=document.createTextNode(n.value);o.append(p),a&&Wc.shouldBuildText(n.name)&&h.push(p)}return{textDivs:h}}const u=[[n,-1,o]];for(;u.length>0;){const[p,m,v]=u.at(-1);if(m+1===p.children.length){u.pop();continue}const A=p.children[++u.at(-1)[1]];if(A===null)continue;const{name:y}=A;if(y==="#text"){const T=document.createTextNode(A.value);h.push(T),v.append(T);continue}const w=(d=A==null?void 0:A.attributes)!=null&&d.xmlns?document.createElementNS(A.attributes.xmlns,y):document.createElement(y);if(v.append(w),A.attributes&&this.setAttributes({html:w,element:A,storage:e,intent:r,linkService:s}),((f=A.children)==null?void 0:f.length)>0)u.push([A,-1,w]);else if(A.value){const T=document.createTextNode(A.value);a&&Wc.shouldBuildText(y)&&h.push(T),w.append(T)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const _d=1e3,QP=9,Do=new WeakSet;function en(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class JP{static create(t){switch(t.data.annotationType){case Qt.LINK:return new Bw(t);case Qt.TEXT:return new ZP(t);case Qt.WIDGET:switch(t.data.fieldType){case"Tx":return new tL(t);case"Btn":return t.data.radioButton?new Uw(t):t.data.checkBox?new sL(t):new iL(t);case"Ch":return new nL(t);case"Sig":return new eL(t)}return new jo(t);case Qt.POPUP:return new H_(t);case Qt.FREETEXT:return new qw(t);case Qt.LINE:return new oL(t);case Qt.SQUARE:return new aL(t);case Qt.CIRCLE:return new lL(t);case Qt.POLYLINE:return new Yw(t);case Qt.CARET:return new hL(t);case Qt.INK:return new Xw(t);case Qt.POLYGON:return new cL(t);case Qt.HIGHLIGHT:return new uL(t);case Qt.UNDERLINE:return new dL(t);case Qt.SQUIGGLY:return new fL(t);case Qt.STRIKEOUT:return new pL(t);case Qt.STAMP:return new Qw(t);case Qt.FILEATTACHMENT:return new gL(t);default:return new Gt(t)}}}var Yr,qa,Ya,su,$_;const Sv=class Sv{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){g(this,su);g(this,Yr,null);g(this,qa,!1);g(this,Ya,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Sv._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;l(this,Yr)||_(this,Yr,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&b(this,su,$_).call(this,e),(s=l(this,Ya))==null||s.popup.updateEdited(t)}resetEdited(){var t;l(this,Yr)&&(b(this,su,$_).call(this,l(this,Yr).rect),(t=l(this,Ya))==null||t.popup.resetEdited(),_(this,Yr,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof jo||(r.tabIndex=_d);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.popupRef&&r.setAttribute("aria-haspopup","dialog"),e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof H_){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:a,height:c}=en(e.rect);if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,A=e.borderStyle.verticalCornerRadius;if(v>0||A>0){const w=`calc(${v}px * var(--scale-factor)) / calc(${A}px * var(--scale-factor))`;o.borderRadius=w}else if(this instanceof Uw){const w=`calc(${a}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;o.borderRadius=w}switch(e.borderStyle.style){case ec.SOLID:o.borderStyle="solid";break;case ec.DASHED:o.borderStyle="dashed";break;case ec.BEVELED:pt("Unimplemented border style: beveled");break;case ec.INSET:pt("Unimplemented border style: inset");break;case ec.UNDERLINE:o.borderBottomStyle="solid";break}const y=e.borderColor||null;y?(_(this,qa,!0),o.borderColor=Q.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const h=Q.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:p}=n.rawDims;o.left=`${100*(h[0]-f)/u}%`,o.top=`${100*(h[1]-p)/d}%`;const{rotation:m}=e;return e.hasOwnCanvas||m===0?(o.width=`${100*a/u}%`,o.height=`${100*c/d}%`):this.setRotation(m,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:o}=en(this.data.rect);let a,c;t%180===0?(a=100*r/s,c=100*o/n):(a=100*o/s,c=100*r/n),e.style.width=`${a}%`,e.style.height=`${c}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],a=r.slice(1);n.target.style[s]=jy[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:jy[`${o}_rgb`](a)})};return At(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const a={detail:{[n]:r},target:t};o(a),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,A,y,w]=t.subarray(2,6);if(n===v&&r===A&&e===y&&s===w)return}const{style:o}=this.container;let a;if(l(this,qa)){const{borderColor:v,borderWidth:A}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${A}">`],this.container.classList.add("hasBorder")}const c=n-e,h=r-s,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=u.createElement("defs");d.append(f);const p=u.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let v=2,A=t.length;v<A;v+=8){const y=t[v],w=t[v+1],T=t[v+2],C=t[v+3],R=u.createElement("rect"),k=(T-e)/c,I=(r-w)/h,M=(y-T)/c,$=(w-C)/h;R.setAttribute("x",k),R.setAttribute("y",I),R.setAttribute("width",M),R.setAttribute("height",$),p.append(R),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${I}" width="${M}" height="${$}"/>`)}l(this,qa)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const s=_(this,Ya,new H_({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}render(){Mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:a}of n){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Do.has(h)){pt(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&Do.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Yr=new WeakMap,qa=new WeakMap,Ya=new WeakMap,su=new WeakSet,$_=function(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...t);const{width:h,height:u}=en(t);e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,n===0?(e.width=`${100*h/r}%`,e.height=`${100*u/o}%`):this.setRotation(n)};let Gt=Sv;var Ni,or,Rp,jw,kp,Vw;class Bw extends Gt{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});g(this,Ni);g(this,Rp);g(this,kp);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(b(this,Rp,jw).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(b(this,kp,Vw).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&b(this,Ni,or).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),b(this,Ni,or).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),b(this,Ni,or).call(this)}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),b(this,Ni,or).call(this),!this._fieldObjects){pt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var d;n==null||n();const{fields:r,refs:o,include:a}=s,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:v}of m)f.add(v)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,u=[];for(const f of c){const{id:p}=f;switch(u.push(p),f.type){case"text":{const v=f.defaultValue||"";h.setValue(p,{value:v});break}case"checkbox":case"radiobutton":{const v=f.defaultValue===f.exportValues;h.setValue(p,{value:v});break}case"combobox":case"listbox":{const v=f.defaultValue||"";h.setValue(p,{value:v});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Do.has(m)){pt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Ni=new WeakSet,or=function(){this.container.setAttribute("data-internal-link","")},Rp=new WeakSet,jw=function(e,s,n=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},b(this,Ni,or).call(this)},kp=new WeakSet,Vw=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),b(this,Ni,or).call(this)};class ZP extends Gt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class jo extends Gt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Be.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var a;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}}))})}_setEventListeners(t,e,s,n){var r,o,a;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,n),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Q.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||QP,r=t.style;let o;const a=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(h/(_m*n))||1,d=h/u;o=Math.min(n,c(d/_m))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(n,c(h/_m))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=Q.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class tL extends jo{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){var n,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let h=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",h??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Do.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=_d,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=u.userValue=p,u.formattedValue=null});let d=f=>{const{formattedValue:p}=u;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var v;if(u.focused)return;const{target:m}=p;u.userValue&&(m.value=u.userValue),u.lastCommittedValue=m.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(v){u.userValue=v.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:A}=v.detail;u.formattedValue=A,A!=null&&v.target!==document.activeElement&&(v.target.value=A),t.setValue(e,{formattedValue:A})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var T;const{charLimit:A}=v.detail,{target:y}=v;if(A===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",A);let w=u.userValue;!w||w.length<=A||(w=w.slice(0,A),y.value=u.userValue=w,t.setValue(e,{value:w}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("keydown",p=>{var A;u.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(u.commitKey=3),m===-1)return;const{value:v}=p.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,s.addEventListener("blur",p=>{var v,A;if(!u.focused||!p.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:m}=p.target;u.userValue=m,u.lastCommittedValue!==m&&((A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:u.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var R;u.lastCommittedValue=null;const{data:m,target:v}=p,{value:A,selectionStart:y,selectionEnd:w}=v;let T=y,C=w;switch(p.inputType){case"deleteWordBackward":{const k=A.substring(0,y).match(/\w*[^\w]*$/);k&&(T-=k[0].length);break}case"deleteWordForward":{const k=A.substring(y).match(/^[^\w]*\w*/);k&&(C+=k[0].length);break}case"deleteContentBackward":y===w&&(T-=1);break;case"deleteContentForward":y===w&&(C+=1);break}p.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,change:m||"",willCommit:!1,selStart:T,selEnd:C}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&s.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class eL extends jo{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class sL extends jo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Do.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=_d,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Uw extends jo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Do.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=_d,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:h=>{const u=o===h.detail.value;for(const d of this._getElementsByName(h.target.name)){const f=u&&d.id===s;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class iL extends Bw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class nL extends jo{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Do.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=_d;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of n.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,s.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),n.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const a=u=>{const d=u?"value":"textContent",{options:f,multiple:p}=n;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=a(!1);const h=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const d={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const v of n.options)v.selected=m.has(v.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(f){n.multiple=!0},remove(f){const p=n.options,m=f.detail.remove;p[m].selected=!1,n.remove(m),p.length>0&&Array.prototype.findIndex.call(p,A=>A.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:a(!0),items:h(f)}),c=a(!1)},clear(f){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:v}=f.detail.insert,A=n.children[p],y=document.createElement("option");y.textContent=m,y.value=v,A?A.before(y):n.append(y),t.setValue(e,{value:a(!0),items:h(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;n.length!==0;)n.remove(0);for(const m of p){const{displayValue:v,exportValue:A}=m,y=document.createElement("option");y.textContent=v,y.value=A,n.append(y)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:h(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),n.addEventListener("input",u=>{var p;const d=a(!0),f=a(!1);t.setValue(e,{value:d}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class H_ extends Gt{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Gt._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new rL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${zE}${s}`).join(",")),this.container}}var Xa,Pp,Lp,Qa,Xr,Vt,Fi,Qr,iu,nu,Ja,$i,xs,Hi,ru,Bi,ou,Jr,Zr,Za,nf,au,B_,Ip,Ww,Mp,zw,Dp,Kw,Op,Gw,tl,rf,el,of,lu,j_;class rL{constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:h,parentRect:u,open:d}){g(this,Za);g(this,au);g(this,Ip);g(this,Mp);g(this,Dp);g(this,Op);g(this,tl);g(this,el);g(this,lu);g(this,Xa,b(this,Dp,Kw).bind(this));g(this,Pp,b(this,lu,j_).bind(this));g(this,Lp,b(this,el,of).bind(this));g(this,Qa,b(this,tl,rf).bind(this));g(this,Xr,null);g(this,Vt,null);g(this,Fi,null);g(this,Qr,null);g(this,iu,null);g(this,nu,null);g(this,Ja,null);g(this,$i,!1);g(this,xs,null);g(this,Hi,null);g(this,ru,null);g(this,Bi,null);g(this,ou,null);g(this,Jr,null);g(this,Zr,!1);var f;_(this,Vt,t),_(this,ou,n),_(this,Fi,o),_(this,Bi,a),_(this,nu,c),_(this,Xr,e),_(this,ru,h),_(this,Ja,u),_(this,iu,s),_(this,Qr,YE.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,Qa)),p.addEventListener("mouseenter",l(this,Lp)),p.addEventListener("mouseleave",l(this,Pp)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",l(this,Xa));l(this,Vt).hidden=!0,d&&b(this,tl,rf).call(this)}render(){if(l(this,xs))return;const t=_(this,xs,document.createElement("div"));if(t.className="popup",l(this,Xr)){const r=t.style.outlineColor=Q.makeHexColor(...l(this,Xr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=Q.makeHexColor(...l(this,Xr).map(a=>Math.floor(.7*(255-a)+a)))}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=l(this,ou),t.append(e),l(this,Qr)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:l(this,Qr).toLocaleDateString(),time:l(this,Qr).toLocaleTimeString()})),e.append(r)}const n=l(this,Za,nf);if(n)Hw.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,Fi));t.append(r)}l(this,Vt).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const a=n[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;l(this,Jr)||_(this,Jr,{contentsObj:l(this,Fi),richText:l(this,Bi)}),t&&_(this,Hi,null),e&&(_(this,Bi,b(this,Mp,zw).call(this,e)),_(this,Fi,null)),(s=l(this,xs))==null||s.remove(),_(this,xs,null)}resetEdited(){var t;l(this,Jr)&&({contentsObj:We(this,Fi)._,richText:We(this,Bi)._}=l(this,Jr),_(this,Jr,null),(t=l(this,xs))==null||t.remove(),_(this,xs,null),_(this,Hi,null))}forceHide(){_(this,Zr,this.isVisible),l(this,Zr)&&(l(this,Vt).hidden=!0)}maybeShow(){l(this,Zr)&&(l(this,xs)||b(this,el,of).call(this),_(this,Zr,!1),l(this,Vt).hidden=!1)}get isVisible(){return l(this,Vt).hidden===!1}}Xa=new WeakMap,Pp=new WeakMap,Lp=new WeakMap,Qa=new WeakMap,Xr=new WeakMap,Vt=new WeakMap,Fi=new WeakMap,Qr=new WeakMap,iu=new WeakMap,nu=new WeakMap,Ja=new WeakMap,$i=new WeakMap,xs=new WeakMap,Hi=new WeakMap,ru=new WeakMap,Bi=new WeakMap,ou=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,Za=new WeakSet,nf=function(){const t=l(this,Bi),e=l(this,Fi);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,Bi).html||null},au=new WeakSet,B_=function(){var t,e,s;return((s=(e=(t=l(this,Za,nf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},Ip=new WeakSet,Ww=function(){var t,e,s;return((s=(e=(t=l(this,Za,nf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},Mp=new WeakSet,zw=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:l(this,Ip,Ww),fontSize:l(this,au,B_)?`calc(${l(this,au,B_)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s},Dp=new WeakSet,Kw=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,$i))&&b(this,tl,rf).call(this)},Op=new WeakSet,Gw=function(){if(l(this,Hi)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=l(this,nu);let o=!!l(this,Ja),a=o?l(this,Ja):l(this,ru);for(const m of l(this,iu))if(!a||Q.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=Q.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=5,u=o?a[2]-a[0]+h:0,d=c[0]+u,f=c[1];_(this,Hi,[100*(d-n)/e,100*(f-r)/s]);const{style:p}=l(this,Vt);p.left=`${l(this,Hi)[0]}%`,p.top=`${l(this,Hi)[1]}%`},tl=new WeakSet,rf=function(){_(this,$i,!l(this,$i)),l(this,$i)?(b(this,el,of).call(this),l(this,Vt).addEventListener("click",l(this,Qa)),l(this,Vt).addEventListener("keydown",l(this,Xa))):(b(this,lu,j_).call(this),l(this,Vt).removeEventListener("click",l(this,Qa)),l(this,Vt).removeEventListener("keydown",l(this,Xa)))},el=new WeakSet,of=function(){l(this,xs)||this.render(),this.isVisible?l(this,$i)&&l(this,Vt).classList.add("focused"):(b(this,Op,Gw).call(this),l(this,Vt).hidden=!1,l(this,Vt).style.zIndex=parseInt(l(this,Vt).style.zIndex)+1e3)},lu=new WeakSet,j_=function(){l(this,Vt).classList.remove("focused"),!(l(this,$i)||!this.isVisible)&&(l(this,Vt).hidden=!0,l(this,Vt).style.zIndex=parseInt(l(this,Vt).style.zIndex)-1e3)};class qw extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var cu;class oL extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});g(this,cu,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:s,height:n}=en(e.rect),r=this.svgFactory.create(s,n,!0),o=_(this,cu,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,cu)}addHighlightArea(){this.container.classList.add("highlightArea")}}cu=new WeakMap;var hu;class aL extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});g(this,hu,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:s,height:n}=en(e.rect),r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=_(this,hu,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",n-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,hu)}addHighlightArea(){this.container.classList.add("highlightArea")}}hu=new WeakMap;var uu;class lL extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});g(this,uu,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:s,height:n}=en(e.rect),r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=_(this,uu,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",n/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",n/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,uu)}addHighlightArea(){this.container.classList.add("highlightArea")}}uu=new WeakMap;var du;class Yw extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});g(this,du,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:n,popupRef:r}}=this;if(!s)return this.container;const{width:o,height:a}=en(e),c=this.svgFactory.create(o,a,!0);let h=[];for(let d=0,f=s.length;d<f;d+=2){const p=s[d]-e[0],m=e[3]-s[d+1];h.push(`${p},${m}`)}h=h.join(" ");const u=_(this,du,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,du)}addHighlightArea(){this.container.classList.add("highlightArea")}}du=new WeakMap;class cL extends Yw{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hL extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var fu;class Xw extends Gt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});g(this,fu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=bt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:s,borderStyle:n,popupRef:r}}=this,{width:o,height:a}=en(e),c=this.svgFactory.create(o,a,!0);for(const h of s){let u=[];for(let f=0,p=h.length;f<p;f+=2){const m=h[f]-e[0],v=e[3]-h[f+1];u.push(`${m},${v}`)}u=u.join(" ");const d=this.svgFactory.createElement(this.svgElementName);l(this,fu).push(d),d.setAttribute("points",u),d.setAttribute("stroke-width",n.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),!r&&this.hasPopupData&&this._createPopup(),c.append(d)}return this.container.append(c),this.container}getElementsToTriggerPopup(){return l(this,fu)}addHighlightArea(){this.container.classList.add("highlightArea")}}fu=new WeakMap;class uL extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class dL extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class fL extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pL extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Qw extends Gt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var pu,gu,V_;class gL extends Gt{constructor(e){var n;super(e,{isRenderable:!0});g(this,gu);g(this,pu,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",b(this,gu,V_).bind(this)),_(this,pu,n);const{isMac:r}=Be.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&b(this,gu,V_).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return l(this,pu)}addHighlightArea(){this.container.classList.add("highlightArea")}}pu=new WeakMap,gu=new WeakSet,V_=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var mu,to,eo,Np,Jw,_u,U_;class mL{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o}){g(this,Np);g(this,_u);g(this,mu,null);g(this,to,null);g(this,eo,new Map);this.div=t,_(this,mu,e),_(this,to,s),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return l(this,eo).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;Io(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Yb,annotationStorage:t.annotationStorage||new Zb,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const c=a.annotationType===Qt.POPUP;if(c){const d=n.get(a.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=en(a.rect);if(d<=0||f<=0)continue}r.data=a;const h=JP.create(r);if(!h.isRenderable)continue;if(!c&&a.popupRef){const d=n.get(a.popupRef);d?d.push(h):n.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),b(this,Np,Jw).call(this,u,a.id),h._isEditable&&(l(this,eo).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}b(this,_u,U_).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Io(e,{rotation:t.rotation}),b(this,_u,U_).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,eo).values())}getEditableAnnotation(t){return l(this,eo).get(t)}}mu=new WeakMap,to=new WeakMap,eo=new WeakMap,Np=new WeakSet,Jw=function(t,e){var n;const s=t.firstChild||t;s.id=`${zE}${e}`,this.div.append(t),(n=l(this,mu))==null||n.moveElementInDOM(this.div,t,s,!1)},_u=new WeakSet,U_=function(){if(!l(this,to))return;const t=this.div;for(const[e,s]of l(this,to)){const n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;s.className="annotationContent";const{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):n.append(s)}l(this,to).clear()};const Md=/\r\n?|\n/g;var bu,vu,yu,Au,Eu,Rs,Xe,wu,Qe,sl,Fp,Zw,$p,t0,Hp,e0,il,af,nl,lf,rl,cf,Bp,s0,Su,z_,jp,i0;const Ot=class Ot extends xt{constructor(e){super({...e,name:"freeTextEditor"});g(this,Fp);g(this,$p);g(this,Hp);g(this,il);g(this,rl);g(this,Bp);g(this,jp);g(this,bu,this.editorDivBlur.bind(this));g(this,vu,this.editorDivFocus.bind(this));g(this,yu,this.editorDivInput.bind(this));g(this,Au,this.editorDivKeydown.bind(this));g(this,Eu,this.editorDivPaste.bind(this));g(this,Rs,void 0);g(this,Xe,"");g(this,wu,`${this.id}-editor`);g(this,Qe,void 0);g(this,sl,null);_(this,Rs,e.color||Ot._defaultColor||xt._defaultLineColor),_(this,Qe,e.fontSize||Ot._defaultFontSize)}static get _keyboardManager(){const e=Ot.prototype,s=o=>o.isEmpty(),n=Mo.TRANSLATE_SMALL,r=Mo.TRANSLATE_BIG;return At(this,"_keyboardManager",new gd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){xt.initialize(e,s,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case at.FREETEXT_SIZE:Ot._defaultFontSize=s;break;case at.FREETEXT_COLOR:Ot._defaultColor=s;break}}updateParams(e,s){switch(e){case at.FREETEXT_SIZE:b(this,Fp,Zw).call(this,s);break;case at.FREETEXT_COLOR:b(this,$p,t0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[at.FREETEXT_SIZE,Ot._defaultFontSize],[at.FREETEXT_COLOR,Ot._defaultColor||xt._defaultLineColor]]}get propertiesToUpdate(){return[[at.FREETEXT_SIZE,l(this,Qe)],[at.FREETEXT_COLOR,l(this,Rs)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ot._internalPadding*e,-(Ot._internalPadding+l(this,Qe))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(bt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant");const e=this._uiManager._signal;this.editorDiv.addEventListener("keydown",l(this,Au),{signal:e}),this.editorDiv.addEventListener("focus",l(this,vu),{signal:e}),this.editorDiv.addEventListener("blur",l(this,bu),{signal:e}),this.editorDiv.addEventListener("input",l(this,yu),{signal:e}),this.editorDiv.addEventListener("paste",l(this,Eu),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,wu)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",l(this,Au)),this.editorDiv.removeEventListener("focus",l(this,vu)),this.editorDiv.removeEventListener("blur",l(this,bu)),this.editorDiv.removeEventListener("input",l(this,yu)),this.editorDiv.removeEventListener("paste",l(this,Eu)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Xe),s=_(this,Xe,b(this,Hp,e0).call(this).trimEnd());if(e===s)return;const n=r=>{if(_(this,Xe,r),!r){this.remove();return}b(this,rl,cf).call(this),this._uiManager.rebuild(this),b(this,il,af).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(e)},mustExec:!1}),b(this,il,af).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ot._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,wu)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),xt._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var o;return(o=this.editorDiv)==null?void 0:o.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${l(this,Qe)}px * var(--scale-factor))`,n.color=l(this,Rs),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),kf(this,this.div,["dblclick","keydown"]),this.width){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=l(this,sl);let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,d]=this.pageDimensions,[f,p]=this.pageTranslation;let m,v;switch(this.rotation){case 0:m=e+(a[0]-f)/u,v=s+this.height-(a[1]-p)/d;break;case 90:m=e+(a[0]-f)/u,v=s-(a[1]-p)/d,[c,h]=[h,-c];break;case 180:m=e-this.width+(a[0]-f)/u,v=s-(a[1]-p)/d,[c,h]=[-c,-h];break;case 270:m=e+(a[0]-f-this.height*d)/u,v=s+(a[1]-p-this.width*u)/d,[c,h]=[-h,c];break}this.setAt(m*r,v*o,c,h)}else this.setAt(e*r,s*o,this.width*r,this.height*o);b(this,rl,cf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var m,v,A;const s=e.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=b(m=Ot,Su,z_).call(m,s.getData("text")||"").replaceAll(Md,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=a,u=[],d=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(d.push(c.nodeValue.slice(h).replaceAll(Md,"")),y!==this.editorDiv){let w=u;for(const T of this.editorDiv.childNodes){if(T===y){w=d;continue}w.push(b(v=Ot,nl,lf).call(v,T))}}u.push(c.nodeValue.slice(0,h).replaceAll(Md,""))}else if(c===this.editorDiv){let y=u,w=0;for(const T of this.editorDiv.childNodes)w++===h&&(y=d),y.push(b(A=Ot,nl,lf).call(A,T))}_(this,Xe,`${u.join(`
`)}${r}${d.join(`
`)}`),b(this,rl,cf).call(this);const f=new Range;let p=u.reduce((y,w)=>y+w.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(p<=w){f.setStart(y,p),f.setEnd(y,p);break}p-=w}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(e,s,n){var a;let r=null;if(e instanceof qw){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:d,id:f},textContent:p,textPosition:m,parent:{page:{pageNumber:v}}}=e;if(!p||p.length===0)return null;r=e={annotationType:bt.FREETEXT,color:Array.from(h),fontSize:c,value:p.join(`
`),position:m,pageIndex:v-1,rect:u.slice(0),rotation:d,id:f,deleted:!1}}const o=super.deserialize(e,s,n);return _(o,Qe,e.fontSize),_(o,Rs,Q.makeHexColor(...e.color)),_(o,Xe,b(a=Ot,Su,z_).call(a,e.value)),o.annotationElementId=e.id||null,_(o,sl,r),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const s=Ot._internalPadding*this.parentScale,n=this.getRect(s,s),r=xt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Rs)),o={annotationType:bt.FREETEXT,color:r,fontSize:l(this,Qe),value:b(this,Bp,s0).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!b(this,jp,i0).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${l(this,Qe)}px * var(--scale-factor))`,n.color=l(this,Rs),s.replaceChildren();for(const o of l(this,Xe).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=Ot._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,Xe)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};bu=new WeakMap,vu=new WeakMap,yu=new WeakMap,Au=new WeakMap,Eu=new WeakMap,Rs=new WeakMap,Xe=new WeakMap,wu=new WeakMap,Qe=new WeakMap,sl=new WeakMap,Fp=new WeakSet,Zw=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-l(this,Qe))*this.parentScale),_(this,Qe,r),b(this,il,af).call(this)},n=l(this,Qe);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},$p=new WeakSet,t0=function(e){const s=r=>{_(this,Rs,this.editorDiv.style.color=r)},n=l(this,Rs);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Hp=new WeakSet,e0=function(){var s;const e=[];this.editorDiv.normalize();for(const n of this.editorDiv.childNodes)e.push(b(s=Ot,nl,lf).call(s,n));return e.join(`
`)},il=new WeakSet,af=function(){const[e,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/s):(this.width=n.height/e,this.height=n.width/s),this.fixAndSetPosition()},nl=new WeakSet,lf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Md,"")},rl=new WeakSet,cf=function(){if(this.editorDiv.replaceChildren(),!!l(this,Xe))for(const e of l(this,Xe).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},Bp=new WeakSet,s0=function(){return l(this,Xe).replaceAll(" "," ")},Su=new WeakSet,z_=function(e){return e.replaceAll(" "," ")},jp=new WeakSet,i0=function(e){const{value:s,fontSize:n,color:r,pageIndex:o}=l(this,sl);return this._hasBeenMoved||e.value!==s||e.fontSize!==n||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},g(Ot,nl),g(Ot,Su),ht(Ot,"_freeTextDefaultContent",""),ht(Ot,"_internalPadding",0),ht(Ot,"_defaultColor",null),ht(Ot,"_defaultFontSize",10),ht(Ot,"_type","freetext"),ht(Ot,"_editorType",bt.FREETEXT);let W_=Ot;var Cu,On,ks,Vp,n0,ol,hf,Up,r0,Wp,o0,Tu,K_;class Vy{constructor(t,e=0,s=0,n=!0){g(this,Vp);g(this,ol);g(this,Up);g(this,Wp);g(this,Tu);g(this,Cu,void 0);g(this,On,[]);g(this,ks,[]);let r=1/0,o=-1/0,a=1/0,c=-1/0;const u=10**-4;for(const{x:y,y:w,width:T,height:C}of t){const R=Math.floor((y-e)/u)*u,k=Math.ceil((y+T+e)/u)*u,I=Math.floor((w-e)/u)*u,M=Math.ceil((w+C+e)/u)*u,$=[R,I,M,!0],K=[k,I,M,!1];l(this,On).push($,K),r=Math.min(r,R),o=Math.max(o,k),a=Math.min(a,I),c=Math.max(c,M)}const d=o-r+2*s,f=c-a+2*s,p=r-s,m=a-s,v=l(this,On).at(n?-1:-2),A=[v[0],v[2]];for(const y of l(this,On)){const[w,T,C]=y;y[0]=(w-p)/d,y[1]=(T-m)/f,y[2]=(C-m)/f}_(this,Cu,{x:p,y:m,width:d,height:f,lastPoint:A})}getOutlines(){l(this,On).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of l(this,On))e[3]?(t.push(...b(this,Tu,K_).call(this,e)),b(this,Up,r0).call(this,e)):(b(this,Wp,o0).call(this,e),t.push(...b(this,Tu,K_).call(this,e)));return b(this,Vp,n0).call(this,t)}}Cu=new WeakMap,On=new WeakMap,ks=new WeakMap,Vp=new WeakSet,n0=function(t){const e=[],s=new Set;for(const o of t){const[a,c,h]=o;e.push([a,c,o],[a,h,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,c,h,u,d]=o;s.delete(o);let f=a,p=c;for(r=[a,h],n.push(r);;){let m;if(s.has(u))m=u;else if(s.has(d))m=d;else break;s.delete(m),[a,c,h,u,d]=m,f!==a&&(r.push(f,p,a,p===c?c:h),f=a),p=p===c?h:c}r.push(f,p)}return new _L(n,l(this,Cu))},ol=new WeakSet,hf=function(t){const e=l(this,ks);let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1},Up=new WeakSet,r0=function([,t,e]){const s=b(this,ol,hf).call(this,t);l(this,ks).splice(s,0,[t,e])},Wp=new WeakSet,o0=function([,t,e]){const s=b(this,ol,hf).call(this,t);for(let n=s;n<l(this,ks).length;n++){const[r,o]=l(this,ks)[n];if(r!==t)break;if(r===t&&o===e){l(this,ks).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=l(this,ks)[n];if(r!==t)break;if(r===t&&o===e){l(this,ks).splice(n,1);return}}},Tu=new WeakSet,K_=function(t){const[e,s,n]=t,r=[[e,s,n]],o=b(this,ol,hf).call(this,n);for(let a=0;a<o;a++){const[c,h]=l(this,ks)[a];for(let u=0,d=r.length;u<d;u++){const[,f,p]=r[u];if(!(h<=f||p<=c)){if(f>=c){if(p>h)r[u][1]=h;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=c,p>h&&r.push([e,h,p])}}}return r};class a0{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(t,e){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof q_}}var xu,al;class _L extends a0{constructor(e,s){super();g(this,xu,void 0);g(this,al,void 0);_(this,al,e),_(this,xu,s)}toSVGPath(){const e=[];for(const s of l(this,al)){let[n,r]=s;e.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,s,n,r],o){const a=[],c=n-e,h=r-s;for(const u of l(this,al)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*c,d[f+1]=r-u[f+1]*h;a.push(d)}return a}get box(){return l(this,xu)}}xu=new WeakMap,al=new WeakMap;var Js,ji,ll,cl,Zs,_t,so,io,Ru,ku,hl,ul,Nn,Pu,zp,Kp,Lu,G_;const Ai=class Ai{constructor({x:t,y:e},s,n,r,o,a=0){g(this,Lu);g(this,Js,void 0);g(this,ji,[]);g(this,ll,void 0);g(this,cl,void 0);g(this,Zs,[]);g(this,_t,new Float64Array(18));g(this,so,void 0);g(this,io,void 0);g(this,Ru,void 0);g(this,ku,void 0);g(this,hl,void 0);g(this,ul,void 0);g(this,Nn,[]);_(this,Js,s),_(this,ul,r*n),_(this,cl,o),l(this,_t).set([NaN,NaN,NaN,NaN,t,e],6),_(this,ll,a),_(this,ku,l(Ai,Pu)*n),_(this,Ru,l(Ai,Kp)*n),_(this,hl,n),l(this,Nn).push(t,e)}get free(){return!0}isEmpty(){return isNaN(l(this,_t)[8])}add({x:t,y:e}){var $;_(this,so,t),_(this,io,e);const[s,n,r,o]=l(this,Js);let[a,c,h,u]=l(this,_t).subarray(8,12);const d=t-h,f=e-u,p=Math.hypot(d,f);if(p<l(this,Ru))return!1;const m=p-l(this,ku),v=m/p,A=v*d,y=v*f;let w=a,T=c;a=h,c=u,h+=A,u+=y,($=l(this,Nn))==null||$.push(t,e);const C=-y/m,R=A/m,k=C*l(this,ul),I=R*l(this,ul);return l(this,_t).set(l(this,_t).subarray(2,8),0),l(this,_t).set([h+k,u+I],4),l(this,_t).set(l(this,_t).subarray(14,18),12),l(this,_t).set([h-k,u-I],16),isNaN(l(this,_t)[6])?(l(this,Zs).length===0&&(l(this,_t).set([a+k,c+I],2),l(this,Zs).push(NaN,NaN,NaN,NaN,(a+k-s)/r,(c+I-n)/o),l(this,_t).set([a-k,c-I],14),l(this,ji).push(NaN,NaN,NaN,NaN,(a-k-s)/r,(c-I-n)/o)),l(this,_t).set([w,T,a,c,h,u],6),!this.isEmpty()):(l(this,_t).set([w,T,a,c,h,u],6),Math.abs(Math.atan2(T-c,w-a)-Math.atan2(y,A))<Math.PI/2?([a,c,h,u]=l(this,_t).subarray(2,6),l(this,Zs).push(NaN,NaN,NaN,NaN,((a+h)/2-s)/r,((c+u)/2-n)/o),[a,c,w,T]=l(this,_t).subarray(14,18),l(this,ji).push(NaN,NaN,NaN,NaN,((w+a)/2-s)/r,((T+c)/2-n)/o),!0):([w,T,a,c,h,u]=l(this,_t).subarray(0,6),l(this,Zs).push(((w+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),[h,u,a,c,w,T]=l(this,_t).subarray(12,18),l(this,ji).push(((w+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,Zs),e=l(this,ji),s=l(this,_t).subarray(4,6),n=l(this,_t).subarray(16,18),[r,o,a,c]=l(this,Js),[h,u,d,f]=b(this,Lu,G_).call(this);if(isNaN(l(this,_t)[6])&&!this.isEmpty())return`M${(l(this,_t)[2]-r)/a} ${(l(this,_t)[3]-o)/c} L${(l(this,_t)[4]-r)/a} ${(l(this,_t)[5]-o)/c} L${h} ${u} L${d} ${f} L${(l(this,_t)[16]-r)/a} ${(l(this,_t)[17]-o)/c} L${(l(this,_t)[14]-r)/a} ${(l(this,_t)[15]-o)/c} Z`;const p=[];p.push(`M${t[4]} ${t[5]}`);for(let m=6;m<t.length;m+=6)isNaN(t[m])?p.push(`L${t[m+4]} ${t[m+5]}`):p.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);p.push(`L${(s[0]-r)/a} ${(s[1]-o)/c} L${h} ${u} L${d} ${f} L${(n[0]-r)/a} ${(n[1]-o)/c}`);for(let m=e.length-6;m>=6;m-=6)isNaN(e[m])?p.push(`L${e[m+4]} ${e[m+5]}`):p.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);return p.push(`L${e[4]} ${e[5]} Z`),p.join(" ")}getOutlines(){var y;const t=l(this,Zs),e=l(this,ji),s=l(this,_t),n=s.subarray(4,6),r=s.subarray(16,18),[o,a,c,h]=l(this,Js),u=new Float64Array((((y=l(this,Nn))==null?void 0:y.length)??0)+2);for(let w=0,T=u.length-2;w<T;w+=2)u[w]=(l(this,Nn)[w]-o)/c,u[w+1]=(l(this,Nn)[w+1]-a)/h;u[u.length-2]=(l(this,so)-o)/c,u[u.length-1]=(l(this,io)-a)/h;const[d,f,p,m]=b(this,Lu,G_).call(this);if(isNaN(s[6])&&!this.isEmpty()){const w=new Float64Array(36);return w.set([NaN,NaN,NaN,NaN,(s[2]-o)/c,(s[3]-a)/h,NaN,NaN,NaN,NaN,(s[4]-o)/c,(s[5]-a)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(s[16]-o)/c,(s[17]-a)/h,NaN,NaN,NaN,NaN,(s[14]-o)/c,(s[15]-a)/h],0),new q_(w,u,l(this,Js),l(this,hl),l(this,ll),l(this,cl))}const v=new Float64Array(l(this,Zs).length+24+l(this,ji).length);let A=t.length;for(let w=0;w<A;w+=2){if(isNaN(t[w])){v[w]=v[w+1]=NaN;continue}v[w]=t[w],v[w+1]=t[w+1]}v.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-a)/h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(r[0]-o)/c,(r[1]-a)/h],A),A+=24;for(let w=e.length-6;w>=6;w-=6)for(let T=0;T<6;T+=2){if(isNaN(e[w+T])){v[A]=v[A+1]=NaN,A+=2;continue}v[A]=e[w+T],v[A+1]=e[w+T+1],A+=2}return v.set([NaN,NaN,NaN,NaN,e[4],e[5]],A),new q_(v,u,l(this,Js),l(this,hl),l(this,ll),l(this,cl))}};Js=new WeakMap,ji=new WeakMap,ll=new WeakMap,cl=new WeakMap,Zs=new WeakMap,_t=new WeakMap,so=new WeakMap,io=new WeakMap,Ru=new WeakMap,ku=new WeakMap,hl=new WeakMap,ul=new WeakMap,Nn=new WeakMap,Pu=new WeakMap,zp=new WeakMap,Kp=new WeakMap,Lu=new WeakSet,G_=function(){const t=l(this,_t).subarray(4,6),e=l(this,_t).subarray(16,18),[s,n,r,o]=l(this,Js);return[(l(this,so)+(t[0]-e[0])/2-s)/r,(l(this,io)+(t[1]-e[1])/2-n)/o,(l(this,so)+(e[0]-t[0])/2-s)/r,(l(this,io)+(e[1]-t[1])/2-n)/o]},g(Ai,Pu,8),g(Ai,zp,2),g(Ai,Kp,l(Ai,Pu)+l(Ai,zp));let If=Ai;var dl,no,Vi,Iu,Je,Mu,Wt,ro,_c,oo,bc,Gp,l0;class q_ extends a0{constructor(e,s,n,r,o,a){super();g(this,ro);g(this,oo);g(this,Gp);g(this,dl,void 0);g(this,no,null);g(this,Vi,void 0);g(this,Iu,void 0);g(this,Je,void 0);g(this,Mu,void 0);g(this,Wt,void 0);_(this,Wt,e),_(this,Je,s),_(this,dl,n),_(this,Mu,r),_(this,Vi,o),_(this,Iu,a),b(this,Gp,l0).call(this,a);const{x:c,y:h,width:u,height:d}=l(this,no);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-c)/u,e[f+1]=(e[f+1]-h)/d;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-c)/u,s[f+1]=(s[f+1]-h)/d}toSVGPath(){const e=[`M${l(this,Wt)[4]} ${l(this,Wt)[5]}`];for(let s=6,n=l(this,Wt).length;s<n;s+=6){if(isNaN(l(this,Wt)[s])){e.push(`L${l(this,Wt)[s+4]} ${l(this,Wt)[s+5]}`);continue}e.push(`C${l(this,Wt)[s]} ${l(this,Wt)[s+1]} ${l(this,Wt)[s+2]} ${l(this,Wt)[s+3]} ${l(this,Wt)[s+4]} ${l(this,Wt)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,n,r],o){const a=n-e,c=r-s;let h,u;switch(o){case 0:h=b(this,ro,_c).call(this,l(this,Wt),e,r,a,-c),u=b(this,ro,_c).call(this,l(this,Je),e,r,a,-c);break;case 90:h=b(this,oo,bc).call(this,l(this,Wt),e,s,a,c),u=b(this,oo,bc).call(this,l(this,Je),e,s,a,c);break;case 180:h=b(this,ro,_c).call(this,l(this,Wt),n,s,-a,c),u=b(this,ro,_c).call(this,l(this,Je),n,s,-a,c);break;case 270:h=b(this,oo,bc).call(this,l(this,Wt),n,r,-a,-c),u=b(this,oo,bc).call(this,l(this,Je),n,r,-a,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return l(this,no)}getNewOutline(e,s){const{x:n,y:r,width:o,height:a}=l(this,no),[c,h,u,d]=l(this,dl),f=o*u,p=a*d,m=n*u+c,v=r*d+h,A=new If({x:l(this,Je)[0]*f+m,y:l(this,Je)[1]*p+v},l(this,dl),l(this,Mu),e,l(this,Iu),s??l(this,Vi));for(let y=2;y<l(this,Je).length;y+=2)A.add({x:l(this,Je)[y]*f+m,y:l(this,Je)[y+1]*p+v});return A.getOutlines()}}dl=new WeakMap,no=new WeakMap,Vi=new WeakMap,Iu=new WeakMap,Je=new WeakMap,Mu=new WeakMap,Wt=new WeakMap,ro=new WeakSet,_c=function(e,s,n,r,o){const a=new Float64Array(e.length);for(let c=0,h=e.length;c<h;c+=2)a[c]=s+e[c]*r,a[c+1]=n+e[c+1]*o;return a},oo=new WeakSet,bc=function(e,s,n,r,o){const a=new Float64Array(e.length);for(let c=0,h=e.length;c<h;c+=2)a[c]=s+e[c+1]*r,a[c+1]=n+e[c]*o;return a},Gp=new WeakSet,l0=function(e){const s=l(this,Wt);let n=s[4],r=s[5],o=n,a=r,c=n,h=r,u=n,d=r;const f=e?Math.max:Math.min;for(let y=6,w=s.length;y<w;y+=6){if(isNaN(s[y]))o=Math.min(o,s[y+4]),a=Math.min(a,s[y+5]),c=Math.max(c,s[y+4]),h=Math.max(h,s[y+5]),d<s[y+5]?(u=s[y+4],d=s[y+5]):d===s[y+5]&&(u=f(u,s[y+4]));else{const T=Q.bezierBoundingBox(n,r,...s.slice(y,y+6));o=Math.min(o,T[0]),a=Math.min(a,T[1]),c=Math.max(c,T[2]),h=Math.max(h,T[3]),d<T[3]?(u=T[2],d=T[3]):d===T[3]&&(u=f(u,T[2]))}n=s[y+4],r=s[y+5]}const p=o-l(this,Vi),m=a-l(this,Vi),v=c-o+2*l(this,Vi),A=h-a+2*l(this,Vi);_(this,no,{x:p,y:m,width:v,height:A,lastPoint:[u,d]})};var Du,Ou,Ps,ao,fl,Zt,Nu,pl,Fu,$u,Ls,gl,Hu,Y_,Bu,X_,qp,c0,Ui,ar,Yp,h0,ti,pn;const Ei=class Ei{constructor({editor:t=null,uiManager:e=null}){g(this,Hu);g(this,Bu);g(this,qp);g(this,Ui);g(this,Yp);g(this,ti);g(this,Du,b(this,qp,c0).bind(this));g(this,Ou,b(this,Yp,h0).bind(this));g(this,Ps,null);g(this,ao,null);g(this,fl,void 0);g(this,Zt,null);g(this,Nu,!1);g(this,pl,!1);g(this,Fu,null);g(this,$u,void 0);g(this,Ls,null);g(this,gl,void 0);var s;t?(_(this,pl,!1),_(this,gl,at.HIGHLIGHT_COLOR),_(this,Fu,t)):(_(this,pl,!0),_(this,gl,at.HIGHLIGHT_DEFAULT_COLOR)),_(this,Ls,(t==null?void 0:t._uiManager)||e),_(this,$u,l(this,Ls)._eventBus),_(this,fl,(t==null?void 0:t.color)||((s=l(this,Ls))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return At(this,"_keyboardManager",new gd([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}renderButton(){const t=_(this,Ps,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,Ls)._signal;t.addEventListener("click",b(this,Ui,ar).bind(this),{signal:e}),t.addEventListener("keydown",l(this,Du),{signal:e});const s=_(this,ao,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,fl),t.append(s),t}renderMainDropdown(){const t=_(this,Zt,b(this,Hu,Y_).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,Ps)){b(this,Ui,ar).call(this,t);return}const e=t.target.getAttribute("data-color");e&&b(this,Bu,X_).call(this,e,t)}_moveToNext(t){var e,s;if(!l(this,ti,pn)){b(this,Ui,ar).call(this,t);return}if(t.target===l(this,Ps)){(e=l(this,Zt).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=l(this,Zt))==null?void 0:e.firstChild)||t.target===l(this,Ps)){l(this,ti,pn)&&this._hideDropdownFromKeyboard();return}l(this,ti,pn)||b(this,Ui,ar).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!l(this,ti,pn)){b(this,Ui,ar).call(this,t);return}(e=l(this,Zt).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,ti,pn)){b(this,Ui,ar).call(this,t);return}(e=l(this,Zt).lastChild)==null||e.focus()}hideDropdown(){var t;(t=l(this,Zt))==null||t.classList.add("hidden"),window.removeEventListener("pointerdown",l(this,Ou))}_hideDropdownFromKeyboard(){var t;if(!l(this,pl)){if(!l(this,ti,pn)){(t=l(this,Fu))==null||t.unselect();return}this.hideDropdown(),l(this,Ps).focus({preventScroll:!0,focusVisible:l(this,Nu)})}}updateColor(t){if(l(this,ao)&&(l(this,ao).style.backgroundColor=t),!l(this,Zt))return;const e=l(this,Ls).highlightColors.values();for(const s of l(this,Zt).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,Ps))==null||t.remove(),_(this,Ps,null),_(this,ao,null),(e=l(this,Zt))==null||e.remove(),_(this,Zt,null)}};Du=new WeakMap,Ou=new WeakMap,Ps=new WeakMap,ao=new WeakMap,fl=new WeakMap,Zt=new WeakMap,Nu=new WeakMap,pl=new WeakMap,Fu=new WeakMap,$u=new WeakMap,Ls=new WeakMap,gl=new WeakMap,Hu=new WeakSet,Y_=function(){const t=document.createElement("div"),e=l(this,Ls)._signal;t.addEventListener("contextmenu",je,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of l(this,Ls).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${s}`);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.setAttribute("aria-selected",n===l(this,fl)),r.addEventListener("click",b(this,Bu,X_).bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",l(this,Du),{signal:e}),t},Bu=new WeakSet,X_=function(t,e){e.stopPropagation(),l(this,$u).dispatch("switchannotationeditorparams",{source:this,type:l(this,gl),value:t})},qp=new WeakSet,c0=function(t){Ei._keyboardManager.exec(this,t)},Ui=new WeakSet,ar=function(t){if(l(this,ti,pn)){this.hideDropdown();return}if(_(this,Nu,t.detail===0),window.addEventListener("pointerdown",l(this,Ou),{signal:l(this,Ls)._signal}),l(this,Zt)){l(this,Zt).classList.remove("hidden");return}const e=_(this,Zt,b(this,Hu,Y_).call(this));l(this,Ps).append(e)},Yp=new WeakSet,h0=function(t){var e;(e=l(this,Zt))!=null&&e.contains(t.target)||this.hideDropdown()},ti=new WeakSet,pn=function(){return l(this,Zt)&&!l(this,Zt).classList.contains("hidden")};let Mf=Ei;var ml,ju,Fn,lo,_l,hs,Vu,Uu,co,Is,Le,Ze,Xp,bl,ho,te,vl,ei,Wu,zu,Q_,Ku,J_,Qp,u0,Jp,d0,Zp,f0,Gu,Z_,uo,vc,$n,ea,tg,p0,yl,uf,fo,yc,eg,g0,sg,m0,ig,_0,ng,b0;const Et=class Et extends xt{constructor(e){super({...e,name:"highlightEditor"});g(this,zu);g(this,Ku);g(this,Qp);g(this,Jp);g(this,Zp);g(this,Gu);g(this,uo);g(this,tg);g(this,yl);g(this,fo);g(this,eg);g(this,sg);g(this,ml,null);g(this,ju,0);g(this,Fn,void 0);g(this,lo,null);g(this,_l,null);g(this,hs,null);g(this,Vu,null);g(this,Uu,0);g(this,co,null);g(this,Is,null);g(this,Le,null);g(this,Ze,!1);g(this,Xp,b(this,tg,p0).bind(this));g(this,bl,null);g(this,ho,void 0);g(this,te,null);g(this,vl,"");g(this,ei,void 0);g(this,Wu,"");this.color=e.color||Et._defaultColor,_(this,ei,e.thickness||Et._defaultThickness),_(this,ho,e.opacity||Et._defaultOpacity),_(this,Fn,e.boxes||null),_(this,Wu,e.methodOfCreation||""),_(this,vl,e.text||""),this._isDraggable=!1,e.highlightId>-1?(_(this,Ze,!0),b(this,Ku,J_).call(this,e),b(this,uo,vc).call(this)):(_(this,ml,e.anchorNode),_(this,ju,e.anchorOffset),_(this,Vu,e.focusNode),_(this,Uu,e.focusOffset),b(this,zu,Q_).call(this),b(this,uo,vc).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Et.prototype;return At(this,"_keyboardManager",new gd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Ze)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,ei),methodOfCreation:l(this,Wu)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var n;xt.initialize(e,s),Et._defaultColor||(Et._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case at.HIGHLIGHT_DEFAULT_COLOR:Et._defaultColor=s;break;case at.HIGHLIGHT_THICKNESS:Et._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return l(this,bl)}updateParams(e,s){switch(e){case at.HIGHLIGHT_COLOR:b(this,Qp,u0).call(this,s);break;case at.HIGHLIGHT_THICKNESS:b(this,Jp,d0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[at.HIGHLIGHT_DEFAULT_COLOR,Et._defaultColor],[at.HIGHLIGHT_THICKNESS,Et._defaultThickness]]}get propertiesToUpdate(){return[[at.HIGHLIGHT_COLOR,this.color||Et._defaultColor],[at.HIGHLIGHT_THICKNESS,l(this,ei)||Et._defaultThickness],[at.HIGHLIGHT_FREE,l(this,Ze)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(_(this,_l,new Mf({editor:this})),e.addColorPicker(l(this,_l))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,fo,yc).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,b(this,fo,yc).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){b(this,Gu,Z_).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,uo,vc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?b(this,Gu,Z_).call(this):e&&(b(this,uo,vc).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,a;const{drawLayer:s}=this.parent;let n;l(this,Ze)?(e=(e-this.rotation+360)%360,n=b(r=Et,$n,ea).call(r,l(this,Is).box,e)):n=b(o=Et,$n,ea).call(o,this,e),s.rotate(l(this,Le),e),s.rotate(l(this,te),e),s.updateBox(l(this,Le),n),s.updateBox(l(this,te),b(a=Et,$n,ea).call(a,l(this,hs).box,e))}render(){if(this.div)return this.div;const e=super.render();l(this,vl)&&(e.setAttribute("aria-label",l(this,vl)),e.setAttribute("role","mark")),l(this,Ze)?e.classList.add("free"):this.div.addEventListener("keydown",l(this,Xp),{signal:this._uiManager._signal});const s=_(this,co,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,lo);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),kf(this,l(this,co),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(l(this,te),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(l(this,te),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:b(this,yl,uf).call(this,!0);break;case 1:case 3:b(this,yl,uf).call(this,!1);break}}select(){var e,s;super.select(),l(this,te)&&((e=this.parent)==null||e.drawLayer.removeClass(l(this,te),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(l(this,te),"selected"))}unselect(){var e;super.unselect(),l(this,te)&&((e=this.parent)==null||e.drawLayer.removeClass(l(this,te),"selected"),l(this,Ze)||b(this,yl,uf).call(this,!1))}get _mustFixPosition(){return!l(this,Ze)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(l(this,Le),e),this.parent.drawLayer.show(l(this,te),e))}static startHighlighting(e,s,{target:n,x:r,y:o}){const{x:a,y:c,width:h,height:u}=n.getBoundingClientRect(),d=A=>{b(this,ig,_0).call(this,e,A)},f=e._signal,p={capture:!0,passive:!1,signal:f},m=A=>{A.preventDefault(),A.stopPropagation()},v=A=>{n.removeEventListener("pointermove",d),window.removeEventListener("blur",v),window.removeEventListener("pointerup",v),window.removeEventListener("pointerdown",m,p),window.removeEventListener("contextmenu",je),b(this,ng,b0).call(this,e,A)};window.addEventListener("blur",v,{signal:f}),window.addEventListener("pointerup",v,{signal:f}),window.addEventListener("pointerdown",m,p),window.addEventListener("contextmenu",je,{signal:f}),n.addEventListener("pointermove",d,{signal:f}),this._freeHighlight=new If({x:r,y:o},[a,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,s,n){var v;const r=super.deserialize(e,s,n),{rect:[o,a,c,h],color:u,quadPoints:d}=e;r.color=Q.makeHexColor(...u),_(r,ho,e.opacity);const[f,p]=r.pageDimensions;r.width=(c-o)/f,r.height=(h-a)/p;const m=_(r,Fn,[]);for(let A=0;A<d.length;A+=8)m.push({x:(d[4]-c)/f,y:(h-(1-d[A+5]))/p,width:(d[A+2]-d[A])/f,height:(d[A+5]-d[A+1])/p});return b(v=r,zu,Q_).call(v),r}serialize(e=!1){if(this.isEmpty()||e)return null;const s=this.getRect(0,0),n=xt._colorManager.convert(this.color);return{annotationType:bt.HIGHLIGHT,color:n,opacity:l(this,ho),thickness:l(this,ei),quadPoints:b(this,eg,g0).call(this),outlines:b(this,sg,m0).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:b(this,fo,yc).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};ml=new WeakMap,ju=new WeakMap,Fn=new WeakMap,lo=new WeakMap,_l=new WeakMap,hs=new WeakMap,Vu=new WeakMap,Uu=new WeakMap,co=new WeakMap,Is=new WeakMap,Le=new WeakMap,Ze=new WeakMap,Xp=new WeakMap,bl=new WeakMap,ho=new WeakMap,te=new WeakMap,vl=new WeakMap,ei=new WeakMap,Wu=new WeakMap,zu=new WeakSet,Q_=function(){const e=new Vy(l(this,Fn),.001);_(this,Is,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=l(this,Is).box;const s=new Vy(l(this,Fn),.0025,.001,this._uiManager.direction==="ltr");_(this,hs,s.getOutlines());const{lastPoint:n}=l(this,hs).box;_(this,bl,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},Ku=new WeakSet,J_=function({highlightOutlines:e,highlightId:s,clipPathId:n}){var d,f;_(this,Is,e);const r=1.5;if(_(this,hs,e.getNewOutline(l(this,ei)/2+r,.0025)),s>=0)_(this,Le,s),_(this,lo,n),this.parent.drawLayer.finalizeLine(s,e),_(this,te,this.parent.drawLayer.highlightOutline(l(this,hs)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(l(this,Le),e),this.parent.drawLayer.updateBox(l(this,Le),b(d=Et,$n,ea).call(d,l(this,Is).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(l(this,te),l(this,hs)),this.parent.drawLayer.updateBox(l(this,te),b(f=Et,$n,ea).call(f,l(this,hs).box,p))}const{x:o,y:a,width:c,height:h}=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/p,this.height=h*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/p,this.height=h*p/m;break}}const{lastPoint:u}=l(this,hs).box;_(this,bl,[(u[0]-o)/c,(u[1]-a)/h])},Qp=new WeakSet,u0=function(e){const s=r=>{var o,a;this.color=r,(o=this.parent)==null||o.drawLayer.changeColor(l(this,Le),r),(a=l(this,_l))==null||a.updateColor(r)},n=this.color;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Jp=new WeakSet,d0=function(e){const s=l(this,ei),n=r=>{_(this,ei,r),b(this,Zp,f0).call(this,r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Zp=new WeakSet,f0=function(e){if(!l(this,Ze))return;b(this,Ku,J_).call(this,{highlightOutlines:l(this,Is).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Gu=new WeakSet,Z_=function(){l(this,Le)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Le)),_(this,Le,null),this.parent.drawLayer.remove(l(this,te)),_(this,te,null))},uo=new WeakSet,vc=function(e=this.parent){l(this,Le)===null&&({id:We(this,Le)._,clipPathId:We(this,lo)._}=e.drawLayer.highlight(l(this,Is),this.color,l(this,ho)),_(this,te,e.drawLayer.highlightOutline(l(this,hs))),l(this,co)&&(l(this,co).style.clipPath=l(this,lo)))},$n=new WeakSet,ea=function({x:e,y:s,width:n,height:r},o){switch(o){case 90:return{x:1-s-r,y:e,width:r,height:n};case 180:return{x:1-e-n,y:1-s-r,width:n,height:r};case 270:return{x:s,y:1-e-n,width:r,height:n}}return{x:e,y:s,width:n,height:r}},tg=new WeakSet,p0=function(e){Et._keyboardManager.exec(this,e)},yl=new WeakSet,uf=function(e){if(!l(this,ml))return;const s=window.getSelection();e?s.setPosition(l(this,ml),l(this,ju)):s.setPosition(l(this,Vu),l(this,Uu))},fo=new WeakSet,yc=function(){return l(this,Ze)?this.rotation:0},eg=new WeakSet,g0=function(){if(l(this,Ze))return null;const[e,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=l(this,Fn),a=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:d,height:f}of o){const p=h*e+n,m=(1-u-f)*s+r;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+d*e,a[c+5]=a[c+7]=m+f*s,c+=8}return a},sg=new WeakSet,m0=function(e){return l(this,Is).serialize(e,b(this,fo,yc).call(this))},ig=new WeakSet,_0=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},ng=new WeakSet,b0=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},g(Et,$n),g(Et,ig),g(Et,ng),ht(Et,"_defaultColor",null),ht(Et,"_defaultOpacity",1),ht(Et,"_defaultThickness",12),ht(Et,"_l10nPromise"),ht(Et,"_type","highlight"),ht(Et,"_editorType",bt.HIGHLIGHT),ht(Et,"_freeHighlightId",-1),ht(Et,"_freeHighlight",null),ht(Et,"_freeHighlightClipId","");let Df=Et;var po,go,qu,Yu,Xu,mo,si,Wi,us,_o,bo,zi,vo,yo,Hn,rg,v0,og,y0,ag,A0,lg,E0,Qu,eb,cg,w0,Ju,sb,hg,S0,ug,C0,dg,T0,fg,x0,pg,R0,Ki,lr,Zu,ib,Al,df,El,ff,Bn,sa,td,nb,wl,pf,gg,k0,ed,rb,mg,P0,_g,L0,sd,ob,Sl,gf,Ao,Ac;const Ft=class Ft extends xt{constructor(e){super({...e,name:"inkEditor"});g(this,rg);g(this,og);g(this,ag);g(this,lg);g(this,Qu);g(this,cg);g(this,Ju);g(this,hg);g(this,ug);g(this,dg);g(this,fg);g(this,pg);g(this,Ki);g(this,Zu);g(this,Al);g(this,El);g(this,Bn);g(this,td);g(this,wl);g(this,_g);g(this,sd);g(this,Sl);g(this,Ao);g(this,po,0);g(this,go,0);g(this,qu,this.canvasPointermove.bind(this));g(this,Yu,this.canvasPointerleave.bind(this));g(this,Xu,this.canvasPointerup.bind(this));g(this,mo,this.canvasPointerdown.bind(this));g(this,si,null);g(this,Wi,new Path2D);g(this,us,!1);g(this,_o,!1);g(this,bo,!1);g(this,zi,null);g(this,vo,0);g(this,yo,0);g(this,Hn,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,s){xt.initialize(e,s)}static updateDefaultParams(e,s){switch(e){case at.INK_THICKNESS:Ft._defaultThickness=s;break;case at.INK_COLOR:Ft._defaultColor=s;break;case at.INK_OPACITY:Ft._defaultOpacity=s/100;break}}updateParams(e,s){switch(e){case at.INK_THICKNESS:b(this,rg,v0).call(this,s);break;case at.INK_COLOR:b(this,og,y0).call(this,s);break;case at.INK_OPACITY:b(this,ag,A0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[at.INK_THICKNESS,Ft._defaultThickness],[at.INK_COLOR,Ft._defaultColor||xt._defaultLineColor],[at.INK_OPACITY,Math.round(Ft._defaultOpacity*100)]]}get propertiesToUpdate(){return[[at.INK_THICKNESS,this.thickness||Ft._defaultThickness],[at.INK_COLOR,this.color||Ft._defaultColor||xt._defaultLineColor],[at.INK_OPACITY,Math.round(100*(this.opacity??Ft._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(b(this,Al,df).call(this),b(this,El,ff).call(this)),this.isAttachedToDOM||(this.parent.add(this),b(this,Bn,sa).call(this)),b(this,Ao,Ac).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,l(this,si)&&(clearTimeout(l(this,si)),_(this,si,null)),(e=l(this,zi))==null||e.disconnect(),_(this,zi,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,s]=this.parentDimensions,n=this.width*e,r=this.height*s;this.setDimensions(n,r)}enableEditMode(){l(this,us)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",l(this,mo),{signal:this._uiManager._signal}))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",l(this,mo)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){l(this,us)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_(this,us,!0),this.div.classList.add("disabled"),b(this,Ao,Ac).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||l(this,us)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),b(this,cg,w0).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),b(this,Ju,sb).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),b(this,Zu,ib).call(this,e)}canvasPointerleave(e){b(this,Zu,ib).call(this,e)}get isResizable(){return!this.isEmpty()&&l(this,us)}render(){if(this.div)return this.div;let e,s;this.width&&(e=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,r,o,a]=b(this,lg,E0).call(this);if(this.setAt(n,r,0,0),this.setDims(o,a),b(this,Al,df).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(e*c,s*h,this.width*c,this.height*h),_(this,bo,!0),b(this,Bn,sa).call(this),this.setDims(this.width*c,this.height*h),b(this,Ki,lr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return b(this,El,ff).call(this),this.div}setDimensions(e,s){const n=Math.round(e),r=Math.round(s);if(l(this,vo)===n&&l(this,yo)===r)return;_(this,vo,n),_(this,yo,r),this.canvas.style.visibility="hidden";const[o,a]=this.parentDimensions;this.width=e/o,this.height=s/a,this.fixAndSetPosition(),l(this,us)&&b(this,td,nb).call(this,e,s),b(this,Bn,sa).call(this),b(this,Ki,lr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(e,s,n){var A,y,w;if(e instanceof Xw)return null;const r=super.deserialize(e,s,n);r.thickness=e.thickness,r.color=Q.makeHexColor(...e.color),r.opacity=e.opacity;const[o,a]=r.pageDimensions,c=r.width*o,h=r.height*a,u=r.parentScale,d=e.thickness/2;_(r,us,!0),_(r,vo,Math.round(c)),_(r,yo,Math.round(h));const{paths:f,rect:p,rotation:m}=e;for(let{bezier:T}of f){T=b(A=Ft,mg,P0).call(A,T,p,m);const C=[];r.paths.push(C);let R=u*(T[0]-d),k=u*(T[1]-d);for(let M=2,$=T.length;M<$;M+=6){const K=u*(T[M]-d),z=u*(T[M+1]-d),nt=u*(T[M+2]-d),et=u*(T[M+3]-d),dt=u*(T[M+4]-d),lt=u*(T[M+5]-d);C.push([[R,k],[K,z],[nt,et],[dt,lt]]),R=dt,k=lt}const I=b(this,gg,k0).call(this,C);r.bezierPath2D.push(I)}const v=b(y=r,sd,ob).call(y);return _(r,go,Math.max(xt.MIN_SIZE,v[2]-v[0])),_(r,po,Math.max(xt.MIN_SIZE,v[3]-v[1])),b(w=r,td,nb).call(w,c,h),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),s=xt._colorManager.convert(this.ctx.strokeStyle);return{annotationType:bt.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:b(this,_g,L0).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};po=new WeakMap,go=new WeakMap,qu=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,mo=new WeakMap,si=new WeakMap,Wi=new WeakMap,us=new WeakMap,_o=new WeakMap,bo=new WeakMap,zi=new WeakMap,vo=new WeakMap,yo=new WeakMap,Hn=new WeakMap,rg=new WeakSet,v0=function(e){const s=r=>{this.thickness=r,b(this,Ao,Ac).call(this)},n=this.thickness;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},og=new WeakSet,y0=function(e){const s=r=>{this.color=r,b(this,Ki,lr).call(this)},n=this.color;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ag=new WeakSet,A0=function(e){const s=r=>{this.opacity=r,b(this,Ki,lr).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:at.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},lg=new WeakSet,E0=function(){const{parentRotation:e,parentDimensions:[s,n]}=this;switch(e){case 90:return[0,n,n,s];case 180:return[s,n,s,n];case 270:return[s,0,n,s];default:return[0,0,s,n]}},Qu=new WeakSet,eb=function(){const{ctx:e,color:s,opacity:n,thickness:r,parentScale:o,scaleFactor:a}=this;e.lineWidth=r*o/a,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${s}${Uk(n)}`},cg=new WeakSet,w0=function(e,s){const n=this._uiManager._signal;this.canvas.addEventListener("contextmenu",je,{signal:n}),this.canvas.addEventListener("pointerleave",l(this,Yu),{signal:n}),this.canvas.addEventListener("pointermove",l(this,qu),{signal:n}),this.canvas.addEventListener("pointerup",l(this,Xu),{signal:n}),this.canvas.removeEventListener("pointerdown",l(this,mo)),this.isEditing=!0,l(this,bo)||(_(this,bo,!0),b(this,Bn,sa).call(this),this.thickness||(this.thickness=Ft._defaultThickness),this.color||(this.color=Ft._defaultColor||xt._defaultLineColor),this.opacity??(this.opacity=Ft._defaultOpacity)),this.currentPath.push([e,s]),_(this,_o,!1),b(this,Qu,eb).call(this),_(this,Hn,()=>{b(this,dg,T0).call(this),l(this,Hn)&&window.requestAnimationFrame(l(this,Hn))}),window.requestAnimationFrame(l(this,Hn))},Ju=new WeakSet,sb=function(e,s){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&s===r)return;const o=this.currentPath;let a=l(this,Wi);if(o.push([e,s]),_(this,_o,!0),o.length<=2){a.moveTo(...o[0]),a.lineTo(e,s);return}o.length===3&&(_(this,Wi,a=new Path2D),a.moveTo(...o[0])),b(this,fg,x0).call(this,a,...o.at(-3),...o.at(-2),e,s)},hg=new WeakSet,S0=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);l(this,Wi).lineTo(...e)},ug=new WeakSet,C0=function(e,s){_(this,Hn,null),e=Math.min(Math.max(e,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),b(this,Ju,sb).call(this,e,s),b(this,hg,S0).call(this);let n;if(this.currentPath.length!==1)n=b(this,pg,R0).call(this);else{const h=[e,s];n=[[h,h.slice(),h.slice(),h]]}const r=l(this,Wi),o=this.currentPath;this.currentPath=[],_(this,Wi,new Path2D);const a=()=>{this.allRawPaths.push(o),this.paths.push(n),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(b(this,Al,df).call(this),b(this,El,ff).call(this)),b(this,Ao,Ac).call(this))};this.addCommands({cmd:a,undo:c,mustExec:!0})},dg=new WeakSet,T0=function(){if(!l(this,_o))return;_(this,_o,!1);const e=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),n=s.map(a=>a[0]),r=s.map(a=>a[1]);Math.min(...n)-e,Math.max(...n)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:o}=this;o.save(),o.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)o.stroke(a);o.stroke(l(this,Wi)),o.restore()},fg=new WeakSet,x0=function(e,s,n,r,o,a,c){const h=(s+r)/2,u=(n+o)/2,d=(r+a)/2,f=(o+c)/2;e.bezierCurveTo(h+2*(r-h)/3,u+2*(o-u)/3,d+2*(r-d)/3,f+2*(o-f)/3,d,f)},pg=new WeakSet,R0=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const s=[];let n,[r,o]=e[0];for(n=1;n<e.length-2;n++){const[p,m]=e[n],[v,A]=e[n+1],y=(p+v)/2,w=(m+A)/2,T=[r+2*(p-r)/3,o+2*(m-o)/3],C=[y+2*(p-y)/3,w+2*(m-w)/3];s.push([[r,o],T,C,[y,w]]),[r,o]=[y,w]}const[a,c]=e[n],[h,u]=e[n+1],d=[r+2*(a-r)/3,o+2*(c-o)/3],f=[h+2*(a-h)/3,u+2*(c-u)/3];return s.push([[r,o],d,f,[h,u]]),s},Ki=new WeakSet,lr=function(){if(this.isEmpty()){b(this,wl,pf).call(this);return}b(this,Qu,eb).call(this);const{canvas:e,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,e.width,e.height),b(this,wl,pf).call(this);for(const n of this.bezierPath2D)s.stroke(n)},Zu=new WeakSet,ib=function(e){this.canvas.removeEventListener("pointerleave",l(this,Yu)),this.canvas.removeEventListener("pointermove",l(this,qu)),this.canvas.removeEventListener("pointerup",l(this,Xu)),this.canvas.addEventListener("pointerdown",l(this,mo),{signal:this._uiManager._signal}),l(this,si)&&clearTimeout(l(this,si)),_(this,si,setTimeout(()=>{_(this,si,null),this.canvas.removeEventListener("contextmenu",je)},10)),b(this,ug,C0).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Al=new WeakSet,df=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},El=new WeakSet,ff=function(){_(this,zi,new ResizeObserver(e=>{const s=e[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),l(this,zi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=l(this,zi))==null||e.disconnect(),_(this,zi,null)},{once:!0})},Bn=new WeakSet,sa=function(){if(!l(this,bo))return;const[e,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*s),b(this,wl,pf).call(this)},td=new WeakSet,nb=function(e,s){const n=b(this,Sl,gf).call(this),r=(e-n)/l(this,go),o=(s-n)/l(this,po);this.scaleFactor=Math.min(r,o)},wl=new WeakSet,pf=function(){const e=b(this,Sl,gf).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},gg=new WeakSet,k0=function(e){const s=new Path2D;for(let n=0,r=e.length;n<r;n++){const[o,a,c,h]=e[n];n===0&&s.moveTo(...o),s.bezierCurveTo(a[0],a[1],c[0],c[1],h[0],h[1])}return s},ed=new WeakSet,rb=function(e,s,n){const[r,o,a,c]=s;switch(n){case 0:for(let h=0,u=e.length;h<u;h+=2)e[h]+=r,e[h+1]=c-e[h+1];break;case 90:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=e[h+1]+r,e[h+1]=d+o}break;case 180:for(let h=0,u=e.length;h<u;h+=2)e[h]=a-e[h],e[h+1]+=o;break;case 270:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=a-e[h+1],e[h+1]=c-d}break;default:throw new Error("Invalid rotation")}return e},mg=new WeakSet,P0=function(e,s,n){const[r,o,a,c]=s;switch(n){case 0:for(let h=0,u=e.length;h<u;h+=2)e[h]-=r,e[h+1]=c-e[h+1];break;case 90:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=e[h+1]-o,e[h+1]=d-r}break;case 180:for(let h=0,u=e.length;h<u;h+=2)e[h]=a-e[h],e[h+1]-=o;break;case 270:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=c-e[h+1],e[h+1]=a-d}break;default:throw new Error("Invalid rotation")}return e},_g=new WeakSet,L0=function(e,s,n,r){var u,d;const o=[],a=this.thickness/2,c=e*s+a,h=e*n+a;for(const f of this.paths){const p=[],m=[];for(let v=0,A=f.length;v<A;v++){const[y,w,T,C]=f[v];if(y[0]===C[0]&&y[1]===C[1]&&A===1){const et=e*y[0]+c,dt=e*y[1]+h;p.push(et,dt),m.push(et,dt);break}const R=e*y[0]+c,k=e*y[1]+h,I=e*w[0]+c,M=e*w[1]+h,$=e*T[0]+c,K=e*T[1]+h,z=e*C[0]+c,nt=e*C[1]+h;v===0&&(p.push(R,k),m.push(R,k)),p.push(I,M,$,K,z,nt),m.push(I,M),v===A-1&&m.push(z,nt)}o.push({bezier:b(u=Ft,ed,rb).call(u,p,r,this.rotation),points:b(d=Ft,ed,rb).call(d,m,r,this.rotation)})}return o},sd=new WeakSet,ob=function(){let e=1/0,s=-1/0,n=1/0,r=-1/0;for(const o of this.paths)for(const[a,c,h,u]of o){const d=Q.bezierBoundingBox(...a,...c,...h,...u);e=Math.min(e,d[0]),n=Math.min(n,d[1]),s=Math.max(s,d[2]),r=Math.max(r,d[3])}return[e,n,s,r]},Sl=new WeakSet,gf=function(){return l(this,us)?Math.ceil(this.thickness*this.parentScale):0},Ao=new WeakSet,Ac=function(e=!1){if(this.isEmpty())return;if(!l(this,us)){b(this,Ki,lr).call(this);return}const s=b(this,sd,ob).call(this),n=b(this,Sl,gf).call(this);_(this,go,Math.max(xt.MIN_SIZE,s[2]-s[0])),_(this,po,Math.max(xt.MIN_SIZE,s[3]-s[1]));const r=Math.ceil(n+l(this,go)*this.scaleFactor),o=Math.ceil(n+l(this,po)*this.scaleFactor),[a,c]=this.parentDimensions;this.width=r/a,this.height=o/c,this.setAspectRatio(r,o);const h=this.translationX,u=this.translationY;this.translationX=-s[0],this.translationY=-s[1],b(this,Bn,sa).call(this),b(this,Ki,lr).call(this),_(this,vo,r),_(this,yo,o),this.setDims(r,o);const d=e?n/this.scaleFactor/2:0;this.translate(h-this.translationX-d,u-this.translationY-d)},g(Ft,gg),g(Ft,ed),g(Ft,mg),ht(Ft,"_defaultColor",null),ht(Ft,"_defaultOpacity",1),ht(Ft,"_defaultThickness",1),ht(Ft,"_type","ink"),ht(Ft,"_editorType",bt.INK);let tb=Ft;var _e,be,jn,Gi,Vn,Cl,ii,id,qi,ni,Ms,nd,Eo,Ec,wo,wc,Tl,mf,rd,lb,bg,I0,vg,M0,yg,D0,od,cb,xl,_f,Ag,O0;const Dc=class Dc extends xt{constructor(e){super({...e,name:"stampEditor"});g(this,Eo);g(this,wo);g(this,Tl);g(this,rd);g(this,bg);g(this,vg);g(this,yg);g(this,od);g(this,xl);g(this,Ag);g(this,_e,null);g(this,be,null);g(this,jn,null);g(this,Gi,null);g(this,Vn,null);g(this,Cl,"");g(this,ii,null);g(this,id,!1);g(this,qi,null);g(this,ni,null);g(this,Ms,!1);g(this,nd,!1);_(this,Gi,e.bitmapUrl),_(this,Vn,e.bitmapFile)}static initialize(e,s){xt.initialize(e,s)}static get supportedTypes(){return At(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return At(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,s){s.pasteEditor(bt.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,s;l(this,be)&&(_(this,_e,null),this._uiManager.imageManager.deleteId(l(this,be)),(e=l(this,ii))==null||e.remove(),_(this,ii,null),(s=l(this,qi))==null||s.disconnect(),_(this,qi,null),l(this,ni)&&(clearTimeout(l(this,ni)),_(this,ni,null))),super.remove()}rebuild(){if(!this.parent){l(this,be)&&b(this,Tl,mf).call(this);return}super.rebuild(),this.div!==null&&(l(this,be)&&l(this,ii)===null&&b(this,Tl,mf).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(l(this,jn)||l(this,_e)||l(this,Gi)||l(this,Vn)||l(this,be))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;if(this.width&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,_e)?b(this,rd,lb).call(this):b(this,Tl,mf).call(this),this.width){const[n,r]=this.parentDimensions;this.setAt(e*n,s*r,this.width*n,this.height*r)}return this.div}getImageForAltText(){return l(this,ii)}static deserialize(e,s,n){if(e instanceof Qw)return null;const r=super.deserialize(e,s,n),{rect:o,bitmapUrl:a,bitmapId:c,isSvg:h,accessibilityData:u}=e;c&&n.imageManager.isValidId(c)?_(r,be,c):_(r,Gi,a),_(r,Ms,h);const[d,f]=r.pageDimensions;return r.width=(o[2]-o[0])/d,r.height=(o[3]-o[1])/f,u&&(r.altTextData=u),r}serialize(e=!1,s=null){if(this.isEmpty())return null;const n={annotationType:bt.STAMP,bitmapId:l(this,be),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Ms),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=b(this,xl,_f).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:o}=this.altTextData;if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),s===null)return n;s.stamps||(s.stamps=new Map);const a=l(this,Ms)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(l(this,be)))s.stamps.set(l(this,be),{area:a,serialized:n}),n.bitmap=b(this,xl,_f).call(this,!1);else if(l(this,Ms)){const c=s.stamps.get(l(this,be));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=b(this,xl,_f).call(this,!1))}return n}};_e=new WeakMap,be=new WeakMap,jn=new WeakMap,Gi=new WeakMap,Vn=new WeakMap,Cl=new WeakMap,ii=new WeakMap,id=new WeakMap,qi=new WeakMap,ni=new WeakMap,Ms=new WeakMap,nd=new WeakMap,Eo=new WeakSet,Ec=function(e,s=!1){if(!e){this.remove();return}_(this,_e,e.bitmap),s||(_(this,be,e.id),_(this,Ms,e.isSvg)),e.file&&_(this,Cl,e.file.name),b(this,rd,lb).call(this)},wo=new WeakSet,wc=function(){_(this,jn,null),this._uiManager.enableWaiting(!1),l(this,ii)&&this.div.focus()},Tl=new WeakSet,mf=function(){if(l(this,be)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,be)).then(n=>b(this,Eo,Ec).call(this,n,!0)).finally(()=>b(this,wo,wc).call(this));return}if(l(this,Gi)){const n=l(this,Gi);_(this,Gi,null),this._uiManager.enableWaiting(!0),_(this,jn,this._uiManager.imageManager.getFromUrl(n).then(r=>b(this,Eo,Ec).call(this,r)).finally(()=>b(this,wo,wc).call(this)));return}if(l(this,Vn)){const n=l(this,Vn);_(this,Vn,null),this._uiManager.enableWaiting(!0),_(this,jn,this._uiManager.imageManager.getFromFile(n).then(r=>b(this,Eo,Ec).call(this,r)).finally(()=>b(this,wo,wc).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Dc.supportedTypesStr;const s=this._uiManager._signal;_(this,jn,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);b(this,Eo,Ec).call(this,r)}n()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>b(this,wo,wc).call(this))),e.click()},rd=new WeakSet,lb=function(){const{div:e}=this;let{width:s,height:n}=l(this,_e);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>a*r||n>a*o){const d=Math.min(a*r/s,a*o/n);s*=d,n*=d}const[c,h]=this.parentDimensions;this.setDims(s*c/r,n*h/o),this._uiManager.enableWaiting(!1);const u=_(this,ii,document.createElement("canvas"));e.append(u),e.hidden=!1,b(this,od,cb).call(this,s,n),b(this,Ag,O0).call(this),l(this,nd)||(this.parent.addUndoableEditor(this),_(this,nd,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Cl)&&u.setAttribute("aria-label",l(this,Cl))},bg=new WeakSet,I0=function(e,s){var a;const[n,r]=this.parentDimensions;this.width=e/n,this.height=s/r,this.setDims(e,s),(a=this._initialOptions)!=null&&a.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,l(this,ni)!==null&&clearTimeout(l(this,ni)),_(this,ni,setTimeout(()=>{_(this,ni,null),b(this,od,cb).call(this,e,s)},200))},vg=new WeakSet,M0=function(e,s){const{width:n,height:r}=l(this,_e);let o=n,a=r,c=l(this,_e);for(;o>2*e||a>2*s;){const h=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const d=new OffscreenCanvas(o,a);d.getContext("2d").drawImage(c,0,0,h,u,0,0,o,a),c=d.transferToImageBitmap()}return c},yg=new WeakSet,D0=async function(e,s,n){if(l(this,id)||(_(this,id,!0),!await this._uiManager.isMLEnabledFor("altText")||this.hasAltText()))return;const a=new OffscreenCanvas(s,n).getContext("2d",{willReadFrequently:!0});a.drawImage(e,0,0,e.width,e.height,0,0,s,n);const c=await this._uiManager.mlGuess({service:"moz-image-to-text",request:{data:a.getImageData(0,0,s,n).data,width:s,height:n,channels:4}}),h=(c==null?void 0:c.output)||"";this.parent&&h&&!this.hasAltText()&&(this.altTextData={altText:h,decorative:!1})},od=new WeakSet,cb=function(e,s){e=Math.ceil(e),s=Math.ceil(s);const n=l(this,ii);if(!n||n.width===e&&n.height===s)return;n.width=e,n.height=s;const r=l(this,Ms)?l(this,_e):b(this,vg,M0).call(this,e,s);b(this,yg,D0).call(this,r,e,s);const o=n.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(r,0,0,r.width,r.height,0,0,e,s)},xl=new WeakSet,_f=function(e){if(e){if(l(this,Ms)){const r=this._uiManager.imageManager.getSvgUrl(l(this,be));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,_e),s.getContext("2d").drawImage(l(this,_e),0,0),s.toDataURL()}if(l(this,Ms)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*Xn.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Xn.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,_e),0,0,l(this,_e).width,l(this,_e).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,_e))},Ag=new WeakSet,O0=function(){this._uiManager._signal&&(_(this,qi,new ResizeObserver(e=>{const s=e[0].contentRect;s.width&&s.height&&b(this,bg,I0).call(this,s.width,s.height)})),l(this,qi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=l(this,qi))==null||e.disconnect(),_(this,qi,null)},{once:!0}))},ht(Dc,"_type","stamp"),ht(Dc,"_editorType",bt.STAMP);let ab=Dc;var So,Rl,ri,Co,Yi,Xi,Qi,ts,Un,kl,Pl,Te,st,Wn,Eg,N0,ad,ub,ld,db,cd,fb,Ll,bf;const vs=class vs{constructor({uiManager:t,pageIndex:e,div:s,accessibilityManager:n,annotationLayer:r,drawLayer:o,textLayer:a,viewport:c,l10n:h}){g(this,Eg);g(this,ad);g(this,ld);g(this,cd);g(this,Ll);g(this,So,void 0);g(this,Rl,!1);g(this,ri,null);g(this,Co,null);g(this,Yi,null);g(this,Xi,null);g(this,Qi,null);g(this,ts,new Map);g(this,Un,!1);g(this,kl,!1);g(this,Pl,!1);g(this,Te,null);g(this,st,void 0);const u=[...l(vs,Wn).values()];if(!vs._initialized){vs._initialized=!0;for(const d of u)d.initialize(h,t)}t.registerEditorTypes(u),_(this,st,t),this.pageIndex=e,this.div=s,_(this,So,n),_(this,ri,r),this.viewport=c,_(this,Te,a),this.drawLayer=o,l(this,st).addLayer(this)}get isEmpty(){return l(this,ts).size===0}get isInvisible(){return this.isEmpty&&l(this,st).getMode()===bt.NONE}updateToolbar(t){l(this,st).updateToolbar(t)}updateMode(t=l(this,st).getMode()){switch(b(this,Ll,bf).call(this),t){case bt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case bt.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of l(vs,Wn).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Te))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(l(this,st).getMode()!==bt.INK)return;if(!t){for(const s of l(this,ts).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){l(this,st).setEditingState(t)}addCommands(t){l(this,st).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,ri))==null||e.div.classList.toggle("disabled",!t)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of l(this,ts).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,st).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!l(this,ri))return;const e=l(this,ri).getEditableAnnotations();for(const s of e){if(s.hide(),l(this,st).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var n;_(this,Pl,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,ts).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(l(this,ri)){const r=l(this,ri).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,st).isDeletedAnnotationElement(a))continue;let c=e.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(a),c&&(l(this,st).addChangedExistingAnnotation(c),c.renderAnnotationElement(o),c.show(!1)),o.show()}}b(this,Ll,bf).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(vs,Wn).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),_(this,Pl,!1)}getEditableAnnotation(t){var e;return((e=l(this,ri))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,st).getActive()!==t&&l(this,st).setActiveEditor(t)}enableTextSelection(){var t;this.div.tabIndex=-1,(t=l(this,Te))!=null&&t.div&&!l(this,Xi)&&(_(this,Xi,b(this,Eg,N0).bind(this)),l(this,Te).div.addEventListener("pointerdown",l(this,Xi),{signal:l(this,st)._signal}),l(this,Te).div.classList.add("highlighting"))}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Te))!=null&&t.div&&l(this,Xi)&&(l(this,Te).div.removeEventListener("pointerdown",l(this,Xi)),_(this,Xi,null),l(this,Te).div.classList.remove("highlighting"))}enableClick(){if(l(this,Yi))return;const t=l(this,st)._signal;_(this,Yi,this.pointerdown.bind(this)),_(this,Co,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",l(this,Yi),{signal:t}),this.div.addEventListener("pointerup",l(this,Co),{signal:t})}disableClick(){l(this,Yi)&&(this.div.removeEventListener("pointerdown",l(this,Yi)),this.div.removeEventListener("pointerup",l(this,Co)),_(this,Yi,null),_(this,Co,null))}attach(t){l(this,ts).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,st).isDeletedAnnotationElement(e)&&l(this,st).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,ts).delete(t.id),(e=l(this,So))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,Pl)&&t.annotationElementId&&l(this,st).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,st).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,l(this,kl)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,st).addDeletedAnnotationElement(t.annotationElementId),xt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,st).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),l(this,st).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Qi)&&(t._focusEventsAllowed=!1,_(this,Qi,setTimeout(()=>{_(this,Qi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,st)._signal}),e.focus())},0))),t._structTreeParentId=(s=l(this,So))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return l(this,st).getId()}get _signal(){return l(this,st)._signal}canCreateNewEmptyEditor(){var t;return(t=l(this,ad,ub))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){l(this,st).updateToolbar(t),l(this,st).updateMode(t);const{offsetX:s,offsetY:n}=b(this,cd,fb).call(this),r=this.getNextId(),o=b(this,ld,db).call(this,{parent:this,id:r,x:s,y:n,uiManager:l(this,st),isCentered:!0,...e});o&&this.add(o)}deserialize(t){var e;return((e=l(vs,Wn).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,st)))||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=b(this,ld,db).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:l(this,st),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(b(this,cd,fb).call(this),!0)}setSelected(t){l(this,st).setSelected(t)}toggleSelected(t){l(this,st).toggleSelected(t)}isSelected(t){return l(this,st).isSelected(t)}unselect(t){l(this,st).unselect(t)}pointerup(t){const{isMac:e}=Be.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&l(this,Un)){if(_(this,Un,!1),!l(this,Rl)){_(this,Rl,!0);return}if(l(this,st).getMode()===bt.STAMP){l(this,st).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(l(this,st).getMode()===bt.HIGHLIGHT&&this.enableTextSelection(),l(this,Un)){_(this,Un,!1);return}const{isMac:e}=Be.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;_(this,Un,!0);const s=l(this,st).getActive();_(this,Rl,!s||s.isEmpty())}findNewParent(t,e,s){const n=l(this,st).findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){var t,e;((t=l(this,st).getActive())==null?void 0:t.parent)===this&&(l(this,st).commitOrRemove(),l(this,st).setActiveEditor(null)),l(this,Qi)&&(clearTimeout(l(this,Qi)),_(this,Qi,null));for(const s of l(this,ts).values())(e=l(this,So))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,ts).clear(),l(this,st).removeLayer(this)}render({viewport:t}){this.viewport=t,Io(this.div,t);for(const e of l(this,st).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,st).commitOrRemove(),b(this,Ll,bf).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Io(this.div,{rotation:s}),e!==s)for(const n of l(this,ts).values())n.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,st).viewParameters.realScale}};So=new WeakMap,Rl=new WeakMap,ri=new WeakMap,Co=new WeakMap,Yi=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,ts=new WeakMap,Un=new WeakMap,kl=new WeakMap,Pl=new WeakMap,Te=new WeakMap,st=new WeakMap,Wn=new WeakMap,Eg=new WeakSet,N0=function(t){l(this,st).unselectAll();const{target:e}=t;if(e===l(this,Te).div||e.classList.contains("endOfContent")&&l(this,Te).div.contains(e)){const{isMac:s}=Be.platform;if(t.button!==0||t.ctrlKey&&s)return;l(this,st).showAllEditors("highlight",!0,!0),l(this,Te).div.classList.add("free"),this.toggleDrawing(),Df.startHighlighting(this,l(this,st).direction==="ltr",t),l(this,Te).div.addEventListener("pointerup",()=>{l(this,Te).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,st)._signal}),t.preventDefault()}},ad=new WeakSet,ub=function(){return l(vs,Wn).get(l(this,st).getMode())},ld=new WeakSet,db=function(t){const e=l(this,ad,ub);return e?new e.prototype.constructor(t):null},cd=new WeakSet,fb=function(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+n),h=(r+a)/2-t,u=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:d,offsetY:f}},Ll=new WeakSet,bf=function(){_(this,kl,!0);for(const t of l(this,ts).values())t.isEmpty()&&t.remove();_(this,kl,!1)},ht(vs,"_initialized",!1),g(vs,Wn,new Map([W_,tb,ab,Df].map(t=>[t._editorType,t])));let hb=vs;var oi,hd,ee,zn,ud,gb,dd,mb,wg,F0;const fe=class fe{constructor({pageIndex:t}){g(this,dd);g(this,wg);g(this,oi,null);g(this,hd,0);g(this,ee,new Map);g(this,zn,new Map);this.pageIndex=t}setParent(t){if(!l(this,oi)){_(this,oi,t);return}if(l(this,oi)!==t){if(l(this,ee).size>0)for(const e of l(this,ee).values())e.remove(),t.append(e);_(this,oi,t)}}static get _svgFactory(){return At(this,"_svgFactory",new Yb)}highlight(t,e,s,n=!1){const r=We(this,hd)._++,o=b(this,dd,mb).call(this,t.box);o.classList.add("highlight"),t.free&&o.classList.add("free");const a=fe._svgFactory.createElement("defs");o.append(a);const c=fe._svgFactory.createElement("path");a.append(c);const h=`path_p${this.pageIndex}_${r}`;c.setAttribute("id",h),c.setAttribute("d",t.toSVGPath()),n&&l(this,zn).set(r,c);const u=b(this,wg,F0).call(this,a,h),d=fe._svgFactory.createElement("use");return o.append(d),o.setAttribute("fill",e),o.setAttribute("fill-opacity",s),d.setAttribute("href",`#${h}`),l(this,ee).set(r,o),{id:r,clipPathId:`url(#${u})`}}highlightOutline(t){const e=We(this,hd)._++,s=b(this,dd,mb).call(this,t.box);s.classList.add("highlightOutline");const n=fe._svgFactory.createElement("defs");s.append(n);const r=fe._svgFactory.createElement("path");n.append(r);const o=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",o),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let a;if(t.free){s.classList.add("free");const u=fe._svgFactory.createElement("mask");n.append(u),a=`mask_p${this.pageIndex}_${e}`,u.setAttribute("id",a),u.setAttribute("maskUnits","objectBoundingBox");const d=fe._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=fe._svgFactory.createElement("use");u.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=fe._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),a&&c.setAttribute("mask",`url(#${a})`);const h=c.cloneNode();return s.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),l(this,ee).set(e,s),e}finalizeLine(t,e){const s=l(this,zn).get(t);l(this,zn).delete(t),this.updateBox(t,e.box),s.setAttribute("d",e.toSVGPath())}updateLine(t,e){l(this,ee).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}removeFreeHighlight(t){this.remove(t),l(this,zn).delete(t)}updatePath(t,e){l(this,zn).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var s;b(s=fe,ud,gb).call(s,l(this,ee).get(t),e)}show(t,e){l(this,ee).get(t).classList.toggle("hidden",!e)}rotate(t,e){l(this,ee).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){l(this,ee).get(t).setAttribute("fill",e)}changeOpacity(t,e){l(this,ee).get(t).setAttribute("fill-opacity",e)}addClass(t,e){l(this,ee).get(t).classList.add(e)}removeClass(t,e){l(this,ee).get(t).classList.remove(e)}remove(t){l(this,oi)!==null&&(l(this,ee).get(t).remove(),l(this,ee).delete(t))}destroy(){_(this,oi,null);for(const t of l(this,ee).values())t.remove();l(this,ee).clear()}};oi=new WeakMap,hd=new WeakMap,ee=new WeakMap,zn=new WeakMap,ud=new WeakSet,gb=function(t,{x:e=0,y:s=0,width:n=1,height:r=1}={}){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`},dd=new WeakSet,mb=function(t){var s;const e=fe._svgFactory.create(1,1,!0);return l(this,oi).append(e),e.setAttribute("aria-hidden",!0),b(s=fe,ud,gb).call(s,e,t),e},wg=new WeakSet,F0=function(t,e){const s=fe._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=fe._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n},g(fe,ud);let pb=fe;ct.AbortException;ct.AnnotationEditorLayer;ct.AnnotationEditorParamsType;ct.AnnotationEditorType;ct.AnnotationEditorUIManager;ct.AnnotationLayer;ct.AnnotationMode;ct.CMapCompressionType;ct.ColorPicker;ct.DOMSVGFactory;ct.DrawLayer;ct.FeatureTest;var bL=ct.GlobalWorkerOptions;ct.ImageKind;ct.InvalidPDFException;ct.MissingPDFException;ct.OPS;ct.PDFDataRangeTransport;ct.PDFDateString;ct.PDFWorker;ct.PasswordResponses;ct.PermissionFlag;ct.PixelsPerInch;ct.RenderingCancelledException;ct.TextLayer;ct.UnexpectedResponseException;ct.Util;ct.VerbosityLevel;ct.XfaLayer;ct.build;ct.createValidAbsoluteUrl;ct.fetchData;var vL=ct.getDocument;ct.getFilenameFromUrl;ct.getPdfFilenameFromUrl;ct.getXfaPageViewport;ct.isDataScheme;ct.isPdfFile;ct.noContextMenu;ct.normalizeUnicode;ct.setLayerDimensions;ct.shadow;ct.version;bL.workerSrc="/pdf.worker.min.mjs";const yL={props:{pdf:{type:String,default:""},description:{type:String,default:""}},data(){return{width:null,height:null,pdfDoc:null,totalPages:0,pageNum:1}},async mounted(){this.renderDocumentPageByIndex(1)},methods:{setCanvasDimentionAtFirstLoading(){if(this.width==null||this.height==null){const i=this.$refs.pdfCanvasContainer;this.width=i.clientWidth,this.height=i.clientHeight*1.1}},renderDocumentPageByIndex(i){const t=vL(this.pdf);this.documentD=t.promise.then(e=>{console.log("PDF loaded"),this.totalPages=e.numPages,e.getPage(i).then(s=>this.renderPage(s))})},async renderPage(i){console.log("Page loaded");const t=1,e=i.getViewport({scale:t});await Mg();const s=this.$refs.pdfCanvas,n=s.getContext("2d");this.setCanvasDimentionAtFirstLoading(),s.height=this.height,s.width=this.width;const r={canvasContext:n,viewport:i.getViewport({scale:this.width/e.width})};i.render(r).promise.then(()=>{console.log("Page rendered")})},renderPreviousDocumentPage(){this.pageNum>1&&(this.pageNum--,this.renderDocumentPageByIndex(this.pageNum))},renderNextDocumentPage(){this.pageNum<this.totalPages&&(this.pageNum++,this.renderDocumentPageByIndex(this.pageNum))}}},AL={class:"pdf-viewer mt-3",ref:"pdfCanvasContainer"},EL={ref:"pdfCanvas"},wL={key:0,class:"loading"},SL={key:1,class:"error"},CL={class:"pdf-controls"},TL=["disabled"],xL=["disabled"];function RL(i,t,e,s,n,r){return mt(),vt("div",AL,[H("canvas",EL,null,512),i.loading?(mt(),vt("div",wL,"Loading...")):Dl("",!0),i.error?(mt(),vt("div",SL,Ji(i.error),1)):Dl("",!0),H("div",CL,[H("button",{onClick:t[0]||(t[0]=(...o)=>r.renderPreviousDocumentPage&&r.renderPreviousDocumentPage(...o)),disabled:n.pageNum===1},"Previous",8,TL),H("button",{onClick:t[1]||(t[1]=(...o)=>r.renderNextDocumentPage&&r.renderNextDocumentPage(...o)),disabled:n.pageNum===n.totalPages},"Next",8,xL)])],512)}const kL=ye(yL,[["render",RL],["__scopeId","data-v-dae6da55"]]);const PL={props:{images:{type:Array,default:()=>[]},edition:null}},LL=i=>(Fo("data-v-06fdc47e"),i=i(),$o(),i),IL=LL(()=>H("p",null,"La première et la quatrième de couverture",-1)),ML={class:"carousel-container"},DL={id:"carouselMainImages",class:"carousel slide","data-bs-ride":"carousel"},OL={class:"carousel-inner"},NL=["src","alt"],FL=PT('<button class="carousel-control-prev custom-carousel-control" type="button" data-bs-target="#carouselMainImages" data-bs-slide="prev" data-v-06fdc47e><span class="carousel-control-prev-icon" aria-hidden="true" data-v-06fdc47e></span><span class="visually-hidden" data-v-06fdc47e>Previous</span></button><button class="carousel-control-next custom-carousel-control" type="button" data-bs-target="#carouselMainImages" data-bs-slide="next" data-v-06fdc47e><span class="carousel-control-next-icon" aria-hidden="true" data-v-06fdc47e></span><span class="visually-hidden" data-v-06fdc47e>Next</span></button>',2),$L={key:0,class:"edition-box mt-3"};function HL(i,t,e,s,n,r){return mt(),vt(zt,null,[IL,H("div",ML,[H("div",DL,[H("div",OL,[(mt(!0),vt(zt,null,xo(e.images,(o,a)=>(mt(),vt("div",{key:a,class:kg(["carousel-item",{active:a===0}]),"data-bs-interval":"7000"},[H("img",{src:o,class:"d-block w-100 custom-carousel-item",alt:"Carousel item "+a},null,8,NL)],2))),128))]),FL])]),e.edition?(mt(),vt("div",$L,"Edition "+Ji(e.edition),1)):Dl("",!0)],64)}const BL=ye(PL,[["render",HL],["__scopeId","data-v-06fdc47e"]]),jL={props:{retailLinkList:{}},methods:{openLink(i){window.open(i,"_blank")}}},VL={class:"row g-1 mt-3"},UL=["onClick"];function WL(i,t,e,s,n,r){return mt(),vt("div",VL,[(mt(!0),vt(zt,null,xo(e.retailLinkList,o=>(mt(),vt("div",{key:o,class:"col-6 col-sm-4 col-md-3 col-lg-2 col-xl-2 col-xxl-2"},[H("button",{class:"btn btn-secondary w-100",onClick:a=>r.openLink(o.url)},"Lien "+Ji(o.label),9,UL)]))),128))])}const zL=ye(jL,[["render",WL]]);const KL={props:{text:String}},$0=i=>(Fo("data-v-68085f95"),i=i(),$o(),i),GL={class:"book-comment mt-3"},qL=$0(()=>H("p",null,"Zone de commentaire de l’auteur (facultatif)",-1)),YL=$0(()=>H("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris semper metus turpis, ac gravida nunc condimentum nec.",-1)),XL=[qL,YL];function QL(i,t,e,s,n,r){return mt(),vt("div",GL,XL)}const JL=ye(KL,[["render",QL],["__scopeId","data-v-68085f95"]]);const ZL={props:{images:{type:Array,default:()=>[]}},data(){return{currentSlide:0,itemsPerView:4}},methods:{nextSlide(){const i=this.images.length-this.itemsPerView;this.currentSlide<i&&(this.currentSlide++,this.updateTransform())},prevSlide(){this.currentSlide>0&&(this.currentSlide--,this.updateTransform())},updateTransform(){const i=this.currentSlide*(100/this.itemsPerView);this.$refs.secondaryCarouselInner.style.transform=`translateX(-${i}%)`},updateItemsPerView(){const i=window.innerWidth;i<576?this.itemsPerView=1:i<768?this.itemsPerView=2:i<992?this.itemsPerView=3:this.itemsPerView=4,this.currentSlide=0,this.updateTransform()}},mounted(){this.updateItemsPerView(),window.addEventListener("resize",this.updateItemsPerView)},beforeUnmount(){window.removeEventListener("resize",this.updateItemsPerView)}},Jg=i=>(Fo("data-v-3b5d6a12"),i=i(),$o(),i),t1={class:"multi-item-secondary-carousel mt-3"},e1={class:"secondary-carousel-inner",ref:"secondaryCarouselInner"},s1=["src","alt"],i1=Jg(()=>H("span",{class:"bi bi-chevron-left","aria-hidden":"true"},null,-1)),n1=Jg(()=>H("span",{class:"visually-hidden"},"Previous",-1)),r1=[i1,n1],o1=Jg(()=>H("span",{class:"bi bi-chevron-right","aria-hidden":"true"},null,-1)),a1=Jg(()=>H("span",{class:"visually-hidden"},"Next",-1)),l1=[o1,a1];function c1(i,t,e,s,n,r){return mt(),vt("div",t1,[H("div",e1,[(mt(!0),vt(zt,null,xo(e.images,(o,a)=>(mt(),vt("div",{key:a,class:"secondary-carousel-item"},[H("img",{src:o,class:"custom-secondary-carousel-image",alt:"Secondary Carousel item "+a},null,8,s1)]))),128))],512),H("button",{class:"secondary-carousel-control-prev secondary-carousel-control",onClick:t[0]||(t[0]=(...o)=>r.prevSlide&&r.prevSlide(...o))},r1),H("button",{class:"secondary-carousel-control-next secondary-carousel-control",onClick:t[1]||(t[1]=(...o)=>r.nextSlide&&r.nextSlide(...o))},l1)])}const h1=ye(ZL,[["render",c1],["__scopeId","data-v-3b5d6a12"]]);const u1={components:{BookHeader:BE,BookDetailHeader:bk,BookPdfOrDescriptionArea:kL,BookMainImagesCarousel:BL,BookRetailLinkList:zL,BookComment:JL,BookSecondaryImagesCarousel:h1,BookFooter:jE},data(){return{isLoading:!0,routes:wi,bookUtils:new Kb,book:{}}},async created(){await this.bookUtils.fetchBooks(),this.book=this.bookUtils.getBookById(this.$route.params.id)},mounted(){this.setLoading(!0),setTimeout(()=>{this.setLoading(!1)},200)},computed:{...Ub(Vc,["loading"])},methods:{...xE(Vc,["setLoading"]),back(){this.$router.back()}}},H0=i=>(Fo("data-v-f435bff3"),i=i(),$o(),i),d1={key:0},f1={id:"app-main-div"},p1={class:"mt-1"},g1={class:"row g-3"},m1={class:"col-12 col-md-7"},_1={class:"content-70 p-2 text-center"},b1={class:"col-12 col-md-5"},v1={class:"content-30 p-2 text-center"},y1=H0(()=>H("i",{class:"bi bi-house-door-fill me-2"},null,-1)),A1=H0(()=>H("span",null,"Revenir à la page d'accueil",-1)),E1=[y1,A1];function w1(i,t,e,s,n,r){const o=is("BookHeader"),a=is("BookDetailHeader"),c=is("BookPdfOrDescriptionArea"),h=is("BookMainImagesCarousel"),u=is("BookRetailLinkList"),d=is("BookComment"),f=is("BookSecondaryImagesCarousel"),p=is("BookFooter");return i.loading?Dl("",!0):(mt(),vt("div",d1,[Nt(o),H("div",f1,[Nt(a,{title:n.book.title,author:n.book.author},null,8,["title","author"]),(mt(!0),vt(zt,null,xo(n.book.genres,m=>(mt(),vt("span",{key:m,class:"badge rounded-pill bg-secondary m-2 fs-6"},Ji(m),1))),128)),H("div",p1,[H("div",g1,[H("div",m1,[H("div",_1,[Nt(c,{pdf:n.bookUtils.getPDF(n.book),description:n.book.description},null,8,["pdf","description"])])]),H("div",b1,[H("div",v1,[Nt(h,{images:n.bookUtils.getMainThumbnails(n.book),edition:n.book.edition},null,8,["images","edition"])])])])]),Nt(u,{"retail-link-list":n.book.retail_links},null,8,["retail-link-list"]),Nt(d,{comment:n.book.author_comment},null,8,["comment"]),Nt(f,{images:n.bookUtils.getSecondaryThumbnails(n.book)},null,8,["images"]),H("button",{class:"btn btn-primary mt-3","a11y-label":"Revenir à la page d'accueil",onClick:t[0]||(t[0]=m=>r.back())},E1)]),Nt(p,{class:"mt-2"})]))}const S1=ye(u1,[["render",w1],["__scopeId","data-v-f435bff3"]]),C1="/assets/logo-277e0e97.svg",T1={data(){return{routes:wi}},methods:{goToNextPage(){console.log("coucou")}}},x1=H("img",{alt:"Vue logo",class:"logo",src:C1,width:"125",height:"125"},null,-1),R1=H("h2",null,"Home Page2",-1);function k1(i,t,e,s,n,r){return mt(),vt("div",null,[x1,R1,H("button",{type:"button",onClick:t[0]||(t[0]=o=>i.$router.push(n.routes.youtubeWatcher))},"youtubeWatcher"),H("button",{type:"button",onClick:t[1]||(t[1]=o=>i.$router.push(n.routes.rokhMusicPlaylist))},"rokhMusicPlaylist"),H("button",{type:"button",onClick:t[2]||(t[2]=o=>i.$router.push(n.routes.musicChoiceMaker))},"musicChoiceMaker"),H("button",{type:"button",onClick:t[3]||(t[3]=o=>i.$router.push(n.routes.movieChoiceMaker))},"movieChoiceMaker"),H("button",{type:"button",onClick:t[4]||(t[4]=o=>i.$router.push(n.routes.videoGameChoiceMaker))},"videoGameChoiceMaker"),H("button",{type:"button",onClick:t[5]||(t[5]=o=>i.$router.push(n.routes.rokhRolDocumentation))},"rokhRolDocumentation"),H("button",{type:"button",onClick:t[6]||(t[6]=o=>i.$router.push(n.routes.rokhWosDocumentation))},"rokhWosDocumentation"),H("button",{type:"button",onClick:t[7]||(t[7]=o=>i.$router.push(n.routes.nothing))},"nothing")])}const P1=ye(T1,[["render",k1]]);const L1={data(){return{dropContainer:null,youtubeIframeUrl:"https://www.youtube.com/embed/X-6riincY-0"}},mounted(){this.dropContainer=document.getElementById("dropContainer"),this.dropContainer.addEventListener("dragover",this.onDragOver),this.dropContainer.addEventListener("drop",this.onDrop),this.dropContainer.addEventListener("dragleave",this.onDragLeave)},beforeUnmount(){window.removeEventListener("dragover",this.onDragOver),window.removeEventListener("drop",this.onDrop),window.removeEventListener("dragleave",this.onDragLeave)},methods:{back(){this.$router.back()},onDragOver(i){i.preventDefault(),this.dropContainer&&(this.dropContainer.style.border="2px dashed black")},onDrop(i){if(i.preventDefault(),this.dropContainer){this.dropContainer.style.border="2px dashed black";var t=i.dataTransfer.getData("text/plain");console.log("Dropped URL: "+t),this.handleOnDropAction(t)}},onDragLeave(){this.dropContainer&&(this.dropContainer.style.border="2px dashed #ccc")},handleOnDropAction(i){try{const t=new URL(i),e=t.searchParams.get("v"),s=t.searchParams.get("list"),n=t.searchParams.get("playlist");t.href.includes("/embed")?this.youtubeIframeUrl="https://www.youtube.com"+t.pathname:this.youtubeIframeUrl="https://www.youtube.com/embed/"+e,s?this.youtubeIframeUrl+="?list="+s:n&&(this.youtubeIframeUrl+="?playlist="+n),console.log("updated to : "+this.youtubeIframeUrl)}catch(t){console.log("ERROR [BAD URL] : "+t)}}}},I1=H("span",null,"revenir",-1),M1=[I1],D1=H("h2",{tag:"h2"},"youtubeWatcher Page",-1),O1=H("input",{type:"text",id:"fname",name:"fname"},null,-1),N1={class:"rowalex"},F1=H("div",{id:"dropContainer",class:"left center"},[H("p",null,"Drag and drop me some youtube url here please I'm hungry...")],-1),$1={id:"youtubewatcher",class:"right center"},H1=["src"];function B1(i,t,e,s,n,r){return mt(),vt(zt,null,[H("button",{model:"tertiary","a11y-label":"Ce bouton est de type discret",onClick:t[0]||(t[0]=o=>r.back())},M1),D1,O1,H("div",N1,[F1,H("div",$1,[H("iframe",{id:"myIframe",width:"1092",height:"614",src:n.youtubeIframeUrl,title:"Own stuff",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},`
      `,8,H1)])])],64)}const j1=ye(L1,[["render",B1]]);const V1={data(){return{youtubeIframeUrl:"https://www.youtube.com/embed/dBKQvCiczAw?list=RDEM5Rr5gluobeH1omam_Q0s8w"}},mounted(){var i=document.getElementById("dropContainer");i.addEventListener("dragover",t=>{t.preventDefault(),i.style.border="2px dashed black"}),i.addEventListener("drop",t=>{t.preventDefault(),i.style.border="2px dashed black";var e=t.dataTransfer.getData("text/plain");console.log("Dropped URL: "+e),this.handleOnDropAction(e)}),i.addEventListener("dragleave",()=>{i.style.border="2px dashed #ccc"})},beforeUnmount(){window.removeEventListener("dragover"),window.removeEventListener("drop"),window.removeEventListener("dragleave")},methods:{back(){this.$router.back()},handleOnDropAction(i){try{const t=new URL(i),e=t.searchParams.get("v"),s=t.searchParams.get("list"),n=t.searchParams.get("playlist");t.href.includes("/embed")?this.youtubeIframeUrl="https://www.youtube.com"+t.pathname:this.youtubeIframeUrl="https://www.youtube.com/embed/"+e,s?this.youtubeIframeUrl+="?list="+s:n&&(this.youtubeIframeUrl+="?playlist="+n),console.log("updated to : "+this.youtubeIframeUrl)}catch(t){console.log("ERROR [BAD URL] : "+t)}}}},U1=H("span",null,"revenir",-1),W1=[U1],z1=H("h2",{tag:"h2"},"rokhMusicPlaylist Page",-1),K1=H("input",{type:"text",id:"fname",name:"fname"},null,-1),G1={class:"rowalex"},q1=H("div",{id:"dropContainer",class:"left center"},[H("p",null,"Drag and drop me some youtube url here please I'm hungry...")],-1),Y1={id:"youtubewatcher",class:"right center"},X1=["src"];function Q1(i,t,e,s,n,r){return mt(),vt(zt,null,[H("button",{model:"tertiary","a11y-label":"Ce bouton est de type discret",onClick:t[0]||(t[0]=o=>r.back())},W1),z1,K1,H("div",G1,[q1,H("div",Y1,[H("iframe",{id:"myIframe",width:"1092",height:"614",src:n.youtubeIframeUrl,title:"Own stuff",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},`
      `,8,X1)])])],64)}const J1=ye(V1,[["render",Q1]]),Z1={methods:{back(){this.$router.back()}}},tI=H("svg",{"lib-color":"var(--color-primary)",icon:"fleche-retour-droite"},null,-1),eI=H("span",null,"revenir",-1),sI=[tI,eI],iI=H("h2",{tag:"h2"},"Nothing Page",-1),nI=H("div",{padding:"sm",radius:"xs"},[H("text",{tag:"p",center:"",class:"b mt-md"}," Cette fonctionnalité n'est pas encore disponible. "),H("svg",{center:"",icon:"personne-jacuzzi","lib-size":"xxxl"})],-1);function rI(i,t,e,s,n,r){return mt(),vt(zt,null,[H("button",{model:"tertiary","a11y-label":"Ce bouton est de type discret",onClick:t[0]||(t[0]=o=>r.back())},sI),iI,nI],64)}const oI=ye(Z1,[["render",rI]]),aI=ER({history:Hx(LR),routes:[{name:"bookHomepage",path:wi.bookHomepage,component:pk,meta:{title:"Rokh Family Showcase"}},{name:"bookDetail",path:wi.bookDetail,component:S1,meta:{title:"Rokh Family Showcase: Book Detail Page"}},{name:"rokhTempleHomepage",path:wi.rokhTempleHomepage,component:P1,meta:{title:"Rokh Temple"}},{name:"youtubeWatcher",path:wi.youtubeWatcher,component:j1,meta:{title:"Rokh Temple: youtube-watcher page"}},{name:"rokhMusicPlaylist",path:wi.rokhMusicPlaylist,component:J1},{name:"nothing",path:wi.nothing,component:oI},{name:"default",path:"/",redirect:{name:"bookHomepage"}},{path:"/:catchAll(.*)",redirect:{name:"nothing"}}]});var Me="top",ns="bottom",rs="right",De="left",Zg="auto",ql=[Me,ns,rs,De],Oo="start",$l="end",B0="clippingParents",sv="viewport",ia="popper",j0="reference",_b=ql.reduce(function(i,t){return i.concat([t+"-"+Oo,t+"-"+$l])},[]),iv=[].concat(ql,[Zg]).reduce(function(i,t){return i.concat([t,t+"-"+Oo,t+"-"+$l])},[]),V0="beforeRead",U0="read",W0="afterRead",z0="beforeMain",K0="main",G0="afterMain",q0="beforeWrite",Y0="write",X0="afterWrite",Q0=[V0,U0,W0,z0,K0,G0,q0,Y0,X0];function pi(i){return i?(i.nodeName||"").toLowerCase():null}function os(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var t=i.ownerDocument;return t&&t.defaultView||window}return i}function No(i){var t=os(i).Element;return i instanceof t||i instanceof Element}function ps(i){var t=os(i).HTMLElement;return i instanceof t||i instanceof HTMLElement}function nv(i){if(typeof ShadowRoot>"u")return!1;var t=os(i).ShadowRoot;return i instanceof t||i instanceof ShadowRoot}function lI(i){var t=i.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},n=t.attributes[e]||{},r=t.elements[e];!ps(r)||!pi(r)||(Object.assign(r.style,s),Object.keys(n).forEach(function(o){var a=n[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function cI(i){var t=i.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var n=t.elements[s],r=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),a=o.reduce(function(c,h){return c[h]="",c},{});!ps(n)||!pi(n)||(Object.assign(n.style,a),Object.keys(r).forEach(function(c){n.removeAttribute(c)}))})}}const rv={name:"applyStyles",enabled:!0,phase:"write",fn:lI,effect:cI,requires:["computeStyles"]};function hi(i){return i.split("-")[0]}var ko=Math.max,Of=Math.min,Hl=Math.round;function bb(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function J0(){return!/^((?!chrome|android).)*safari/i.test(bb())}function Bl(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=i.getBoundingClientRect(),n=1,r=1;t&&ps(i)&&(n=i.offsetWidth>0&&Hl(s.width)/i.offsetWidth||1,r=i.offsetHeight>0&&Hl(s.height)/i.offsetHeight||1);var o=No(i)?os(i):window,a=o.visualViewport,c=!J0()&&e,h=(s.left+(c&&a?a.offsetLeft:0))/n,u=(s.top+(c&&a?a.offsetTop:0))/r,d=s.width/n,f=s.height/r;return{width:d,height:f,top:u,right:h+d,bottom:u+f,left:h,x:h,y:u}}function ov(i){var t=Bl(i),e=i.offsetWidth,s=i.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:i.offsetLeft,y:i.offsetTop,width:e,height:s}}function Z0(i,t){var e=t.getRootNode&&t.getRootNode();if(i.contains(t))return!0;if(e&&nv(e)){var s=t;do{if(s&&i.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function rn(i){return os(i).getComputedStyle(i)}function hI(i){return["table","td","th"].indexOf(pi(i))>=0}function er(i){return((No(i)?i.ownerDocument:i.document)||window.document).documentElement}function tm(i){return pi(i)==="html"?i:i.assignedSlot||i.parentNode||(nv(i)?i.host:null)||er(i)}function Uy(i){return!ps(i)||rn(i).position==="fixed"?null:i.offsetParent}function uI(i){var t=/firefox/i.test(bb()),e=/Trident/i.test(bb());if(e&&ps(i)){var s=rn(i);if(s.position==="fixed")return null}var n=tm(i);for(nv(n)&&(n=n.host);ps(n)&&["html","body"].indexOf(pi(n))<0;){var r=rn(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function bd(i){for(var t=os(i),e=Uy(i);e&&hI(e)&&rn(e).position==="static";)e=Uy(e);return e&&(pi(e)==="html"||pi(e)==="body"&&rn(e).position==="static")?t:e||uI(i)||t}function av(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Ic(i,t,e){return ko(i,Of(t,e))}function dI(i,t,e){var s=Ic(i,t,e);return s>e?e:s}function tS(){return{top:0,right:0,bottom:0,left:0}}function eS(i){return Object.assign({},tS(),i)}function sS(i,t){return t.reduce(function(e,s){return e[s]=i,e},{})}var fI=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,eS(typeof t!="number"?t:sS(t,ql))};function pI(i){var t,e=i.state,s=i.name,n=i.options,r=e.elements.arrow,o=e.modifiersData.popperOffsets,a=hi(e.placement),c=av(a),h=[De,rs].indexOf(a)>=0,u=h?"height":"width";if(!(!r||!o)){var d=fI(n.padding,e),f=ov(r),p=c==="y"?Me:De,m=c==="y"?ns:rs,v=e.rects.reference[u]+e.rects.reference[c]-o[c]-e.rects.popper[u],A=o[c]-e.rects.reference[c],y=bd(r),w=y?c==="y"?y.clientHeight||0:y.clientWidth||0:0,T=v/2-A/2,C=d[p],R=w-f[u]-d[m],k=w/2-f[u]/2+T,I=Ic(C,k,R),M=c;e.modifiersData[s]=(t={},t[M]=I,t.centerOffset=I-k,t)}}function gI(i){var t=i.state,e=i.options,s=e.element,n=s===void 0?"[data-popper-arrow]":s;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||Z0(t.elements.popper,n)&&(t.elements.arrow=n))}const iS={name:"arrow",enabled:!0,phase:"main",fn:pI,effect:gI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function jl(i){return i.split("-")[1]}var mI={top:"auto",right:"auto",bottom:"auto",left:"auto"};function _I(i,t){var e=i.x,s=i.y,n=t.devicePixelRatio||1;return{x:Hl(e*n)/n||0,y:Hl(s*n)/n||0}}function Wy(i){var t,e=i.popper,s=i.popperRect,n=i.placement,r=i.variation,o=i.offsets,a=i.position,c=i.gpuAcceleration,h=i.adaptive,u=i.roundOffsets,d=i.isFixed,f=o.x,p=f===void 0?0:f,m=o.y,v=m===void 0?0:m,A=typeof u=="function"?u({x:p,y:v}):{x:p,y:v};p=A.x,v=A.y;var y=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),T=De,C=Me,R=window;if(h){var k=bd(e),I="clientHeight",M="clientWidth";if(k===os(e)&&(k=er(e),rn(k).position!=="static"&&a==="absolute"&&(I="scrollHeight",M="scrollWidth")),k=k,n===Me||(n===De||n===rs)&&r===$l){C=ns;var $=d&&k===R&&R.visualViewport?R.visualViewport.height:k[I];v-=$-s.height,v*=c?1:-1}if(n===De||(n===Me||n===ns)&&r===$l){T=rs;var K=d&&k===R&&R.visualViewport?R.visualViewport.width:k[M];p-=K-s.width,p*=c?1:-1}}var z=Object.assign({position:a},h&&mI),nt=u===!0?_I({x:p,y:v},os(e)):{x:p,y:v};if(p=nt.x,v=nt.y,c){var et;return Object.assign({},z,(et={},et[C]=w?"0":"",et[T]=y?"0":"",et.transform=(R.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",et))}return Object.assign({},z,(t={},t[C]=w?v+"px":"",t[T]=y?p+"px":"",t.transform="",t))}function bI(i){var t=i.state,e=i.options,s=e.gpuAcceleration,n=s===void 0?!0:s,r=e.adaptive,o=r===void 0?!0:r,a=e.roundOffsets,c=a===void 0?!0:a,h={placement:hi(t.placement),variation:jl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Wy(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Wy(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const lv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bI,data:{}};var Dd={passive:!0};function vI(i){var t=i.state,e=i.instance,s=i.options,n=s.scroll,r=n===void 0?!0:n,o=s.resize,a=o===void 0?!0:o,c=os(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&h.forEach(function(u){u.addEventListener("scroll",e.update,Dd)}),a&&c.addEventListener("resize",e.update,Dd),function(){r&&h.forEach(function(u){u.removeEventListener("scroll",e.update,Dd)}),a&&c.removeEventListener("resize",e.update,Dd)}}const cv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vI,data:{}};var yI={left:"right",right:"left",bottom:"top",top:"bottom"};function vf(i){return i.replace(/left|right|bottom|top/g,function(t){return yI[t]})}var AI={start:"end",end:"start"};function zy(i){return i.replace(/start|end/g,function(t){return AI[t]})}function hv(i){var t=os(i),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function uv(i){return Bl(er(i)).left+hv(i).scrollLeft}function EI(i,t){var e=os(i),s=er(i),n=e.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,c=0;if(n){r=n.width,o=n.height;var h=J0();(h||!h&&t==="fixed")&&(a=n.offsetLeft,c=n.offsetTop)}return{width:r,height:o,x:a+uv(i),y:c}}function wI(i){var t,e=er(i),s=hv(i),n=(t=i.ownerDocument)==null?void 0:t.body,r=ko(e.scrollWidth,e.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=ko(e.scrollHeight,e.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-s.scrollLeft+uv(i),c=-s.scrollTop;return rn(n||e).direction==="rtl"&&(a+=ko(e.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:a,y:c}}function dv(i){var t=rn(i),e=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+n+s)}function nS(i){return["html","body","#document"].indexOf(pi(i))>=0?i.ownerDocument.body:ps(i)&&dv(i)?i:nS(tm(i))}function Mc(i,t){var e;t===void 0&&(t=[]);var s=nS(i),n=s===((e=i.ownerDocument)==null?void 0:e.body),r=os(s),o=n?[r].concat(r.visualViewport||[],dv(s)?s:[]):s,a=t.concat(o);return n?a:a.concat(Mc(tm(o)))}function vb(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function SI(i,t){var e=Bl(i,!1,t==="fixed");return e.top=e.top+i.clientTop,e.left=e.left+i.clientLeft,e.bottom=e.top+i.clientHeight,e.right=e.left+i.clientWidth,e.width=i.clientWidth,e.height=i.clientHeight,e.x=e.left,e.y=e.top,e}function Ky(i,t,e){return t===sv?vb(EI(i,e)):No(t)?SI(t,e):vb(wI(er(i)))}function CI(i){var t=Mc(tm(i)),e=["absolute","fixed"].indexOf(rn(i).position)>=0,s=e&&ps(i)?bd(i):i;return No(s)?t.filter(function(n){return No(n)&&Z0(n,s)&&pi(n)!=="body"}):[]}function TI(i,t,e,s){var n=t==="clippingParents"?CI(i):[].concat(t),r=[].concat(n,[e]),o=r[0],a=r.reduce(function(c,h){var u=Ky(i,h,s);return c.top=ko(u.top,c.top),c.right=Of(u.right,c.right),c.bottom=Of(u.bottom,c.bottom),c.left=ko(u.left,c.left),c},Ky(i,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function rS(i){var t=i.reference,e=i.element,s=i.placement,n=s?hi(s):null,r=s?jl(s):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,c;switch(n){case Me:c={x:o,y:t.y-e.height};break;case ns:c={x:o,y:t.y+t.height};break;case rs:c={x:t.x+t.width,y:a};break;case De:c={x:t.x-e.width,y:a};break;default:c={x:t.x,y:t.y}}var h=n?av(n):null;if(h!=null){var u=h==="y"?"height":"width";switch(r){case Oo:c[h]=c[h]-(t[u]/2-e[u]/2);break;case $l:c[h]=c[h]+(t[u]/2-e[u]/2);break}}return c}function Vl(i,t){t===void 0&&(t={});var e=t,s=e.placement,n=s===void 0?i.placement:s,r=e.strategy,o=r===void 0?i.strategy:r,a=e.boundary,c=a===void 0?B0:a,h=e.rootBoundary,u=h===void 0?sv:h,d=e.elementContext,f=d===void 0?ia:d,p=e.altBoundary,m=p===void 0?!1:p,v=e.padding,A=v===void 0?0:v,y=eS(typeof A!="number"?A:sS(A,ql)),w=f===ia?j0:ia,T=i.rects.popper,C=i.elements[m?w:f],R=TI(No(C)?C:C.contextElement||er(i.elements.popper),c,u,o),k=Bl(i.elements.reference),I=rS({reference:k,element:T,strategy:"absolute",placement:n}),M=vb(Object.assign({},T,I)),$=f===ia?M:k,K={top:R.top-$.top+y.top,bottom:$.bottom-R.bottom+y.bottom,left:R.left-$.left+y.left,right:$.right-R.right+y.right},z=i.modifiersData.offset;if(f===ia&&z){var nt=z[n];Object.keys(K).forEach(function(et){var dt=[rs,ns].indexOf(et)>=0?1:-1,lt=[Me,ns].indexOf(et)>=0?"y":"x";K[et]+=nt[lt]*dt})}return K}function xI(i,t){t===void 0&&(t={});var e=t,s=e.placement,n=e.boundary,r=e.rootBoundary,o=e.padding,a=e.flipVariations,c=e.allowedAutoPlacements,h=c===void 0?iv:c,u=jl(s),d=u?a?_b:_b.filter(function(m){return jl(m)===u}):ql,f=d.filter(function(m){return h.indexOf(m)>=0});f.length===0&&(f=d);var p=f.reduce(function(m,v){return m[v]=Vl(i,{placement:v,boundary:n,rootBoundary:r,padding:o})[hi(v)],m},{});return Object.keys(p).sort(function(m,v){return p[m]-p[v]})}function RI(i){if(hi(i)===Zg)return[];var t=vf(i);return[zy(i),t,zy(t)]}function kI(i){var t=i.state,e=i.options,s=i.name;if(!t.modifiersData[s]._skip){for(var n=e.mainAxis,r=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!0:o,c=e.fallbackPlacements,h=e.padding,u=e.boundary,d=e.rootBoundary,f=e.altBoundary,p=e.flipVariations,m=p===void 0?!0:p,v=e.allowedAutoPlacements,A=t.options.placement,y=hi(A),w=y===A,T=c||(w||!m?[vf(A)]:RI(A)),C=[A].concat(T).reduce(function(re,Ut){return re.concat(hi(Ut)===Zg?xI(t,{placement:Ut,boundary:u,rootBoundary:d,padding:h,flipVariations:m,allowedAutoPlacements:v}):Ut)},[]),R=t.rects.reference,k=t.rects.popper,I=new Map,M=!0,$=C[0],K=0;K<C.length;K++){var z=C[K],nt=hi(z),et=jl(z)===Oo,dt=[Me,ns].indexOf(nt)>=0,lt=dt?"width":"height",X=Vl(t,{placement:z,boundary:u,rootBoundary:d,altBoundary:f,padding:h}),V=dt?et?rs:De:et?ns:Me;R[lt]>k[lt]&&(V=vf(V));var G=vf(V),jt=[];if(r&&jt.push(X[nt]<=0),a&&jt.push(X[V]<=0,X[G]<=0),jt.every(function(re){return re})){$=z,M=!1;break}I.set(z,jt)}if(M)for(var ne=m?3:1,Xt=function(Ut){var Ct=C.find(function(P){var U=I.get(P);if(U)return U.slice(0,Ut).every(function(W){return W})});if(Ct)return $=Ct,"break"},gt=ne;gt>0;gt--){var Rt=Xt(gt);if(Rt==="break")break}t.placement!==$&&(t.modifiersData[s]._skip=!0,t.placement=$,t.reset=!0)}}const oS={name:"flip",enabled:!0,phase:"main",fn:kI,requiresIfExists:["offset"],data:{_skip:!1}};function Gy(i,t,e){return e===void 0&&(e={x:0,y:0}),{top:i.top-t.height-e.y,right:i.right-t.width+e.x,bottom:i.bottom-t.height+e.y,left:i.left-t.width-e.x}}function qy(i){return[Me,rs,ns,De].some(function(t){return i[t]>=0})}function PI(i){var t=i.state,e=i.name,s=t.rects.reference,n=t.rects.popper,r=t.modifiersData.preventOverflow,o=Vl(t,{elementContext:"reference"}),a=Vl(t,{altBoundary:!0}),c=Gy(o,s),h=Gy(a,n,r),u=qy(c),d=qy(h);t.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const aS={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:PI};function LI(i,t,e){var s=hi(i),n=[De,Me].indexOf(s)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},t,{placement:i})):e,o=r[0],a=r[1];return o=o||0,a=(a||0)*n,[De,rs].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function II(i){var t=i.state,e=i.options,s=i.name,n=e.offset,r=n===void 0?[0,0]:n,o=iv.reduce(function(u,d){return u[d]=LI(d,t.rects,r),u},{}),a=o[t.placement],c=a.x,h=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=o}const lS={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:II};function MI(i){var t=i.state,e=i.name;t.modifiersData[e]=rS({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const fv={name:"popperOffsets",enabled:!0,phase:"read",fn:MI,data:{}};function DI(i){return i==="x"?"y":"x"}function OI(i){var t=i.state,e=i.options,s=i.name,n=e.mainAxis,r=n===void 0?!0:n,o=e.altAxis,a=o===void 0?!1:o,c=e.boundary,h=e.rootBoundary,u=e.altBoundary,d=e.padding,f=e.tether,p=f===void 0?!0:f,m=e.tetherOffset,v=m===void 0?0:m,A=Vl(t,{boundary:c,rootBoundary:h,padding:d,altBoundary:u}),y=hi(t.placement),w=jl(t.placement),T=!w,C=av(y),R=DI(C),k=t.modifiersData.popperOffsets,I=t.rects.reference,M=t.rects.popper,$=typeof v=="function"?v(Object.assign({},t.rects,{placement:t.placement})):v,K=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,nt={x:0,y:0};if(k){if(r){var et,dt=C==="y"?Me:De,lt=C==="y"?ns:rs,X=C==="y"?"height":"width",V=k[C],G=V+A[dt],jt=V-A[lt],ne=p?-M[X]/2:0,Xt=w===Oo?I[X]:M[X],gt=w===Oo?-M[X]:-I[X],Rt=t.elements.arrow,re=p&&Rt?ov(Rt):{width:0,height:0},Ut=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:tS(),Ct=Ut[dt],P=Ut[lt],U=Ic(0,I[X],re[X]),W=T?I[X]/2-ne-U-Ct-K.mainAxis:Xt-U-Ct-K.mainAxis,J=T?-I[X]/2+ne+U+P+K.mainAxis:gt+U+P+K.mainAxis,yt=t.elements.arrow&&bd(t.elements.arrow),E=yt?C==="y"?yt.clientTop||0:yt.clientLeft||0:0,S=(et=z==null?void 0:z[C])!=null?et:0,x=V+W-S-E,L=V+J-S,D=Ic(p?Of(G,x):G,V,p?ko(jt,L):jt);k[C]=D,nt[C]=D-V}if(a){var O,q=C==="x"?Me:De,B=C==="x"?ns:rs,j=k[R],F=R==="y"?"height":"width",tt=j+A[q],Y=j-A[B],Z=[Me,De].indexOf(y)!==-1,rt=(O=z==null?void 0:z[R])!=null?O:0,ft=Z?tt:j-I[F]-M[F]-rt+K.altAxis,kt=Z?j+I[F]+M[F]-rt-K.altAxis:Y,Tt=p&&Z?dI(ft,j,kt):Ic(p?ft:tt,j,p?kt:Y);k[R]=Tt,nt[R]=Tt-j}t.modifiersData[s]=nt}}const cS={name:"preventOverflow",enabled:!0,phase:"main",fn:OI,requiresIfExists:["offset"]};function NI(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function FI(i){return i===os(i)||!ps(i)?hv(i):NI(i)}function $I(i){var t=i.getBoundingClientRect(),e=Hl(t.width)/i.offsetWidth||1,s=Hl(t.height)/i.offsetHeight||1;return e!==1||s!==1}function HI(i,t,e){e===void 0&&(e=!1);var s=ps(t),n=ps(t)&&$I(t),r=er(t),o=Bl(i,n,e),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!e)&&((pi(t)!=="body"||dv(r))&&(a=FI(t)),ps(t)?(c=Bl(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):r&&(c.x=uv(r))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function BI(i){var t=new Map,e=new Set,s=[];i.forEach(function(r){t.set(r.name,r)});function n(r){e.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var c=t.get(a);c&&n(c)}}),s.push(r)}return i.forEach(function(r){e.has(r.name)||n(r)}),s}function jI(i){var t=BI(i);return Q0.reduce(function(e,s){return e.concat(t.filter(function(n){return n.phase===s}))},[])}function VI(i){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(i())})})),t}}function UI(i){var t=i.reduce(function(e,s){var n=e[s.name];return e[s.name]=n?Object.assign({},n,s,{options:Object.assign({},n.options,s.options),data:Object.assign({},n.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var Yy={placement:"bottom",modifiers:[],strategy:"absolute"};function Xy(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function em(i){i===void 0&&(i={});var t=i,e=t.defaultModifiers,s=e===void 0?[]:e,n=t.defaultOptions,r=n===void 0?Yy:n;return function(a,c,h){h===void 0&&(h=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yy,r),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},d=[],f=!1,p={state:u,setOptions:function(y){var w=typeof y=="function"?y(u.options):y;v(),u.options=Object.assign({},r,u.options,w),u.scrollParents={reference:No(a)?Mc(a):a.contextElement?Mc(a.contextElement):[],popper:Mc(c)};var T=jI(UI([].concat(s,u.options.modifiers)));return u.orderedModifiers=T.filter(function(C){return C.enabled}),m(),p.update()},forceUpdate:function(){if(!f){var y=u.elements,w=y.reference,T=y.popper;if(Xy(w,T)){u.rects={reference:HI(w,bd(T),u.options.strategy==="fixed"),popper:ov(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(K){return u.modifiersData[K.name]=Object.assign({},K.data)});for(var C=0;C<u.orderedModifiers.length;C++){if(u.reset===!0){u.reset=!1,C=-1;continue}var R=u.orderedModifiers[C],k=R.fn,I=R.options,M=I===void 0?{}:I,$=R.name;typeof k=="function"&&(u=k({state:u,options:M,name:$,instance:p})||u)}}}},update:VI(function(){return new Promise(function(A){p.forceUpdate(),A(u)})}),destroy:function(){v(),f=!0}};if(!Xy(a,c))return p;p.setOptions(h).then(function(A){!f&&h.onFirstUpdate&&h.onFirstUpdate(A)});function m(){u.orderedModifiers.forEach(function(A){var y=A.name,w=A.options,T=w===void 0?{}:w,C=A.effect;if(typeof C=="function"){var R=C({state:u,name:y,instance:p,options:T}),k=function(){};d.push(R||k)}})}function v(){d.forEach(function(A){return A()}),d=[]}return p}}var WI=em(),zI=[cv,fv,lv,rv],KI=em({defaultModifiers:zI}),GI=[cv,fv,lv,rv,lS,oS,cS,iS,aS],pv=em({defaultModifiers:GI});const hS=Object.freeze(Object.defineProperty({__proto__:null,afterMain:G0,afterRead:W0,afterWrite:X0,applyStyles:rv,arrow:iS,auto:Zg,basePlacements:ql,beforeMain:z0,beforeRead:V0,beforeWrite:q0,bottom:ns,clippingParents:B0,computeStyles:lv,createPopper:pv,createPopperBase:WI,createPopperLite:KI,detectOverflow:Vl,end:$l,eventListeners:cv,flip:oS,hide:aS,left:De,main:K0,modifierPhases:Q0,offset:lS,placements:iv,popper:ia,popperGenerator:em,popperOffsets:fv,preventOverflow:cS,read:U0,reference:j0,right:rs,start:Oo,top:Me,variationPlacements:_b,viewport:sv,write:Y0},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const hn=new Map,wm={set(i,t,e){hn.has(i)||hn.set(i,new Map);const s=hn.get(i);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,e)},get(i,t){return hn.has(i)&&hn.get(i).get(t)||null},remove(i,t){if(!hn.has(i))return;const e=hn.get(i);e.delete(t),e.size===0&&hn.delete(i)}},qI=1e6,YI=1e3,yb="transitionend",uS=i=>(i&&window.CSS&&window.CSS.escape&&(i=i.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),i),XI=i=>i==null?`${i}`:Object.prototype.toString.call(i).match(/\s([a-z]+)/i)[1].toLowerCase(),QI=i=>{do i+=Math.floor(Math.random()*qI);while(document.getElementById(i));return i},JI=i=>{if(!i)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(i);const s=Number.parseFloat(t),n=Number.parseFloat(e);return!s&&!n?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*YI)},dS=i=>{i.dispatchEvent(new Event(yb))},sn=i=>!i||typeof i!="object"?!1:(typeof i.jquery<"u"&&(i=i[0]),typeof i.nodeType<"u"),Qn=i=>sn(i)?i.jquery?i[0]:i:typeof i=="string"&&i.length>0?document.querySelector(uS(i)):null,Yl=i=>{if(!sn(i)||i.getClientRects().length===0)return!1;const t=getComputedStyle(i).getPropertyValue("visibility")==="visible",e=i.closest("details:not([open])");if(!e)return t;if(e!==i){const s=i.closest("summary");if(s&&s.parentNode!==e||s===null)return!1}return t},Jn=i=>!i||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")?!0:typeof i.disabled<"u"?i.disabled:i.hasAttribute("disabled")&&i.getAttribute("disabled")!=="false",fS=i=>{if(!document.documentElement.attachShadow)return null;if(typeof i.getRootNode=="function"){const t=i.getRootNode();return t instanceof ShadowRoot?t:null}return i instanceof ShadowRoot?i:i.parentNode?fS(i.parentNode):null},Nf=()=>{},vd=i=>{i.offsetHeight},pS=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Sm=[],ZI=i=>{document.readyState==="loading"?(Sm.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Sm)t()}),Sm.push(i)):i()},gs=()=>document.documentElement.dir==="rtl",_s=i=>{ZI(()=>{const t=pS();if(t){const e=i.NAME,s=t.fn[e];t.fn[e]=i.jQueryInterface,t.fn[e].Constructor=i,t.fn[e].noConflict=()=>(t.fn[e]=s,i.jQueryInterface)}})},He=(i,t=[],e=i)=>typeof i=="function"?i(...t):e,gS=(i,t,e=!0)=>{if(!e){He(i);return}const s=5,n=JI(t)+s;let r=!1;const o=({target:a})=>{a===t&&(r=!0,t.removeEventListener(yb,o),He(i))};t.addEventListener(yb,o),setTimeout(()=>{r||dS(t)},n)},gv=(i,t,e,s)=>{const n=i.length;let r=i.indexOf(t);return r===-1?!e&&s?i[n-1]:i[0]:(r+=e?1:-1,s&&(r=(r+n)%n),i[Math.max(0,Math.min(r,n-1))])},tM=/[^.]*(?=\..*)\.|.*/,eM=/\..*/,sM=/::\d+$/,Cm={};let Qy=1;const mS={mouseenter:"mouseover",mouseleave:"mouseout"},iM=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function _S(i,t){return t&&`${t}::${Qy++}`||i.uidEvent||Qy++}function bS(i){const t=_S(i);return i.uidEvent=t,Cm[t]=Cm[t]||{},Cm[t]}function nM(i,t){return function e(s){return mv(s,{delegateTarget:i}),e.oneOff&&N.off(i,s.type,t),t.apply(i,[s])}}function rM(i,t,e){return function s(n){const r=i.querySelectorAll(t);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return mv(n,{delegateTarget:o}),s.oneOff&&N.off(i,n.type,t,e),e.apply(o,[n])}}function vS(i,t,e=null){return Object.values(i).find(s=>s.callable===t&&s.delegationSelector===e)}function yS(i,t,e){const s=typeof t=="string",n=s?e:t||e;let r=AS(i);return iM.has(r)||(r=i),[s,n,r]}function Jy(i,t,e,s,n){if(typeof t!="string"||!i)return;let[r,o,a]=yS(t,e,s);t in mS&&(o=(m=>function(v){if(!v.relatedTarget||v.relatedTarget!==v.delegateTarget&&!v.delegateTarget.contains(v.relatedTarget))return m.call(this,v)})(o));const c=bS(i),h=c[a]||(c[a]={}),u=vS(h,o,r?e:null);if(u){u.oneOff=u.oneOff&&n;return}const d=_S(o,t.replace(tM,"")),f=r?rM(i,e,o):nM(i,o);f.delegationSelector=r?e:null,f.callable=o,f.oneOff=n,f.uidEvent=d,h[d]=f,i.addEventListener(a,f,r)}function Ab(i,t,e,s,n){const r=vS(t[e],s,n);r&&(i.removeEventListener(e,r,!!n),delete t[e][r.uidEvent])}function oM(i,t,e,s){const n=t[e]||{};for(const[r,o]of Object.entries(n))r.includes(s)&&Ab(i,t,e,o.callable,o.delegationSelector)}function AS(i){return i=i.replace(eM,""),mS[i]||i}const N={on(i,t,e,s){Jy(i,t,e,s,!1)},one(i,t,e,s){Jy(i,t,e,s,!0)},off(i,t,e,s){if(typeof t!="string"||!i)return;const[n,r,o]=yS(t,e,s),a=o!==t,c=bS(i),h=c[o]||{},u=t.startsWith(".");if(typeof r<"u"){if(!Object.keys(h).length)return;Ab(i,c,o,r,n?e:null);return}if(u)for(const d of Object.keys(c))oM(i,c,d,t.slice(1));for(const[d,f]of Object.entries(h)){const p=d.replace(sM,"");(!a||t.includes(p))&&Ab(i,c,o,f.callable,f.delegationSelector)}},trigger(i,t,e){if(typeof t!="string"||!i)return null;const s=pS(),n=AS(t),r=t!==n;let o=null,a=!0,c=!0,h=!1;r&&s&&(o=s.Event(t,e),s(i).trigger(o),a=!o.isPropagationStopped(),c=!o.isImmediatePropagationStopped(),h=o.isDefaultPrevented());const u=mv(new Event(t,{bubbles:a,cancelable:!0}),e);return h&&u.preventDefault(),c&&i.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function mv(i,t={}){for(const[e,s]of Object.entries(t))try{i[e]=s}catch{Object.defineProperty(i,e,{configurable:!0,get(){return s}})}return i}function Zy(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function Tm(i){return i.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const nn={setDataAttribute(i,t,e){i.setAttribute(`data-bs-${Tm(t)}`,e)},removeDataAttribute(i,t){i.removeAttribute(`data-bs-${Tm(t)}`)},getDataAttributes(i){if(!i)return{};const t={},e=Object.keys(i.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of e){let n=s.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=Zy(i.dataset[s])}return t},getDataAttribute(i,t){return Zy(i.getAttribute(`data-bs-${Tm(t)}`))}};class yd{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const s=sn(e)?nn.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...sn(e)?nn.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[s,n]of Object.entries(e)){const r=t[s],o=sn(r)?"element":XI(r);if(!new RegExp(n).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${n}".`)}}}const aM="5.3.3";class Hs extends yd{constructor(t,e){super(),t=Qn(t),t&&(this._element=t,this._config=this._getConfig(e),wm.set(this._element,this.constructor.DATA_KEY,this))}dispose(){wm.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,s=!0){gS(t,e,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return wm.get(Qn(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return aM}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const xm=i=>{let t=i.getAttribute("data-bs-target");if(!t||t==="#"){let e=i.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>uS(e)).join(","):null},it={find(i,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,i))},findOne(i,t=document.documentElement){return Element.prototype.querySelector.call(t,i)},children(i,t){return[].concat(...i.children).filter(e=>e.matches(t))},parents(i,t){const e=[];let s=i.parentNode.closest(t);for(;s;)e.push(s),s=s.parentNode.closest(t);return e},prev(i,t){let e=i.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(i,t){let e=i.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(i){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,i).filter(e=>!Jn(e)&&Yl(e))},getSelectorFromElement(i){const t=xm(i);return t&&it.findOne(t)?t:null},getElementFromSelector(i){const t=xm(i);return t?it.findOne(t):null},getMultipleElementsFromSelector(i){const t=xm(i);return t?it.find(t):[]}},sm=(i,t="hide")=>{const e=`click.dismiss${i.EVENT_KEY}`,s=i.NAME;N.on(document,e,`[data-bs-dismiss="${s}"]`,function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Jn(this))return;const r=it.getElementFromSelector(this)||this.closest(`.${s}`);i.getOrCreateInstance(r)[t]()})},lM="alert",cM="bs.alert",ES=`.${cM}`,hM=`close${ES}`,uM=`closed${ES}`,dM="fade",fM="show";class im extends Hs{static get NAME(){return lM}close(){if(N.trigger(this._element,hM).defaultPrevented)return;this._element.classList.remove(fM);const e=this._element.classList.contains(dM);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),N.trigger(this._element,uM),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=im.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}sm(im,"close");_s(im);const pM="button",gM="bs.button",mM=`.${gM}`,_M=".data-api",bM="active",tA='[data-bs-toggle="button"]',vM=`click${mM}${_M}`;class nm extends Hs{static get NAME(){return pM}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(bM))}static jQueryInterface(t){return this.each(function(){const e=nm.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}N.on(document,vM,tA,i=>{i.preventDefault();const t=i.target.closest(tA);nm.getOrCreateInstance(t).toggle()});_s(nm);const yM="swipe",Xl=".bs.swipe",AM=`touchstart${Xl}`,EM=`touchmove${Xl}`,wM=`touchend${Xl}`,SM=`pointerdown${Xl}`,CM=`pointerup${Xl}`,TM="touch",xM="pen",RM="pointer-event",kM=40,PM={endCallback:null,leftCallback:null,rightCallback:null},LM={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ff extends yd{constructor(t,e){super(),this._element=t,!(!t||!Ff.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return PM}static get DefaultType(){return LM}static get NAME(){return yM}dispose(){N.off(this._element,Xl)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),He(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=kM)return;const e=t/this._deltaX;this._deltaX=0,e&&He(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,SM,t=>this._start(t)),N.on(this._element,CM,t=>this._end(t)),this._element.classList.add(RM)):(N.on(this._element,AM,t=>this._start(t)),N.on(this._element,EM,t=>this._move(t)),N.on(this._element,wM,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===xM||t.pointerType===TM)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const IM="carousel",MM="bs.carousel",sr=`.${MM}`,wS=".data-api",DM="ArrowLeft",OM="ArrowRight",NM=500,nc="next",Go="prev",na="left",yf="right",FM=`slide${sr}`,Rm=`slid${sr}`,$M=`keydown${sr}`,HM=`mouseenter${sr}`,BM=`mouseleave${sr}`,jM=`dragstart${sr}`,VM=`load${sr}${wS}`,UM=`click${sr}${wS}`,SS="carousel",Od="active",WM="slide",zM="carousel-item-end",KM="carousel-item-start",GM="carousel-item-next",qM="carousel-item-prev",CS=".active",TS=".carousel-item",YM=CS+TS,XM=".carousel-item img",QM=".carousel-indicators",JM="[data-bs-slide], [data-bs-slide-to]",ZM='[data-bs-ride="carousel"]',tD={[DM]:yf,[OM]:na},eD={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},sD={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ad extends Hs{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=it.findOne(QM,this._element),this._addEventListeners(),this._config.ride===SS&&this.cycle()}static get Default(){return eD}static get DefaultType(){return sD}static get NAME(){return IM}next(){this._slide(nc)}nextWhenVisible(){!document.hidden&&Yl(this._element)&&this.next()}prev(){this._slide(Go)}pause(){this._isSliding&&dS(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){N.one(this._element,Rm,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){N.one(this._element,Rm,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const n=t>s?nc:Go;this._slide(n,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&N.on(this._element,$M,t=>this._keydown(t)),this._config.pause==="hover"&&(N.on(this._element,HM,()=>this.pause()),N.on(this._element,BM,()=>this._maybeEnableCycle())),this._config.touch&&Ff.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of it.find(XM,this._element))N.on(s,jM,n=>n.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(na)),rightCallback:()=>this._slide(this._directionToOrder(yf)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),NM+this._config.interval))}};this._swipeHelper=new Ff(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=tD[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=it.findOne(CS,this._indicatorsElement);e.classList.remove(Od),e.removeAttribute("aria-current");const s=it.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(Od),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const s=this._getActive(),n=t===nc,r=e||gv(this._getItems(),s,n,this._config.wrap);if(r===s)return;const o=this._getItemIndex(r),a=p=>N.trigger(this._element,p,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:o});if(a(FM).defaultPrevented||!s||!r)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const u=n?KM:zM,d=n?GM:qM;r.classList.add(d),vd(r),s.classList.add(u),r.classList.add(u);const f=()=>{r.classList.remove(u,d),r.classList.add(Od),s.classList.remove(Od,d,u),this._isSliding=!1,a(Rm)};this._queueCallback(f,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(WM)}_getActive(){return it.findOne(YM,this._element)}_getItems(){return it.find(TS,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return gs()?t===na?Go:nc:t===na?nc:Go}_orderToDirection(t){return gs()?t===Go?na:yf:t===Go?yf:na}static jQueryInterface(t){return this.each(function(){const e=Ad.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}N.on(document,UM,JM,function(i){const t=it.getElementFromSelector(this);if(!t||!t.classList.contains(SS))return;i.preventDefault();const e=Ad.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){e.to(s),e._maybeEnableCycle();return}if(nn.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});N.on(window,VM,()=>{const i=it.find(ZM);for(const t of i)Ad.getOrCreateInstance(t)});_s(Ad);const iD="collapse",nD="bs.collapse",Ed=`.${nD}`,rD=".data-api",oD=`show${Ed}`,aD=`shown${Ed}`,lD=`hide${Ed}`,cD=`hidden${Ed}`,hD=`click${Ed}${rD}`,km="show",aa="collapse",Nd="collapsing",uD="collapsed",dD=`:scope .${aa} .${aa}`,fD="collapse-horizontal",pD="width",gD="height",mD=".collapse.show, .collapse.collapsing",Eb='[data-bs-toggle="collapse"]',_D={parent:null,toggle:!0},bD={parent:"(null|element)",toggle:"boolean"};class zc extends Hs{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const s=it.find(Eb);for(const n of s){const r=it.getSelectorFromElement(n),o=it.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(n)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return _D}static get DefaultType(){return bD}static get NAME(){return iD}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(mD).filter(a=>a!==this._element).map(a=>zc.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||N.trigger(this._element,oD).defaultPrevented)return;for(const a of t)a.hide();const s=this._getDimension();this._element.classList.remove(aa),this._element.classList.add(Nd),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Nd),this._element.classList.add(aa,km),this._element.style[s]="",N.trigger(this._element,aD)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(n,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||N.trigger(this._element,lD).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,vd(this._element),this._element.classList.add(Nd),this._element.classList.remove(aa,km);for(const n of this._triggerArray){const r=it.getElementFromSelector(n);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([n],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Nd),this._element.classList.add(aa),N.trigger(this._element,cD)};this._element.style[e]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(km)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Qn(t.parent),t}_getDimension(){return this._element.classList.contains(fD)?pD:gD}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Eb);for(const e of t){const s=it.getElementFromSelector(e);s&&this._addAriaAndCollapsedClass([e],this._isShown(s))}}_getFirstLevelChildren(t){const e=it.find(dD,this._config.parent);return it.find(t,this._config.parent).filter(s=>!e.includes(s))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(uD,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const s=zc.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}N.on(document,hD,Eb,function(i){(i.target.tagName==="A"||i.delegateTarget&&i.delegateTarget.tagName==="A")&&i.preventDefault();for(const t of it.getMultipleElementsFromSelector(this))zc.getOrCreateInstance(t,{toggle:!1}).toggle()});_s(zc);const eA="dropdown",vD="bs.dropdown",Vo=`.${vD}`,_v=".data-api",yD="Escape",sA="Tab",AD="ArrowUp",iA="ArrowDown",ED=2,wD=`hide${Vo}`,SD=`hidden${Vo}`,CD=`show${Vo}`,TD=`shown${Vo}`,xS=`click${Vo}${_v}`,RS=`keydown${Vo}${_v}`,xD=`keyup${Vo}${_v}`,ra="show",RD="dropup",kD="dropend",PD="dropstart",LD="dropup-center",ID="dropdown-center",fr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',MD=`${fr}.${ra}`,Af=".dropdown-menu",DD=".navbar",OD=".navbar-nav",ND=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",FD=gs()?"top-end":"top-start",$D=gs()?"top-start":"top-end",HD=gs()?"bottom-end":"bottom-start",BD=gs()?"bottom-start":"bottom-end",jD=gs()?"left-start":"right-start",VD=gs()?"right-start":"left-start",UD="top",WD="bottom",zD={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},KD={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ui extends Hs{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=it.next(this._element,Af)[0]||it.prev(this._element,Af)[0]||it.findOne(Af,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return zD}static get DefaultType(){return KD}static get NAME(){return eA}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Jn(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!N.trigger(this._element,CD,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(OD))for(const s of[].concat(...document.body.children))N.on(s,"mouseover",Nf);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ra),this._element.classList.add(ra),N.trigger(this._element,TD,t)}}hide(){if(Jn(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!N.trigger(this._element,wD,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))N.off(s,"mouseover",Nf);this._popper&&this._popper.destroy(),this._menu.classList.remove(ra),this._element.classList.remove(ra),this._element.setAttribute("aria-expanded","false"),nn.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,SD,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!sn(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${eA.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof hS>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:sn(this._config.reference)?t=Qn(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=pv(t,this._menu,e)}_isShown(){return this._menu.classList.contains(ra)}_getPlacement(){const t=this._parent;if(t.classList.contains(kD))return jD;if(t.classList.contains(PD))return VD;if(t.classList.contains(LD))return UD;if(t.classList.contains(ID))return WD;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(RD)?e?$D:FD:e?BD:HD}_detectNavbar(){return this._element.closest(DD)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(nn.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...He(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const s=it.find(ND,this._menu).filter(n=>Yl(n));s.length&&gv(s,e,t===iA,!s.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=ui.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===ED||t.type==="keyup"&&t.key!==sA)return;const e=it.find(MD);for(const s of e){const n=ui.getInstance(s);if(!n||n._config.autoClose===!1)continue;const r=t.composedPath(),o=r.includes(n._menu);if(r.includes(n._element)||n._config.autoClose==="inside"&&!o||n._config.autoClose==="outside"&&o||n._menu.contains(t.target)&&(t.type==="keyup"&&t.key===sA||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const a={relatedTarget:n._element};t.type==="click"&&(a.clickEvent=t),n._completeHide(a)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),s=t.key===yD,n=[AD,iA].includes(t.key);if(!n&&!s||e&&!s)return;t.preventDefault();const r=this.matches(fr)?this:it.prev(this,fr)[0]||it.next(this,fr)[0]||it.findOne(fr,t.delegateTarget.parentNode),o=ui.getOrCreateInstance(r);if(n){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}N.on(document,RS,fr,ui.dataApiKeydownHandler);N.on(document,RS,Af,ui.dataApiKeydownHandler);N.on(document,xS,ui.clearMenus);N.on(document,xD,ui.clearMenus);N.on(document,xS,fr,function(i){i.preventDefault(),ui.getOrCreateInstance(this).toggle()});_s(ui);const kS="backdrop",GD="fade",nA="show",rA=`mousedown.bs.${kS}`,qD={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},YD={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class PS extends yd{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return qD}static get DefaultType(){return YD}static get NAME(){return kS}show(t){if(!this._config.isVisible){He(t);return}this._append();const e=this._getElement();this._config.isAnimated&&vd(e),e.classList.add(nA),this._emulateAnimation(()=>{He(t)})}hide(t){if(!this._config.isVisible){He(t);return}this._getElement().classList.remove(nA),this._emulateAnimation(()=>{this.dispose(),He(t)})}dispose(){this._isAppended&&(N.off(this._element,rA),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(GD),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Qn(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),N.on(t,rA,()=>{He(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){gS(t,this._getElement(),this._config.isAnimated)}}const XD="focustrap",QD="bs.focustrap",$f=`.${QD}`,JD=`focusin${$f}`,ZD=`keydown.tab${$f}`,tO="Tab",eO="forward",oA="backward",sO={autofocus:!0,trapElement:null},iO={autofocus:"boolean",trapElement:"element"};class LS extends yd{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return sO}static get DefaultType(){return iO}static get NAME(){return XD}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,$f),N.on(document,JD,t=>this._handleFocusin(t)),N.on(document,ZD,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,$f))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const s=it.focusableChildren(e);s.length===0?e.focus():this._lastTabNavDirection===oA?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===tO&&(this._lastTabNavDirection=t.shiftKey?oA:eO)}}const aA=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",lA=".sticky-top",Fd="padding-right",cA="margin-right";class wb{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Fd,e=>e+t),this._setElementAttributes(aA,Fd,e=>e+t),this._setElementAttributes(lA,cA,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Fd),this._resetElementAttributes(aA,Fd),this._resetElementAttributes(lA,cA)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,s){const n=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+n)return;this._saveInitialAttribute(o,e);const a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const s=t.style.getPropertyValue(e);s&&nn.setDataAttribute(t,e,s)}_resetElementAttributes(t,e){const s=n=>{const r=nn.getDataAttribute(n,e);if(r===null){n.style.removeProperty(e);return}nn.removeDataAttribute(n,e),n.style.setProperty(e,r)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,e){if(sn(t)){e(t);return}for(const s of it.find(t,this._element))e(s)}}const nO="modal",rO="bs.modal",ms=`.${rO}`,oO=".data-api",aO="Escape",lO=`hide${ms}`,cO=`hidePrevented${ms}`,IS=`hidden${ms}`,MS=`show${ms}`,hO=`shown${ms}`,uO=`resize${ms}`,dO=`click.dismiss${ms}`,fO=`mousedown.dismiss${ms}`,pO=`keydown.dismiss${ms}`,gO=`click${ms}${oO}`,hA="modal-open",mO="fade",uA="show",Pm="modal-static",_O=".modal.show",bO=".modal-dialog",vO=".modal-body",yO='[data-bs-toggle="modal"]',AO={backdrop:!0,focus:!0,keyboard:!0},EO={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ul extends Hs{constructor(t,e){super(t,e),this._dialog=it.findOne(bO,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new wb,this._addEventListeners()}static get Default(){return AO}static get DefaultType(){return EO}static get NAME(){return nO}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||N.trigger(this._element,MS,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(hA),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||N.trigger(this._element,lO).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(uA),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){N.off(window,ms),N.off(this._dialog,ms),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new PS({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new LS({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=it.findOne(vO,this._dialog);e&&(e.scrollTop=0),vd(this._element),this._element.classList.add(uA);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,hO,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,pO,t=>{if(t.key===aO){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),N.on(window,uO,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,fO,t=>{N.one(this._element,dO,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(hA),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,IS)})}_isAnimated(){return this._element.classList.contains(mO)}_triggerBackdropTransition(){if(N.trigger(this._element,cO).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Pm)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Pm),this._queueCallback(()=>{this._element.classList.remove(Pm),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),s=e>0;if(s&&!t){const n=gs()?"paddingLeft":"paddingRight";this._element.style[n]=`${e}px`}if(!s&&t){const n=gs()?"paddingRight":"paddingLeft";this._element.style[n]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const s=Ul.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](e)}})}}N.on(document,gO,yO,function(i){const t=it.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&i.preventDefault(),N.one(t,MS,n=>{n.defaultPrevented||N.one(t,IS,()=>{Yl(this)&&this.focus()})});const e=it.findOne(_O);e&&Ul.getInstance(e).hide(),Ul.getOrCreateInstance(t).toggle(this)});sm(Ul);_s(Ul);const wO="offcanvas",SO="bs.offcanvas",an=`.${SO}`,DS=".data-api",CO=`load${an}${DS}`,TO="Escape",dA="show",fA="showing",pA="hiding",xO="offcanvas-backdrop",OS=".offcanvas.show",RO=`show${an}`,kO=`shown${an}`,PO=`hide${an}`,gA=`hidePrevented${an}`,NS=`hidden${an}`,LO=`resize${an}`,IO=`click${an}${DS}`,MO=`keydown.dismiss${an}`,DO='[data-bs-toggle="offcanvas"]',OO={backdrop:!0,keyboard:!0,scroll:!1},NO={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Zn extends Hs{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return OO}static get DefaultType(){return NO}static get NAME(){return wO}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||N.trigger(this._element,RO,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new wb().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(fA);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(dA),this._element.classList.remove(fA),N.trigger(this._element,kO,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||N.trigger(this._element,PO).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(pA),this._backdrop.hide();const e=()=>{this._element.classList.remove(dA,pA),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new wb().reset(),N.trigger(this._element,NS)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){N.trigger(this._element,gA);return}this.hide()},e=!!this._config.backdrop;return new PS({className:xO,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new LS({trapElement:this._element})}_addEventListeners(){N.on(this._element,MO,t=>{if(t.key===TO){if(this._config.keyboard){this.hide();return}N.trigger(this._element,gA)}})}static jQueryInterface(t){return this.each(function(){const e=Zn.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}N.on(document,IO,DO,function(i){const t=it.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Jn(this))return;N.one(t,NS,()=>{Yl(this)&&this.focus()});const e=it.findOne(OS);e&&e!==t&&Zn.getInstance(e).hide(),Zn.getOrCreateInstance(t).toggle(this)});N.on(window,CO,()=>{for(const i of it.find(OS))Zn.getOrCreateInstance(i).show()});N.on(window,LO,()=>{for(const i of it.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(i).position!=="fixed"&&Zn.getOrCreateInstance(i).hide()});sm(Zn);_s(Zn);const FO=/^aria-[\w-]*$/i,FS={"*":["class","dir","id","lang","role",FO],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},$O=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),HO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,BO=(i,t)=>{const e=i.nodeName.toLowerCase();return t.includes(e)?$O.has(e)?!!HO.test(i.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(e))};function jO(i,t,e){if(!i.length)return i;if(e&&typeof e=="function")return e(i);const n=new window.DOMParser().parseFromString(i,"text/html"),r=[].concat(...n.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}const c=[].concat(...o.attributes),h=[].concat(t["*"]||[],t[a]||[]);for(const u of c)BO(u,h)||o.removeAttribute(u.nodeName)}return n.body.innerHTML}const VO="TemplateFactory",UO={allowList:FS,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},WO={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},zO={entry:"(string|element|function|null)",selector:"(string|element)"};class KO extends yd{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return UO}static get DefaultType(){return WO}static get NAME(){return VO}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[n,r]of Object.entries(this._config.content))this._setContent(t,r,n);const e=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&e.classList.add(...s.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,s]of Object.entries(t))super._typeCheckConfig({selector:e,entry:s},zO)}_setContent(t,e,s){const n=it.findOne(s,t);if(n){if(e=this._resolvePossibleFunction(e),!e){n.remove();return}if(sn(e)){this._putElementInTemplate(Qn(e),n);return}if(this._config.html){n.innerHTML=this._maybeSanitize(e);return}n.textContent=e}}_maybeSanitize(t){return this._config.sanitize?jO(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return He(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const GO="tooltip",qO=new Set(["sanitize","allowList","sanitizeFn"]),Lm="fade",YO="modal",$d="show",XO=".tooltip-inner",mA=`.${YO}`,_A="hide.bs.modal",rc="hover",Im="focus",QO="click",JO="manual",ZO="hide",tN="hidden",eN="show",sN="shown",iN="inserted",nN="click",rN="focusin",oN="focusout",aN="mouseenter",lN="mouseleave",cN={AUTO:"auto",TOP:"top",RIGHT:gs()?"left":"right",BOTTOM:"bottom",LEFT:gs()?"right":"left"},hN={allowList:FS,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},uN={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ql extends Hs{constructor(t,e){if(typeof hS>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return hN}static get DefaultType(){return uN}static get NAME(){return GO}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(mA),_A,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=N.trigger(this._element,this.constructor.eventName(eN)),s=(fS(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(n),N.trigger(this._element,this.constructor.eventName(iN))),this._popper=this._createPopper(n),n.classList.add($d),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))N.on(a,"mouseover",Nf);const o=()=>{N.trigger(this._element,this.constructor.eventName(sN)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||N.trigger(this._element,this.constructor.eventName(ZO)).defaultPrevented)return;if(this._getTipElement().classList.remove($d),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))N.off(n,"mouseover",Nf);this._activeTrigger[QO]=!1,this._activeTrigger[Im]=!1,this._activeTrigger[rc]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName(tN)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Lm,$d),e.classList.add(`bs-${this.constructor.NAME}-auto`);const s=QI(this.constructor.NAME).toString();return e.setAttribute("id",s),this._isAnimated()&&e.classList.add(Lm),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new KO({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[XO]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Lm)}_isShown(){return this.tip&&this.tip.classList.contains($d)}_createPopper(t){const e=He(this._config.placement,[this,t,this._element]),s=cN[e.toUpperCase()];return pv(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return He(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...e,...He(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")N.on(this._element,this.constructor.eventName(nN),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(e!==JO){const s=e===rc?this.constructor.eventName(aN):this.constructor.eventName(rN),n=e===rc?this.constructor.eventName(lN):this.constructor.eventName(oN);N.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Im:rc]=!0,o._enter()}),N.on(this._element,n,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Im:rc]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(mA),_A,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=nn.getDataAttributes(this._element);for(const s of Object.keys(e))qO.has(s)&&delete e[s];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Qn(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,s]of Object.entries(this._config))this.constructor.Default[e]!==s&&(t[e]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Ql.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}_s(Ql);const dN="popover",fN=".popover-header",pN=".popover-body",gN={...Ql.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},mN={...Ql.DefaultType,content:"(null|string|element|function)"};class bv extends Ql{static get Default(){return gN}static get DefaultType(){return mN}static get NAME(){return dN}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fN]:this._getTitle(),[pN]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=bv.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}_s(bv);const _N="scrollspy",bN="bs.scrollspy",vv=`.${bN}`,vN=".data-api",yN=`activate${vv}`,bA=`click${vv}`,AN=`load${vv}${vN}`,EN="dropdown-item",qo="active",wN='[data-bs-spy="scroll"]',Mm="[href]",SN=".nav, .list-group",vA=".nav-link",CN=".nav-item",TN=".list-group-item",xN=`${vA}, ${CN} > ${vA}, ${TN}`,RN=".dropdown",kN=".dropdown-toggle",PN={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},LN={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class rm extends Hs{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return PN}static get DefaultType(){return LN}static get NAME(){return _N}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Qn(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,bA),N.on(this._config.target,bA,Mm,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const s=this._rootElement||window,n=e.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:n,behavior:"smooth"});return}s.scrollTop=n}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},n=(this._rootElement||document.documentElement).scrollTop,r=n>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=n;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(s(o),!n)return;continue}!r&&!a&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=it.find(Mm,this._config.target);for(const e of t){if(!e.hash||Jn(e))continue;const s=it.findOne(decodeURI(e.hash),this._element);Yl(s)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(qo),this._activateParents(t),N.trigger(this._element,yN,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(EN)){it.findOne(kN,t.closest(RN)).classList.add(qo);return}for(const e of it.parents(t,SN))for(const s of it.prev(e,xN))s.classList.add(qo)}_clearActiveClass(t){t.classList.remove(qo);const e=it.find(`${Mm}.${qo}`,t);for(const s of e)s.classList.remove(qo)}static jQueryInterface(t){return this.each(function(){const e=rm.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}N.on(window,AN,()=>{for(const i of it.find(wN))rm.getOrCreateInstance(i)});_s(rm);const IN="tab",MN="bs.tab",Uo=`.${MN}`,DN=`hide${Uo}`,ON=`hidden${Uo}`,NN=`show${Uo}`,FN=`shown${Uo}`,$N=`click${Uo}`,HN=`keydown${Uo}`,BN=`load${Uo}`,jN="ArrowLeft",yA="ArrowRight",VN="ArrowUp",AA="ArrowDown",Dm="Home",EA="End",pr="active",wA="fade",Om="show",UN="dropdown",$S=".dropdown-toggle",WN=".dropdown-menu",Nm=`:not(${$S})`,zN='.list-group, .nav, [role="tablist"]',KN=".nav-item, .list-group-item",GN=`.nav-link${Nm}, .list-group-item${Nm}, [role="tab"]${Nm}`,HS='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Fm=`${GN}, ${HS}`,qN=`.${pr}[data-bs-toggle="tab"], .${pr}[data-bs-toggle="pill"], .${pr}[data-bs-toggle="list"]`;class Wl extends Hs{constructor(t){super(t),this._parent=this._element.closest(zN),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,HN,e=>this._keydown(e)))}static get NAME(){return IN}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?N.trigger(e,DN,{relatedTarget:t}):null;N.trigger(t,NN,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(pr),this._activate(it.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Om);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),N.trigger(t,FN,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(wA))}_deactivate(t,e){if(!t)return;t.classList.remove(pr),t.blur(),this._deactivate(it.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Om);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),N.trigger(t,ON,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(wA))}_keydown(t){if(![jN,yA,VN,AA,Dm,EA].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(n=>!Jn(n));let s;if([Dm,EA].includes(t.key))s=e[t.key===Dm?0:e.length-1];else{const n=[yA,AA].includes(t.key);s=gv(e,t.target,n,!0)}s&&(s.focus({preventScroll:!0}),Wl.getOrCreateInstance(s).show())}_getChildren(){return it.find(Fm,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=it.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(UN))return;const n=(r,o)=>{const a=it.findOne(r,s);a&&a.classList.toggle(o,e)};n($S,pr),n(WN,Om),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(pr)}_getInnerElement(t){return t.matches(Fm)?t:it.findOne(Fm,t)}_getOuterElement(t){return t.closest(KN)||t}static jQueryInterface(t){return this.each(function(){const e=Wl.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}N.on(document,$N,HS,function(i){["A","AREA"].includes(this.tagName)&&i.preventDefault(),!Jn(this)&&Wl.getOrCreateInstance(this).show()});N.on(window,BN,()=>{for(const i of it.find(qN))Wl.getOrCreateInstance(i)});_s(Wl);const YN="toast",XN="bs.toast",ir=`.${XN}`,QN=`mouseover${ir}`,JN=`mouseout${ir}`,ZN=`focusin${ir}`,tF=`focusout${ir}`,eF=`hide${ir}`,sF=`hidden${ir}`,iF=`show${ir}`,nF=`shown${ir}`,rF="fade",SA="hide",Hd="show",Bd="showing",oF={animation:"boolean",autohide:"boolean",delay:"number"},aF={animation:!0,autohide:!0,delay:5e3};class om extends Hs{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return aF}static get DefaultType(){return oF}static get NAME(){return YN}show(){if(N.trigger(this._element,iF).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(rF);const e=()=>{this._element.classList.remove(Bd),N.trigger(this._element,nF),this._maybeScheduleHide()};this._element.classList.remove(SA),vd(this._element),this._element.classList.add(Hd,Bd),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||N.trigger(this._element,eF).defaultPrevented)return;const e=()=>{this._element.classList.add(SA),this._element.classList.remove(Bd,Hd),N.trigger(this._element,sF)};this._element.classList.add(Bd),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Hd),super.dispose()}isShown(){return this._element.classList.contains(Hd)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,QN,t=>this._onInteraction(t,!0)),N.on(this._element,JN,t=>this._onInteraction(t,!1)),N.on(this._element,ZN,t=>this._onInteraction(t,!0)),N.on(this._element,tF,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=om.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}sm(om);_s(om);const yv=ux(PR);yv.use(px().use(Ax));yv.use(aI);yv.mount("#app");
